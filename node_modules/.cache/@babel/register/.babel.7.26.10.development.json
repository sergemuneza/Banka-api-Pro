{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _app = _interopRequireDefault(require(\"./app.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\n\nconst PORT = process.env.PORT || 5100;\nconst server = _app.default.listen(PORT, () => {\n  console.log(`Server running on port ${PORT}`);\n});\nvar _default = exports.default = server; // Export server for testing\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXBwIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJQT1JUIiwicHJvY2VzcyIsImVudiIsInNlcnZlciIsImFwcCIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcc2VyZ2VcXGJhbmthLWFwaVxcc3JjXFwiLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG5EZXZlbG9wZXJzOlxyXG4tIDIwMjQ4LzIwMjIgIFNFUkdFIE1VTkVaQVxyXG4tIDIxOTM5LzIwMjMgIE5FRU1BIFpBTklOS0FcclxuKi9cclxuXHJcbmltcG9ydCBhcHAgZnJvbSBcIi4vYXBwLmpzXCI7XHJcblxyXG5jb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCA1MTAwO1xyXG5cclxuY29uc3Qgc2VydmVyID0gYXBwLmxpc3RlbihQT1JULCAoKSA9PiB7XHJcbiAgY29uc29sZS5sb2coYFNlcnZlciBydW5uaW5nIG9uIHBvcnQgJHtQT1JUfWApO1xyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHNlcnZlcjsgLy8gRXhwb3J0IHNlcnZlciBmb3IgdGVzdGluZ1xyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFNQSxJQUFBQSxJQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFBMkIsU0FBQUQsdUJBQUFFLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFOM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJQSxNQUFNRyxJQUFJLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixJQUFJLElBQUksSUFBSTtBQUVyQyxNQUFNRyxNQUFNLEdBQUdDLFlBQUcsQ0FBQ0MsTUFBTSxDQUFDTCxJQUFJLEVBQUUsTUFBTTtFQUNwQ00sT0FBTyxDQUFDQyxHQUFHLENBQUMsMEJBQTBCUCxJQUFJLEVBQUUsQ0FBQztBQUMvQyxDQUFDLENBQUM7QUFBQyxJQUFBUSxRQUFBLEdBQUFDLE9BQUEsQ0FBQVYsT0FBQSxHQUVZSSxNQUFNLEVBQUUiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_app","_interopRequireDefault","require","e","__esModule","default","PORT","process","env","server","app","listen","console","log","_default","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\","sources":["server.js"],"sourcesContent":["/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\r\n\r\nimport app from \"./app.js\";\r\n\r\nconst PORT = process.env.PORT || 5100;\r\n\r\nconst server = app.listen(PORT, () => {\r\n  console.log(`Server running on port ${PORT}`);\r\n});\r\n\r\nexport default server; // Export server for testing\r\n\r\n"],"mappings":";;;;;;AAMA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AAA2B,SAAAD,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAN3B;AACA;AACA;AACA;AACA;;AAIA,MAAMG,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACF,IAAI,IAAI,IAAI;AAErC,MAAMG,MAAM,GAAGC,YAAG,CAACC,MAAM,CAACL,IAAI,EAAE,MAAM;EACpCM,OAAO,CAACC,GAAG,CAAC,0BAA0BP,IAAI,EAAE,CAAC;AAC/C,CAAC,CAAC;AAAC,IAAAQ,QAAA,GAAAC,OAAA,CAAAV,OAAA,GAEYI,MAAM,EAAE","ignoreList":[]}},"mtime":1742645206264},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _database = _interopRequireDefault(require(\"./config/database.js\"));\nvar _authRoutes = _interopRequireDefault(require(\"./routes/authRoutes.js\"));\nvar _accountRoutes = _interopRequireDefault(require(\"./routes/accountRoutes.js\"));\nvar _transactionRoutes = _interopRequireDefault(require(\"./routes/transactionRoutes.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\n\n_dotenv.default.config();\n(0, _database.default)();\nconst app = (0, _express.default)();\napp.use(_express.default.json());\napp.use(\"/api/v1/auth\", _authRoutes.default);\napp.use(\"/api/v1/accounts\", _accountRoutes.default);\napp.use(\"/api/v1/transactions\", _transactionRoutes.default);\nvar _default = exports.default = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2RvdGVudiIsIl9kYXRhYmFzZSIsIl9hdXRoUm91dGVzIiwiX2FjY291bnRSb3V0ZXMiLCJfdHJhbnNhY3Rpb25Sb3V0ZXMiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJkb3RlbnYiLCJjb25maWciLCJjb25uZWN0REIiLCJhcHAiLCJleHByZXNzIiwidXNlIiwianNvbiIsImF1dGhSb3V0ZXMiLCJhY2NvdW50Um91dGVzIiwidHJhbnNhY3Rpb25Sb3V0ZXMiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcc2VyZ2VcXGJhbmthLWFwaVxcc3JjXFwiLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG5EZXZlbG9wZXJzOlxyXG4tIDIwMjQ4LzIwMjIgIFNFUkdFIE1VTkVaQVxyXG4tIDIxOTM5LzIwMjMgIE5FRU1BIFpBTklOS0FcclxuKi9cclxuXHJcbmltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xyXG5pbXBvcnQgY29ubmVjdERCIGZyb20gXCIuL2NvbmZpZy9kYXRhYmFzZS5qc1wiO1xyXG5pbXBvcnQgYXV0aFJvdXRlcyBmcm9tIFwiLi9yb3V0ZXMvYXV0aFJvdXRlcy5qc1wiO1xyXG5pbXBvcnQgYWNjb3VudFJvdXRlcyBmcm9tIFwiLi9yb3V0ZXMvYWNjb3VudFJvdXRlcy5qc1wiO1xyXG5pbXBvcnQgdHJhbnNhY3Rpb25Sb3V0ZXMgZnJvbSBcIi4vcm91dGVzL3RyYW5zYWN0aW9uUm91dGVzLmpzXCI7XHJcblxyXG5kb3RlbnYuY29uZmlnKCk7XHJcbmNvbm5lY3REQigpO1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcclxuXHJcbmFwcC51c2UoXCIvYXBpL3YxL2F1dGhcIiwgYXV0aFJvdXRlcyk7XHJcbmFwcC51c2UoXCIvYXBpL3YxL2FjY291bnRzXCIsIGFjY291bnRSb3V0ZXMpO1xyXG5hcHAudXNlKFwiL2FwaS92MS90cmFuc2FjdGlvbnNcIiwgdHJhbnNhY3Rpb25Sb3V0ZXMpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXBwO1xyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFNQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxTQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxXQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxjQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSyxrQkFBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBQThELFNBQUFELHVCQUFBTyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBWDlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBU0FHLGVBQU0sQ0FBQ0MsTUFBTSxDQUFDLENBQUM7QUFDZixJQUFBQyxpQkFBUyxFQUFDLENBQUM7QUFFWCxNQUFNQyxHQUFHLEdBQUcsSUFBQUMsZ0JBQU8sRUFBQyxDQUFDO0FBQ3JCRCxHQUFHLENBQUNFLEdBQUcsQ0FBQ0QsZ0JBQU8sQ0FBQ0UsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUV2QkgsR0FBRyxDQUFDRSxHQUFHLENBQUMsY0FBYyxFQUFFRSxtQkFBVSxDQUFDO0FBQ25DSixHQUFHLENBQUNFLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRUcsc0JBQWEsQ0FBQztBQUMxQ0wsR0FBRyxDQUFDRSxHQUFHLENBQUMsc0JBQXNCLEVBQUVJLDBCQUFpQixDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFaLE9BQUEsR0FFcENJLEdBQUciLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","_dotenv","_database","_authRoutes","_accountRoutes","_transactionRoutes","e","__esModule","default","dotenv","config","connectDB","app","express","use","json","authRoutes","accountRoutes","transactionRoutes","_default","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\","sources":["app.js"],"sourcesContent":["/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\r\n\r\nimport express from \"express\";\r\nimport dotenv from \"dotenv\";\r\nimport connectDB from \"./config/database.js\";\r\nimport authRoutes from \"./routes/authRoutes.js\";\r\nimport accountRoutes from \"./routes/accountRoutes.js\";\r\nimport transactionRoutes from \"./routes/transactionRoutes.js\";\r\n\r\ndotenv.config();\r\nconnectDB();\r\n\r\nconst app = express();\r\napp.use(express.json());\r\n\r\napp.use(\"/api/v1/auth\", authRoutes);\r\napp.use(\"/api/v1/accounts\", accountRoutes);\r\napp.use(\"/api/v1/transactions\", transactionRoutes);\r\n\r\nexport default app;\r\n\r\n"],"mappings":";;;;;;AAMA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,SAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,WAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,cAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,kBAAA,GAAAN,sBAAA,CAAAC,OAAA;AAA8D,SAAAD,uBAAAO,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAX9D;AACA;AACA;AACA;AACA;;AASAG,eAAM,CAACC,MAAM,CAAC,CAAC;AACf,IAAAC,iBAAS,EAAC,CAAC;AAEX,MAAMC,GAAG,GAAG,IAAAC,gBAAO,EAAC,CAAC;AACrBD,GAAG,CAACE,GAAG,CAACD,gBAAO,CAACE,IAAI,CAAC,CAAC,CAAC;AAEvBH,GAAG,CAACE,GAAG,CAAC,cAAc,EAAEE,mBAAU,CAAC;AACnCJ,GAAG,CAACE,GAAG,CAAC,kBAAkB,EAAEG,sBAAa,CAAC;AAC1CL,GAAG,CAACE,GAAG,CAAC,sBAAsB,EAAEI,0BAAiB,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAZ,OAAA,GAEpCI,GAAG","ignoreList":[]}},"mtime":1742645177336},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\config\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\config\\\\database.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n_dotenv.default.config(); // ✅ Load environment variables\n\nconst connectDB = async () => {\n  try {\n    const mongoURI = process.env.MONGO_URI; // ✅ Ensure MONGO_URI is loaded\n    if (!mongoURI) {\n      throw new Error(\"MONGO_URI is missing in environment variables\");\n    }\n    await _mongoose.default.connect(mongoURI);\n    console.log(\"✅ MongoDB Connected...\");\n  } catch (error) {\n    console.error(\"❌ MongoDB Connection Failed:\", error.message);\n    process.exit(1);\n  }\n};\nvar _default = exports.default = connectDB;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9kb3RlbnYiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJkb3RlbnYiLCJjb25maWciLCJjb25uZWN0REIiLCJtb25nb1VSSSIsInByb2Nlc3MiLCJlbnYiLCJNT05HT19VUkkiLCJFcnJvciIsIm1vbmdvb3NlIiwiY29ubmVjdCIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsIm1lc3NhZ2UiLCJleGl0IiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXHNlcmdlXFxiYW5rYS1hcGlcXHNyY1xcY29uZmlnXFwiLCJzb3VyY2VzIjpbImRhdGFiYXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcclxuaW1wb3J0IGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XHJcblxyXG5kb3RlbnYuY29uZmlnKCk7IC8vIOKchSBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlc1xyXG5cclxuY29uc3QgY29ubmVjdERCID0gYXN5bmMgKCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBtb25nb1VSSSA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSSTsgLy8g4pyFIEVuc3VyZSBNT05HT19VUkkgaXMgbG9hZGVkXHJcbiAgICBpZiAoIW1vbmdvVVJJKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk1PTkdPX1VSSSBpcyBtaXNzaW5nIGluIGVudmlyb25tZW50IHZhcmlhYmxlc1wiKTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KG1vbmdvVVJJKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIuKchSBNb25nb0RCIENvbm5lY3RlZC4uLlwiKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBNb25nb0RCIENvbm5lY3Rpb24gRmFpbGVkOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHByb2Nlc3MuZXhpdCgxKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0REI7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQTRCLFNBQUFELHVCQUFBRyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBRTVCRyxlQUFNLENBQUNDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQzs7QUFFakIsTUFBTUMsU0FBUyxHQUFHLE1BQUFBLENBQUEsS0FBWTtFQUM1QixJQUFJO0lBQ0YsTUFBTUMsUUFBUSxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsU0FBUyxDQUFDLENBQUM7SUFDeEMsSUFBSSxDQUFDSCxRQUFRLEVBQUU7TUFDYixNQUFNLElBQUlJLEtBQUssQ0FBQywrQ0FBK0MsQ0FBQztJQUNsRTtJQUVBLE1BQU1DLGlCQUFRLENBQUNDLE9BQU8sQ0FBQ04sUUFBUSxDQUFDO0lBRWhDTyxPQUFPLENBQUNDLEdBQUcsQ0FBQyx3QkFBd0IsQ0FBQztFQUN2QyxDQUFDLENBQUMsT0FBT0MsS0FBSyxFQUFFO0lBQ2RGLE9BQU8sQ0FBQ0UsS0FBSyxDQUFDLDhCQUE4QixFQUFFQSxLQUFLLENBQUNDLE9BQU8sQ0FBQztJQUM1RFQsT0FBTyxDQUFDVSxJQUFJLENBQUMsQ0FBQyxDQUFDO0VBQ2pCO0FBQ0YsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FBQUMsT0FBQSxDQUFBakIsT0FBQSxHQUVhRyxTQUFTIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_dotenv","e","__esModule","default","dotenv","config","connectDB","mongoURI","process","env","MONGO_URI","Error","mongoose","connect","console","log","error","message","exit","_default","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\config\\","sources":["database.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\nimport dotenv from \"dotenv\";\r\n\r\ndotenv.config(); // ✅ Load environment variables\r\n\r\nconst connectDB = async () => {\r\n  try {\r\n    const mongoURI = process.env.MONGO_URI; // ✅ Ensure MONGO_URI is loaded\r\n    if (!mongoURI) {\r\n      throw new Error(\"MONGO_URI is missing in environment variables\");\r\n    }\r\n\r\n    await mongoose.connect(mongoURI);\r\n\r\n    console.log(\"✅ MongoDB Connected...\");\r\n  } catch (error) {\r\n    console.error(\"❌ MongoDB Connection Failed:\", error.message);\r\n    process.exit(1);\r\n  }\r\n};\r\n\r\nexport default connectDB;\r\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA4B,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE5BG,eAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;;AAEjB,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;EAC5B,IAAI;IACF,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,SAAS,CAAC,CAAC;IACxC,IAAI,CAACH,QAAQ,EAAE;MACb,MAAM,IAAII,KAAK,CAAC,+CAA+C,CAAC;IAClE;IAEA,MAAMC,iBAAQ,CAACC,OAAO,CAACN,QAAQ,CAAC;IAEhCO,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;EACvC,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdF,OAAO,CAACE,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAACC,OAAO,CAAC;IAC5DT,OAAO,CAACU,IAAI,CAAC,CAAC,CAAC;EACjB;AACF,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAjB,OAAA,GAEaG,SAAS","ignoreList":[]}},"mtime":1742455813723},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\routes\\\\authRoutes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\n/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\n\nconst express = require(\"express\");\nconst {\n  signup,\n  signin,\n  createStaff,\n  requestPasswordReset,\n  resetPassword\n} = require(\"../controllers/authController\");\nconst {\n  verifyToken,\n  isAdmin\n} = require(\"../middleware/authMiddleware\");\nconst router = express.Router();\nrouter.post(\"/signup\", signup);\nrouter.post(\"/signin\", signin);\nrouter.post(\"/signup-staff\", verifyToken, isAdmin, createStaff);\nrouter.post(\"/password-reset/request\", requestPasswordReset);\nrouter.post(\"/password-reset/reset\", resetPassword);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInNpZ251cCIsInNpZ25pbiIsImNyZWF0ZVN0YWZmIiwicmVxdWVzdFBhc3N3b3JkUmVzZXQiLCJyZXNldFBhc3N3b3JkIiwidmVyaWZ5VG9rZW4iLCJpc0FkbWluIiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcc2VyZ2VcXGJhbmthLWFwaVxcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsiYXV0aFJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG5EZXZlbG9wZXJzOlxyXG4tIDIwMjQ4LzIwMjIgIFNFUkdFIE1VTkVaQVxyXG4tIDIxOTM5LzIwMjMgIE5FRU1BIFpBTklOS0FcclxuKi9cclxuXHJcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTtcclxuY29uc3QgeyBzaWdudXAsIHNpZ25pbiwgY3JlYXRlU3RhZmYscmVxdWVzdFBhc3N3b3JkUmVzZXQsIHJlc2V0UGFzc3dvcmQgfSA9IHJlcXVpcmUoXCIuLi9jb250cm9sbGVycy9hdXRoQ29udHJvbGxlclwiKTtcclxuY29uc3QgeyB2ZXJpZnlUb2tlbiwgaXNBZG1pbiB9ID0gcmVxdWlyZShcIi4uL21pZGRsZXdhcmUvYXV0aE1pZGRsZXdhcmVcIik7XHJcblxyXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxucm91dGVyLnBvc3QoXCIvc2lnbnVwXCIsIHNpZ251cCk7XHJcbnJvdXRlci5wb3N0KFwiL3NpZ25pblwiLCBzaWduaW4pO1xyXG5yb3V0ZXIucG9zdChcIi9zaWdudXAtc3RhZmZcIiwgdmVyaWZ5VG9rZW4sIGlzQWRtaW4sIGNyZWF0ZVN0YWZmKTtcclxucm91dGVyLnBvc3QoXCIvcGFzc3dvcmQtcmVzZXQvcmVxdWVzdFwiLCByZXF1ZXN0UGFzc3dvcmRSZXNldCk7XHJcbnJvdXRlci5wb3N0KFwiL3Bhc3N3b3JkLXJlc2V0L3Jlc2V0XCIsIHJlc2V0UGFzc3dvcmQpOyBcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyBcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU07RUFBRUMsTUFBTTtFQUFFQyxNQUFNO0VBQUVDLFdBQVc7RUFBQ0Msb0JBQW9CO0VBQUVDO0FBQWMsQ0FBQyxHQUFHTCxPQUFPLENBQUMsK0JBQStCLENBQUM7QUFDcEgsTUFBTTtFQUFFTSxXQUFXO0VBQUVDO0FBQVEsQ0FBQyxHQUFHUCxPQUFPLENBQUMsOEJBQThCLENBQUM7QUFFeEUsTUFBTVEsTUFBTSxHQUFHVCxPQUFPLENBQUNVLE1BQU0sQ0FBQyxDQUFDO0FBRS9CRCxNQUFNLENBQUNFLElBQUksQ0FBQyxTQUFTLEVBQUVULE1BQU0sQ0FBQztBQUM5Qk8sTUFBTSxDQUFDRSxJQUFJLENBQUMsU0FBUyxFQUFFUixNQUFNLENBQUM7QUFDOUJNLE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLGVBQWUsRUFBRUosV0FBVyxFQUFFQyxPQUFPLEVBQUVKLFdBQVcsQ0FBQztBQUMvREssTUFBTSxDQUFDRSxJQUFJLENBQUMseUJBQXlCLEVBQUVOLG9CQUFvQixDQUFDO0FBQzVESSxNQUFNLENBQUNFLElBQUksQ0FBQyx1QkFBdUIsRUFBRUwsYUFBYSxDQUFDO0FBRW5ETSxNQUFNLENBQUNDLE9BQU8sR0FBR0osTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","signup","signin","createStaff","requestPasswordReset","resetPassword","verifyToken","isAdmin","router","Router","post","module","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\routes\\","sources":["authRoutes.js"],"sourcesContent":["/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\r\n\r\nconst express = require(\"express\");\r\nconst { signup, signin, createStaff,requestPasswordReset, resetPassword } = require(\"../controllers/authController\");\r\nconst { verifyToken, isAdmin } = require(\"../middleware/authMiddleware\");\r\n\r\nconst router = express.Router();\r\n\r\nrouter.post(\"/signup\", signup);\r\nrouter.post(\"/signin\", signin);\r\nrouter.post(\"/signup-staff\", verifyToken, isAdmin, createStaff);\r\nrouter.post(\"/password-reset/request\", requestPasswordReset);\r\nrouter.post(\"/password-reset/reset\", resetPassword); \r\n\r\nmodule.exports = router; \r\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,MAAM;EAAEC,MAAM;EAAEC,WAAW;EAACC,oBAAoB;EAAEC;AAAc,CAAC,GAAGL,OAAO,CAAC,+BAA+B,CAAC;AACpH,MAAM;EAAEM,WAAW;EAAEC;AAAQ,CAAC,GAAGP,OAAO,CAAC,8BAA8B,CAAC;AAExE,MAAMQ,MAAM,GAAGT,OAAO,CAACU,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,SAAS,EAAET,MAAM,CAAC;AAC9BO,MAAM,CAACE,IAAI,CAAC,SAAS,EAAER,MAAM,CAAC;AAC9BM,MAAM,CAACE,IAAI,CAAC,eAAe,EAAEJ,WAAW,EAAEC,OAAO,EAAEJ,WAAW,CAAC;AAC/DK,MAAM,CAACE,IAAI,CAAC,yBAAyB,EAAEN,oBAAoB,CAAC;AAC5DI,MAAM,CAACE,IAAI,CAAC,uBAAuB,EAAEL,aAAa,CAAC;AAEnDM,MAAM,CAACC,OAAO,GAAGJ,MAAM","ignoreList":[]}},"mtime":1742644783638},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\controllers\\\\authController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.signup = exports.signin = exports.resetPassword = exports.requestPasswordReset = exports.createStaff = void 0;\nvar _user = _interopRequireDefault(require(\"../models/user.js\"));\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _jwtHelper = require(\"../utils/jwtHelper.js\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\n\n_dotenv.default.config();\n\n// Generate JWT Token\nconst generateToken = user => {\n  return _jsonwebtoken.default.sign({\n    id: user._id,\n    role: user.role\n  }, process.env.JWT_SECRET, {\n    expiresIn: \"1d\"\n  });\n};\n\n//SIGNUP\nconst signup = async (req, res) => {\n  try {\n    const {\n      firstName,\n      lastName,\n      email,\n      password,\n      role\n    } = req.body;\n    if (!firstName || !lastName || !email || !password) {\n      return res.status(400).json({\n        error: \"All fields are required\"\n      });\n    }\n    const existingUser = await _user.default.findOne({\n      email\n    });\n    if (existingUser) {\n      return res.status(400).json({\n        error: \"User already exists\"\n      });\n    }\n    const hashedPassword = await _bcryptjs.default.hash(password, 12);\n    console.log(\"Hashed Password Before Saving:\", hashedPassword); // Debugging\n\n    const newUser = new _user.default({\n      firstName,\n      lastName,\n      email,\n      password: hashedPassword,\n      role: role || \"user\"\n    });\n    await newUser.save();\n    console.log(\"New User Created in DB:\", newUser);\n    res.status(201).json({\n      message: \"User registered successfully\",\n      user: {\n        id: newUser._id,\n        firstName,\n        lastName,\n        email,\n        role: newUser.role\n      },\n      token: generateToken(newUser)\n    });\n  } catch (error) {\n    console.error(\"Signup Error:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n//SIGNIN\nexports.signup = signup;\nconst signin = async (req, res) => {\n  try {\n    const {\n      email,\n      password\n    } = req.body;\n    console.log(\"Entered Email:\", email);\n    console.log(\"Entered Password:\", password);\n\n    // Ensure email and password are provided\n    if (!email || !password) {\n      return res.status(400).json({\n        error: \"Email and password are required\"\n      });\n    }\n    const user = await _user.default.findOne({\n      email\n    });\n    console.log(\"Fetched User from DB:\", user);\n    if (!user) {\n      return res.status(401).json({\n        error: \"Invalid email or password\"\n      });\n    }\n    const isPasswordValid = await _bcryptjs.default.compare(password, user.password);\n    console.log(\"Stored Hashed Password:\", user.password);\n    console.log(\"Password Match Status:\", isPasswordValid);\n    if (!isPasswordValid) {\n      return res.status(401).json({\n        error: \"Invalid email or password\"\n      });\n    }\n    res.status(200).json({\n      message: \"Login successful\",\n      user: {\n        id: user._id,\n        firstName: user.firstName,\n        lastName: user.lastName,\n        email: user.email,\n        role: user.role\n      },\n      token: generateToken(user)\n    });\n  } catch (error) {\n    console.error(\"Sign-in Error:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n//STAFF USER\nexports.signin = signin;\n// Create Staff (Cashier) - Admin Only\nconst createStaff = async (req, res) => {\n  try {\n    // Ensure only admins can create staff\n    if (!req.user || req.user.role !== \"admin\") {\n      return res.status(403).json({\n        error: \"Access denied. Admins only.\"\n      });\n    }\n    const {\n      firstName,\n      lastName,\n      email,\n      password\n    } = req.body;\n\n    // Ensure all fields are provided\n    if (!firstName || !lastName || !email || !password) {\n      return res.status(400).json({\n        error: \"All fields are required\"\n      });\n    }\n\n    // Check if user already exists\n    const existingUser = await _user.default.findOne({\n      email\n    });\n    if (existingUser) {\n      return res.status(400).json({\n        error: \"User already exists\"\n      });\n    }\n    try {\n      // Hash password before saving\n      const hashedPassword = await _bcryptjs.default.hash(password, 10);\n\n      // Create staff user\n      const staff = new _user.default({\n        firstName,\n        lastName,\n        email,\n        password: hashedPassword,\n        role: \"staff\"\n      });\n      await staff.save();\n\n      // Generate token\n      const token = (0, _jwtHelper.generateAuthToken)({\n        id: staff._id,\n        role: \"staff\"\n      });\n      res.status(201).json({\n        message: \"Staff account created successfully\",\n        user: {\n          id: staff._id,\n          firstName,\n          lastName,\n          email,\n          role: \"staff\"\n        },\n        token\n      });\n    } catch (hashError) {\n      console.error(\"Password Hashing Error:\", hashError);\n      return res.status(500).json({\n        error: \"Failed to hash password\"\n      });\n    }\n  } catch (error) {\n    console.error(\"Create Staff Error:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n// Request Password Reset (Send Reset Token via Email)\nexports.createStaff = createStaff;\nconst requestPasswordReset = async (req, res) => {\n  try {\n    const {\n      email\n    } = req.body;\n\n    // Check if user exists\n    const user = await _user.default.findOne({\n      email\n    });\n    if (!user) {\n      return res.status(404).json({\n        error: \"User not found\"\n      });\n    }\n\n    // Generate reset token\n    const resetToken = _jsonwebtoken.default.sign({\n      id: user._id\n    }, process.env.JWT_SECRET, {\n      expiresIn: \"15m\"\n    });\n\n    // Send email (Simulated using console.log, replace with nodemailer for real emails)\n    console.log(`🔹 Password Reset Token for ${email}: ${resetToken}`);\n    res.status(200).json({\n      message: \"Password reset link sent to email\",\n      resetToken\n    });\n  } catch (error) {\n    console.error(\"Password Reset Request Error:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n//Reset Password (Using Token)\nexports.requestPasswordReset = requestPasswordReset;\nconst resetPassword = async (req, res) => {\n  try {\n    const {\n      token,\n      newPassword\n    } = req.body;\n\n    // Verify Token\n    const decoded = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET);\n    const user = await _user.default.findById(decoded.id);\n    if (!user) {\n      return res.status(404).json({\n        error: \"Invalid or expired token\"\n      });\n    }\n\n    // Hash new password\n    const hashedPassword = await _bcryptjs.default.hash(newPassword, 10);\n    user.password = hashedPassword;\n    await user.save();\n    res.status(200).json({\n      message: \"Password reset successful\"\n    });\n  } catch (error) {\n    console.error(\"Password Reset Error:\", error);\n    res.status(500).json({\n      error: \"Invalid or expired token\"\n    });\n  }\n};\nexports.resetPassword = resetPassword;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdXNlciIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2pzb253ZWJ0b2tlbiIsIl9iY3J5cHRqcyIsIl9kb3RlbnYiLCJfand0SGVscGVyIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiZG90ZW52IiwiY29uZmlnIiwiZ2VuZXJhdGVUb2tlbiIsInVzZXIiLCJqd3QiLCJzaWduIiwiaWQiLCJfaWQiLCJyb2xlIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJzaWdudXAiLCJyZXEiLCJyZXMiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiZXhpc3RpbmdVc2VyIiwiVXNlciIsImZpbmRPbmUiLCJoYXNoZWRQYXNzd29yZCIsImJjcnlwdCIsImhhc2giLCJjb25zb2xlIiwibG9nIiwibmV3VXNlciIsInNhdmUiLCJtZXNzYWdlIiwidG9rZW4iLCJleHBvcnRzIiwic2lnbmluIiwiaXNQYXNzd29yZFZhbGlkIiwiY29tcGFyZSIsImNyZWF0ZVN0YWZmIiwic3RhZmYiLCJnZW5lcmF0ZUF1dGhUb2tlbiIsImhhc2hFcnJvciIsInJlcXVlc3RQYXNzd29yZFJlc2V0IiwicmVzZXRUb2tlbiIsInJlc2V0UGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsImRlY29kZWQiLCJ2ZXJpZnkiLCJmaW5kQnlJZCJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxzZXJnZVxcYmFua2EtYXBpXFxzcmNcXGNvbnRyb2xsZXJzXFwiLCJzb3VyY2VzIjpbImF1dGhDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbkRldmVsb3BlcnM6XHJcbi0gMjAyNDgvMjAyMiAgU0VSR0UgTVVORVpBXHJcbi0gMjE5MzkvMjAyMyAgTkVFTUEgWkFOSU5LQVxyXG4qL1xyXG5cclxuaW1wb3J0IFVzZXIgZnJvbSBcIi4uL21vZGVscy91c2VyLmpzXCI7XHJcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRqc1wiO1xyXG5pbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcclxuXHJcbmRvdGVudi5jb25maWcoKTtcclxuXHJcbi8vIEdlbmVyYXRlIEpXVCBUb2tlblxyXG5jb25zdCBnZW5lcmF0ZVRva2VuID0gKHVzZXIpID0+IHtcclxuICByZXR1cm4gand0LnNpZ24oeyBpZDogdXNlci5faWQsIHJvbGU6IHVzZXIucm9sZSB9LCBwcm9jZXNzLmVudi5KV1RfU0VDUkVULCB7XHJcbiAgICBleHBpcmVzSW46IFwiMWRcIixcclxuICB9KTtcclxufTtcclxuXHJcbi8vU0lHTlVQXHJcbmV4cG9ydCBjb25zdCBzaWdudXAgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwsIHBhc3N3b3JkLCByb2xlIH0gPSByZXEuYm9keTtcclxuICBcclxuICAgICAgaWYgKCFmaXJzdE5hbWUgfHwgIWxhc3ROYW1lIHx8ICFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBbGwgZmllbGRzIGFyZSByZXF1aXJlZFwiIH0pO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pO1xyXG4gICAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiVXNlciBhbHJlYWR5IGV4aXN0c1wiIH0pO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEyKTtcclxuICBcclxuICAgICAgY29uc29sZS5sb2coXCJIYXNoZWQgUGFzc3dvcmQgQmVmb3JlIFNhdmluZzpcIiwgaGFzaGVkUGFzc3dvcmQpOyAvLyBEZWJ1Z2dpbmdcclxuICBcclxuICAgICAgY29uc3QgbmV3VXNlciA9IG5ldyBVc2VyKHtcclxuICAgICAgICBmaXJzdE5hbWUsXHJcbiAgICAgICAgbGFzdE5hbWUsXHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLCBcclxuICAgICAgICByb2xlOiByb2xlIHx8IFwidXNlclwiLFxyXG4gICAgICB9KTtcclxuICBcclxuICAgICAgYXdhaXQgbmV3VXNlci5zYXZlKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiTmV3IFVzZXIgQ3JlYXRlZCBpbiBEQjpcIiwgbmV3VXNlcik7XHJcbiAgXHJcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiBcIlVzZXIgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHlcIixcclxuICAgICAgICB1c2VyOiB7IGlkOiBuZXdVc2VyLl9pZCwgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwsIHJvbGU6IG5ld1VzZXIucm9sZSB9LFxyXG4gICAgICAgIHRva2VuOiBnZW5lcmF0ZVRva2VuKG5ld1VzZXIpLFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJTaWdudXAgRXJyb3I6XCIsIGVycm9yKTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9KTtcclxuICAgIH1cclxuICB9O1xyXG4gXHJcbiAgLy9TSUdOSU5cclxuZXhwb3J0IGNvbnN0IHNpZ25pbiA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG4gIFxyXG4gICAgICBjb25zb2xlLmxvZyhcIkVudGVyZWQgRW1haWw6XCIsIGVtYWlsKTtcclxuICAgICAgY29uc29sZS5sb2coXCJFbnRlcmVkIFBhc3N3b3JkOlwiLCBwYXNzd29yZCk7XHJcbiAgXHJcbiAgICAgIC8vIEVuc3VyZSBlbWFpbCBhbmQgcGFzc3dvcmQgYXJlIHByb3ZpZGVkXHJcbiAgICAgIGlmICghZW1haWwgfHwgIXBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRW1haWwgYW5kIHBhc3N3b3JkIGFyZSByZXF1aXJlZFwiIH0pO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KTtcclxuICBcclxuICAgICAgY29uc29sZS5sb2coXCJGZXRjaGVkIFVzZXIgZnJvbSBEQjpcIiwgdXNlcik7XHJcbiAgXHJcbiAgICAgIGlmICghdXNlcikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIkludmFsaWQgZW1haWwgb3IgcGFzc3dvcmRcIiB9KTtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICBjb25zdCBpc1Bhc3N3b3JkVmFsaWQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZCk7XHJcbiAgXHJcbiAgICAgIGNvbnNvbGUubG9nKFwiU3RvcmVkIEhhc2hlZCBQYXNzd29yZDpcIiwgdXNlci5wYXNzd29yZCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiUGFzc3dvcmQgTWF0Y2ggU3RhdHVzOlwiLCBpc1Bhc3N3b3JkVmFsaWQpO1xyXG4gIFxyXG4gICAgICBpZiAoIWlzUGFzc3dvcmRWYWxpZCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIkludmFsaWQgZW1haWwgb3IgcGFzc3dvcmRcIiB9KTtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogXCJMb2dpbiBzdWNjZXNzZnVsXCIsXHJcbiAgICAgICAgdXNlcjoge1xyXG4gICAgICAgICAgaWQ6IHVzZXIuX2lkLFxyXG4gICAgICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0TmFtZSxcclxuICAgICAgICAgIGxhc3ROYW1lOiB1c2VyLmxhc3ROYW1lLFxyXG4gICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgICByb2xlOiB1c2VyLnJvbGUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b2tlbjogZ2VuZXJhdGVUb2tlbih1c2VyKSxcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiU2lnbi1pbiBFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vU1RBRkYgVVNFUlxyXG5pbXBvcnQgeyBnZW5lcmF0ZUF1dGhUb2tlbiB9IGZyb20gXCIuLi91dGlscy9qd3RIZWxwZXIuanNcIjsgXHJcbi8vIENyZWF0ZSBTdGFmZiAoQ2FzaGllcikgLSBBZG1pbiBPbmx5XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVTdGFmZiA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBFbnN1cmUgb25seSBhZG1pbnMgY2FuIGNyZWF0ZSBzdGFmZlxyXG4gICAgaWYgKCFyZXEudXNlciB8fCByZXEudXNlci5yb2xlICE9PSBcImFkbWluXCIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6IFwiQWNjZXNzIGRlbmllZC4gQWRtaW5zIG9ubHkuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBmaXJzdE5hbWUsIGxhc3ROYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIEVuc3VyZSBhbGwgZmllbGRzIGFyZSBwcm92aWRlZFxyXG4gICAgaWYgKCFmaXJzdE5hbWUgfHwgIWxhc3ROYW1lIHx8ICFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQWxsIGZpZWxkcyBhcmUgcmVxdWlyZWRcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiB1c2VyIGFscmVhZHkgZXhpc3RzXHJcbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KTtcclxuICAgIGlmIChleGlzdGluZ1VzZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiVXNlciBhbHJlYWR5IGV4aXN0c1wiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEhhc2ggcGFzc3dvcmQgYmVmb3JlIHNhdmluZ1xyXG4gICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMCk7XHJcblxyXG4gICAgICAvLyBDcmVhdGUgc3RhZmYgdXNlclxyXG4gICAgICBjb25zdCBzdGFmZiA9IG5ldyBVc2VyKHtcclxuICAgICAgICBmaXJzdE5hbWUsXHJcbiAgICAgICAgbGFzdE5hbWUsXHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxyXG4gICAgICAgIHJvbGU6IFwic3RhZmZcIixcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCBzdGFmZi5zYXZlKCk7XHJcblxyXG4gICAgICAvLyBHZW5lcmF0ZSB0b2tlblxyXG4gICAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlQXV0aFRva2VuKHsgaWQ6IHN0YWZmLl9pZCwgcm9sZTogXCJzdGFmZlwiIH0pO1xyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xyXG4gICAgICAgIG1lc3NhZ2U6IFwiU3RhZmYgYWNjb3VudCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiLFxyXG4gICAgICAgIHVzZXI6IHtcclxuICAgICAgICAgIGlkOiBzdGFmZi5faWQsXHJcbiAgICAgICAgICBmaXJzdE5hbWUsXHJcbiAgICAgICAgICBsYXN0TmFtZSxcclxuICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgcm9sZTogXCJzdGFmZlwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdG9rZW4sXHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoaGFzaEVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJQYXNzd29yZCBIYXNoaW5nIEVycm9yOlwiLCBoYXNoRXJyb3IpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJGYWlsZWQgdG8gaGFzaCBwYXNzd29yZFwiIH0pO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiQ3JlYXRlIFN0YWZmIEVycm9yOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0pO1xyXG4gIH1cclxufTtcclxuICBcclxuLy8gUmVxdWVzdCBQYXNzd29yZCBSZXNldCAoU2VuZCBSZXNldCBUb2tlbiB2aWEgRW1haWwpXHJcbmV4cG9ydCBjb25zdCByZXF1ZXN0UGFzc3dvcmRSZXNldCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGVtYWlsIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBDaGVjayBpZiB1c2VyIGV4aXN0c1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pO1xyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIlVzZXIgbm90IGZvdW5kXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgcmVzZXQgdG9rZW5cclxuICAgIGNvbnN0IHJlc2V0VG9rZW4gPSBqd3Quc2lnbih7IGlkOiB1c2VyLl9pZCB9LCBwcm9jZXNzLmVudi5KV1RfU0VDUkVULCB7IGV4cGlyZXNJbjogXCIxNW1cIiB9KTtcclxuXHJcbiAgICAvLyBTZW5kIGVtYWlsIChTaW11bGF0ZWQgdXNpbmcgY29uc29sZS5sb2csIHJlcGxhY2Ugd2l0aCBub2RlbWFpbGVyIGZvciByZWFsIGVtYWlscylcclxuICAgIGNvbnNvbGUubG9nKGDwn5S5IFBhc3N3b3JkIFJlc2V0IFRva2VuIGZvciAke2VtYWlsfTogJHtyZXNldFRva2VufWApO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogXCJQYXNzd29yZCByZXNldCBsaW5rIHNlbnQgdG8gZW1haWxcIiwgcmVzZXRUb2tlbiB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIlBhc3N3b3JkIFJlc2V0IFJlcXVlc3QgRXJyb3I6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy9SZXNldCBQYXNzd29yZCAoVXNpbmcgVG9rZW4pXHJcbmV4cG9ydCBjb25zdCByZXNldFBhc3N3b3JkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgdG9rZW4sIG5ld1Bhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBWZXJpZnkgVG9rZW5cclxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKTtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKGRlY29kZWQuaWQpO1xyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIkludmFsaWQgb3IgZXhwaXJlZCB0b2tlblwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEhhc2ggbmV3IHBhc3N3b3JkXHJcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKG5ld1Bhc3N3b3JkLCAxMCk7XHJcbiAgICB1c2VyLnBhc3N3b3JkID0gaGFzaGVkUGFzc3dvcmQ7XHJcbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiUGFzc3dvcmQgcmVzZXQgc3VjY2Vzc2Z1bFwiIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiUGFzc3dvcmQgUmVzZXQgRXJyb3I6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCBvciBleHBpcmVkIHRva2VuXCIgfSk7XHJcbiAgfVxyXG59OyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBTUEsSUFBQUEsS0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsYUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsU0FBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsT0FBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBbUdBLElBQUFJLFVBQUEsR0FBQUosT0FBQTtBQUEwRCxTQUFBRCx1QkFBQU0sQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQTVHMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFP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","map":{"version":3,"names":["_user","_interopRequireDefault","require","_jsonwebtoken","_bcryptjs","_dotenv","_jwtHelper","e","__esModule","default","dotenv","config","generateToken","user","jwt","sign","id","_id","role","process","env","JWT_SECRET","expiresIn","signup","req","res","firstName","lastName","email","password","body","status","json","error","existingUser","User","findOne","hashedPassword","bcrypt","hash","console","log","newUser","save","message","token","exports","signin","isPasswordValid","compare","createStaff","staff","generateAuthToken","hashError","requestPasswordReset","resetToken","resetPassword","newPassword","decoded","verify","findById"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\controllers\\","sources":["authController.js"],"sourcesContent":["/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\r\n\r\nimport User from \"../models/user.js\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport dotenv from \"dotenv\";\r\n\r\ndotenv.config();\r\n\r\n// Generate JWT Token\r\nconst generateToken = (user) => {\r\n  return jwt.sign({ id: user._id, role: user.role }, process.env.JWT_SECRET, {\r\n    expiresIn: \"1d\",\r\n  });\r\n};\r\n\r\n//SIGNUP\r\nexport const signup = async (req, res) => {\r\n    try {\r\n      const { firstName, lastName, email, password, role } = req.body;\r\n  \r\n      if (!firstName || !lastName || !email || !password) {\r\n        return res.status(400).json({ error: \"All fields are required\" });\r\n      }\r\n  \r\n      const existingUser = await User.findOne({ email });\r\n      if (existingUser) {\r\n        return res.status(400).json({ error: \"User already exists\" });\r\n      }\r\n  \r\n      const hashedPassword = await bcrypt.hash(password, 12);\r\n  \r\n      console.log(\"Hashed Password Before Saving:\", hashedPassword); // Debugging\r\n  \r\n      const newUser = new User({\r\n        firstName,\r\n        lastName,\r\n        email,\r\n        password: hashedPassword, \r\n        role: role || \"user\",\r\n      });\r\n  \r\n      await newUser.save();\r\n      console.log(\"New User Created in DB:\", newUser);\r\n  \r\n      res.status(201).json({\r\n        message: \"User registered successfully\",\r\n        user: { id: newUser._id, firstName, lastName, email, role: newUser.role },\r\n        token: generateToken(newUser),\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Signup Error:\", error);\r\n      res.status(500).json({ error: \"Internal server error\" });\r\n    }\r\n  };\r\n \r\n  //SIGNIN\r\nexport const signin = async (req, res) => {\r\n    try {\r\n      const { email, password } = req.body;\r\n  \r\n      console.log(\"Entered Email:\", email);\r\n      console.log(\"Entered Password:\", password);\r\n  \r\n      // Ensure email and password are provided\r\n      if (!email || !password) {\r\n        return res.status(400).json({ error: \"Email and password are required\" });\r\n      }\r\n  \r\n      const user = await User.findOne({ email });\r\n  \r\n      console.log(\"Fetched User from DB:\", user);\r\n  \r\n      if (!user) {\r\n        return res.status(401).json({ error: \"Invalid email or password\" });\r\n      }\r\n  \r\n      const isPasswordValid = await bcrypt.compare(password, user.password);\r\n  \r\n      console.log(\"Stored Hashed Password:\", user.password);\r\n      console.log(\"Password Match Status:\", isPasswordValid);\r\n  \r\n      if (!isPasswordValid) {\r\n        return res.status(401).json({ error: \"Invalid email or password\" });\r\n      }\r\n  \r\n      res.status(200).json({\r\n        message: \"Login successful\",\r\n        user: {\r\n          id: user._id,\r\n          firstName: user.firstName,\r\n          lastName: user.lastName,\r\n          email: user.email,\r\n          role: user.role,\r\n        },\r\n        token: generateToken(user),\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Sign-in Error:\", error);\r\n      res.status(500).json({ error: \"Internal server error\" });\r\n    }\r\n  };\r\n\r\n  //STAFF USER\r\nimport { generateAuthToken } from \"../utils/jwtHelper.js\"; \r\n// Create Staff (Cashier) - Admin Only\r\nexport const createStaff = async (req, res) => {\r\n  try {\r\n    // Ensure only admins can create staff\r\n    if (!req.user || req.user.role !== \"admin\") {\r\n      return res.status(403).json({ error: \"Access denied. Admins only.\" });\r\n    }\r\n\r\n    const { firstName, lastName, email, password } = req.body;\r\n\r\n    // Ensure all fields are provided\r\n    if (!firstName || !lastName || !email || !password) {\r\n      return res.status(400).json({ error: \"All fields are required\" });\r\n    }\r\n\r\n    // Check if user already exists\r\n    const existingUser = await User.findOne({ email });\r\n    if (existingUser) {\r\n      return res.status(400).json({ error: \"User already exists\" });\r\n    }\r\n\r\n    try {\r\n      // Hash password before saving\r\n      const hashedPassword = await bcrypt.hash(password, 10);\r\n\r\n      // Create staff user\r\n      const staff = new User({\r\n        firstName,\r\n        lastName,\r\n        email,\r\n        password: hashedPassword,\r\n        role: \"staff\",\r\n      });\r\n\r\n      await staff.save();\r\n\r\n      // Generate token\r\n      const token = generateAuthToken({ id: staff._id, role: \"staff\" });\r\n\r\n      res.status(201).json({\r\n        message: \"Staff account created successfully\",\r\n        user: {\r\n          id: staff._id,\r\n          firstName,\r\n          lastName,\r\n          email,\r\n          role: \"staff\",\r\n        },\r\n        token,\r\n      });\r\n    } catch (hashError) {\r\n      console.error(\"Password Hashing Error:\", hashError);\r\n      return res.status(500).json({ error: \"Failed to hash password\" });\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Create Staff Error:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n  \r\n// Request Password Reset (Send Reset Token via Email)\r\nexport const requestPasswordReset = async (req, res) => {\r\n  try {\r\n    const { email } = req.body;\r\n\r\n    // Check if user exists\r\n    const user = await User.findOne({ email });\r\n    if (!user) {\r\n      return res.status(404).json({ error: \"User not found\" });\r\n    }\r\n\r\n    // Generate reset token\r\n    const resetToken = jwt.sign({ id: user._id }, process.env.JWT_SECRET, { expiresIn: \"15m\" });\r\n\r\n    // Send email (Simulated using console.log, replace with nodemailer for real emails)\r\n    console.log(`🔹 Password Reset Token for ${email}: ${resetToken}`);\r\n\r\n    res.status(200).json({ message: \"Password reset link sent to email\", resetToken });\r\n  } catch (error) {\r\n    console.error(\"Password Reset Request Error:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n\r\n//Reset Password (Using Token)\r\nexport const resetPassword = async (req, res) => {\r\n  try {\r\n    const { token, newPassword } = req.body;\r\n\r\n    // Verify Token\r\n    const decoded = jwt.verify(token, process.env.JWT_SECRET);\r\n    const user = await User.findById(decoded.id);\r\n    if (!user) {\r\n      return res.status(404).json({ error: \"Invalid or expired token\" });\r\n    }\r\n\r\n    // Hash new password\r\n    const hashedPassword = await bcrypt.hash(newPassword, 10);\r\n    user.password = hashedPassword;\r\n    await user.save();\r\n\r\n    res.status(200).json({ message: \"Password reset successful\" });\r\n  } catch (error) {\r\n    console.error(\"Password Reset Error:\", error);\r\n    res.status(500).json({ error: \"Invalid or expired token\" });\r\n  }\r\n};"],"mappings":"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","ignoreList":[]}},"mtime":1742644385171},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\models\\\\user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\n\nconst userSchema = new _mongoose.default.Schema({\n  firstName: {\n    type: String,\n    required: true\n  },\n  lastName: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  role: {\n    type: String,\n    enum: [\"user\", \"admin\", \"staff\"],\n    default: \"user\"\n  }\n});\n\n// Hash password before saving only if it's not already hashed\nuserSchema.pre(\"save\", async function (next) {\n  if (!this.isModified(\"password\")) return next();\n\n  // Ensure the password is not already hashed\n  if (!this.password.startsWith(\"$2b$\")) {\n    const salt = await _bcryptjs.default.genSalt(12);\n    this.password = await _bcryptjs.default.hash(this.password, salt);\n  }\n  next();\n});\n\n// Compare password correctly\nuserSchema.methods.matchPassword = async function (enteredPassword) {\n  return await _bcryptjs.default.compare(enteredPassword, this.password);\n};\nconst User = _mongoose.default.model(\"User\", userSchema);\nvar _default = exports.default = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9iY3J5cHRqcyIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInVzZXJTY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsImZpcnN0TmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsImxhc3ROYW1lIiwiZW1haWwiLCJ1bmlxdWUiLCJwYXNzd29yZCIsInJvbGUiLCJlbnVtIiwicHJlIiwibmV4dCIsImlzTW9kaWZpZWQiLCJzdGFydHNXaXRoIiwic2FsdCIsImJjcnlwdCIsImdlblNhbHQiLCJoYXNoIiwibWV0aG9kcyIsIm1hdGNoUGFzc3dvcmQiLCJlbnRlcmVkUGFzc3dvcmQiLCJjb21wYXJlIiwiVXNlciIsIm1vZGVsIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXHNlcmdlXFxiYW5rYS1hcGlcXHNyY1xcbW9kZWxzXFwiLCJzb3VyY2VzIjpbInVzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcclxuRGV2ZWxvcGVyczpcclxuLSAyMDI0OC8yMDIyICBTRVJHRSBNVU5FWkFcclxuLSAyMTkzOS8yMDIzICBORUVNQSBaQU5JTktBXHJcbiovXHJcblxyXG5pbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XHJcbmltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdGpzXCI7XHJcblxyXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgZmlyc3ROYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICBsYXN0TmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgZW1haWw6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgdW5pcXVlOiB0cnVlIH0sXHJcbiAgcGFzc3dvcmQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gIHJvbGU6IHsgdHlwZTogU3RyaW5nLCBlbnVtOiBbXCJ1c2VyXCIsIFwiYWRtaW5cIixcInN0YWZmXCJdLCBkZWZhdWx0OiBcInVzZXJcIiB9LFxyXG59KTtcclxuXHJcbi8vIEhhc2ggcGFzc3dvcmQgYmVmb3JlIHNhdmluZyBvbmx5IGlmIGl0J3Mgbm90IGFscmVhZHkgaGFzaGVkXHJcbnVzZXJTY2hlbWEucHJlKFwic2F2ZVwiLCBhc3luYyBmdW5jdGlvbiAobmV4dCkge1xyXG4gIGlmICghdGhpcy5pc01vZGlmaWVkKFwicGFzc3dvcmRcIikpIHJldHVybiBuZXh0KCk7XHJcblxyXG4gIC8vIEVuc3VyZSB0aGUgcGFzc3dvcmQgaXMgbm90IGFscmVhZHkgaGFzaGVkXHJcbiAgaWYgKCF0aGlzLnBhc3N3b3JkLnN0YXJ0c1dpdGgoXCIkMmIkXCIpKSB7XHJcbiAgICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHQoMTIpO1xyXG4gICAgdGhpcy5wYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHRoaXMucGFzc3dvcmQsIHNhbHQpO1xyXG4gIH1cclxuXHJcbiAgbmV4dCgpO1xyXG59KTtcclxuXHJcbi8vIENvbXBhcmUgcGFzc3dvcmQgY29ycmVjdGx5XHJcbnVzZXJTY2hlbWEubWV0aG9kcy5tYXRjaFBhc3N3b3JkID0gYXN5bmMgZnVuY3Rpb24gKGVudGVyZWRQYXNzd29yZCkge1xyXG4gIHJldHVybiBhd2FpdCBiY3J5cHQuY29tcGFyZShlbnRlcmVkUGFzc3dvcmQsIHRoaXMucGFzc3dvcmQpO1xyXG59O1xyXG5cclxuY29uc3QgVXNlciA9IG1vbmdvb3NlLm1vZGVsKFwiVXNlclwiLCB1c2VyU2NoZW1hKTtcclxuZXhwb3J0IGRlZmF1bHQgVXNlcjtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFNQSxJQUFBQSxTQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxTQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFBOEIsU0FBQUQsdUJBQUFHLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFQOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFLQSxNQUFNRyxVQUFVLEdBQUcsSUFBSUMsaUJBQVEsQ0FBQ0MsTUFBTSxDQUFDO0VBQ3JDQyxTQUFTLEVBQUU7SUFBRUMsSUFBSSxFQUFFQyxNQUFNO0lBQUVDLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDM0NDLFFBQVEsRUFBRTtJQUFFSCxJQUFJLEVBQUVDLE1BQU07SUFBRUMsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUMxQ0UsS0FBSyxFQUFFO0lBQUVKLElBQUksRUFBRUMsTUFBTTtJQUFFQyxRQUFRLEVBQUUsSUFBSTtJQUFFRyxNQUFNLEVBQUU7RUFBSyxDQUFDO0VBQ3JEQyxRQUFRLEVBQUU7SUFBRU4sSUFBSSxFQUFFQyxNQUFNO0lBQUVDLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDMUNLLElBQUksRUFBRTtJQUFFUCxJQUFJLEVBQUVDLE1BQU07SUFBRU8sSUFBSSxFQUFFLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBQyxPQUFPLENBQUM7SUFBRWIsT0FBTyxFQUFFO0VBQU87QUFDekUsQ0FBQyxDQUFDOztBQUVGO0FBQ0FDLFVBQVUsQ0FBQ2EsR0FBRyxDQUFDLE1BQU0sRUFBRSxnQkFBZ0JDLElBQUksRUFBRTtFQUMzQyxJQUFJLENBQUMsSUFBSSxDQUFDQyxVQUFVLENBQUMsVUFBVSxDQUFDLEVBQUUsT0FBT0QsSUFBSSxDQUFDLENBQUM7O0VBRS9DO0VBQ0EsSUFBSSxDQUFDLElBQUksQ0FBQ0osUUFBUSxDQUFDTSxVQUFVLENBQUMsTUFBTSxDQUFDLEVBQUU7SUFDckMsTUFBTUMsSUFBSSxHQUFHLE1BQU1DLGlCQUFNLENBQUNDLE9BQU8sQ0FBQyxFQUFFLENBQUM7SUFDckMsSUFBSSxDQUFDVCxRQUFRLEdBQUcsTUFBTVEsaUJBQU0sQ0FBQ0UsSUFBSSxDQUFDLElBQUksQ0FBQ1YsUUFBUSxFQUFFTyxJQUFJLENBQUM7RUFDeEQ7RUFFQUgsSUFBSSxDQUFDLENBQUM7QUFDUixDQUFDLENBQUM7O0FBRUY7QUFDQWQsVUFBVSxDQUFDcUIsT0FBTyxDQUFDQyxhQUFhLEdBQUcsZ0JBQWdCQyxlQUFlLEVBQUU7RUFDbEUsT0FBTyxNQUFNTCxpQkFBTSxDQUFDTSxPQUFPLENBQUNELGVBQWUsRUFBRSxJQUFJLENBQUNiLFFBQVEsQ0FBQztBQUM3RCxDQUFDO0FBRUQsTUFBTWUsSUFBSSxHQUFHeEIsaUJBQVEsQ0FBQ3lCLEtBQUssQ0FBQyxNQUFNLEVBQUUxQixVQUFVLENBQUM7QUFBQyxJQUFBMkIsUUFBQSxHQUFBQyxPQUFBLENBQUE3QixPQUFBLEdBQ2pDMEIsSUFBSSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_bcryptjs","e","__esModule","default","userSchema","mongoose","Schema","firstName","type","String","required","lastName","email","unique","password","role","enum","pre","next","isModified","startsWith","salt","bcrypt","genSalt","hash","methods","matchPassword","enteredPassword","compare","User","model","_default","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\models\\","sources":["user.js"],"sourcesContent":["/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\r\n\r\nimport mongoose from \"mongoose\";\r\nimport bcrypt from \"bcryptjs\";\r\n\r\nconst userSchema = new mongoose.Schema({\r\n  firstName: { type: String, required: true },\r\n  lastName: { type: String, required: true },\r\n  email: { type: String, required: true, unique: true },\r\n  password: { type: String, required: true },\r\n  role: { type: String, enum: [\"user\", \"admin\",\"staff\"], default: \"user\" },\r\n});\r\n\r\n// Hash password before saving only if it's not already hashed\r\nuserSchema.pre(\"save\", async function (next) {\r\n  if (!this.isModified(\"password\")) return next();\r\n\r\n  // Ensure the password is not already hashed\r\n  if (!this.password.startsWith(\"$2b$\")) {\r\n    const salt = await bcrypt.genSalt(12);\r\n    this.password = await bcrypt.hash(this.password, salt);\r\n  }\r\n\r\n  next();\r\n});\r\n\r\n// Compare password correctly\r\nuserSchema.methods.matchPassword = async function (enteredPassword) {\r\n  return await bcrypt.compare(enteredPassword, this.password);\r\n};\r\n\r\nconst User = mongoose.model(\"User\", userSchema);\r\nexport default User;\r\n"],"mappings":";;;;;;AAMA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,SAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA8B,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAP9B;AACA;AACA;AACA;AACA;;AAKA,MAAMG,UAAU,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACrCC,SAAS,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC3CC,QAAQ,EAAE;IAAEH,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC1CE,KAAK,EAAE;IAAEJ,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE,IAAI;IAAEG,MAAM,EAAE;EAAK,CAAC;EACrDC,QAAQ,EAAE;IAAEN,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC1CK,IAAI,EAAE;IAAEP,IAAI,EAAEC,MAAM;IAAEO,IAAI,EAAE,CAAC,MAAM,EAAE,OAAO,EAAC,OAAO,CAAC;IAAEb,OAAO,EAAE;EAAO;AACzE,CAAC,CAAC;;AAEF;AACAC,UAAU,CAACa,GAAG,CAAC,MAAM,EAAE,gBAAgBC,IAAI,EAAE;EAC3C,IAAI,CAAC,IAAI,CAACC,UAAU,CAAC,UAAU,CAAC,EAAE,OAAOD,IAAI,CAAC,CAAC;;EAE/C;EACA,IAAI,CAAC,IAAI,CAACJ,QAAQ,CAACM,UAAU,CAAC,MAAM,CAAC,EAAE;IACrC,MAAMC,IAAI,GAAG,MAAMC,iBAAM,CAACC,OAAO,CAAC,EAAE,CAAC;IACrC,IAAI,CAACT,QAAQ,GAAG,MAAMQ,iBAAM,CAACE,IAAI,CAAC,IAAI,CAACV,QAAQ,EAAEO,IAAI,CAAC;EACxD;EAEAH,IAAI,CAAC,CAAC;AACR,CAAC,CAAC;;AAEF;AACAd,UAAU,CAACqB,OAAO,CAACC,aAAa,GAAG,gBAAgBC,eAAe,EAAE;EAClE,OAAO,MAAML,iBAAM,CAACM,OAAO,CAACD,eAAe,EAAE,IAAI,CAACb,QAAQ,CAAC;AAC7D,CAAC;AAED,MAAMe,IAAI,GAAGxB,iBAAQ,CAACyB,KAAK,CAAC,MAAM,EAAE1B,UAAU,CAAC;AAAC,IAAA2B,QAAA,GAAAC,OAAA,CAAA7B,OAAA,GACjC0B,IAAI","ignoreList":[]}},"mtime":1742644747349},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _database = _interopRequireDefault(require(\"./config/database.js\"));\nvar _authRoutes = _interopRequireDefault(require(\"./routes/authRoutes.js\"));\nvar _accountRoutes = _interopRequireDefault(require(\"./routes/accountRoutes.js\"));\nvar _transactionRoutes = _interopRequireDefault(require(\"./routes/transactionRoutes.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\n\n_dotenv.default.config();\n(0, _database.default)();\nconst app = (0, _express.default)();\napp.use(_express.default.json());\napp.use(\"/api/v1/auth\", _authRoutes.default);\napp.use(\"/api/v1/accounts\", _accountRoutes.default);\napp.use(\"/api/v1/transactions\", _transactionRoutes.default);\nvar _default = exports.default = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2RvdGVudiIsIl9kYXRhYmFzZSIsIl9hdXRoUm91dGVzIiwiX2FjY291bnRSb3V0ZXMiLCJfdHJhbnNhY3Rpb25Sb3V0ZXMiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJkb3RlbnYiLCJjb25maWciLCJjb25uZWN0REIiLCJhcHAiLCJleHByZXNzIiwidXNlIiwianNvbiIsImF1dGhSb3V0ZXMiLCJhY2NvdW50Um91dGVzIiwidHJhbnNhY3Rpb25Sb3V0ZXMiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcc2VyZ2VcXGJhbmthLWFwaVxcc3JjXFwiLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG5EZXZlbG9wZXJzOlxyXG4tIDIwMjQ4LzIwMjIgIFNFUkdFIE1VTkVaQVxyXG4tIDIxOTM5LzIwMjMgIE5FRU1BIFpBTklOS0FcclxuKi9cclxuXHJcbmltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xyXG5pbXBvcnQgY29ubmVjdERCIGZyb20gXCIuL2NvbmZpZy9kYXRhYmFzZS5qc1wiO1xyXG5pbXBvcnQgYXV0aFJvdXRlcyBmcm9tIFwiLi9yb3V0ZXMvYXV0aFJvdXRlcy5qc1wiO1xyXG5pbXBvcnQgYWNjb3VudFJvdXRlcyBmcm9tIFwiLi9yb3V0ZXMvYWNjb3VudFJvdXRlcy5qc1wiO1xyXG5pbXBvcnQgdHJhbnNhY3Rpb25Sb3V0ZXMgZnJvbSBcIi4vcm91dGVzL3RyYW5zYWN0aW9uUm91dGVzLmpzXCI7XHJcblxyXG5kb3RlbnYuY29uZmlnKCk7XHJcbmNvbm5lY3REQigpO1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcclxuXHJcbmFwcC51c2UoXCIvYXBpL3YxL2F1dGhcIiwgYXV0aFJvdXRlcyk7XHJcbmFwcC51c2UoXCIvYXBpL3YxL2FjY291bnRzXCIsIGFjY291bnRSb3V0ZXMpO1xyXG5hcHAudXNlKFwiL2FwaS92MS90cmFuc2FjdGlvbnNcIiwgdHJhbnNhY3Rpb25Sb3V0ZXMpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXBwO1xyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFNQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxTQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxXQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxjQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSyxrQkFBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBQThELFNBQUFELHVCQUFBTyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBWDlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBU0FHLGVBQU0sQ0FBQ0MsTUFBTSxDQUFDLENBQUM7QUFDZixJQUFBQyxpQkFBUyxFQUFDLENBQUM7QUFFWCxNQUFNQyxHQUFHLEdBQUcsSUFBQUMsZ0JBQU8sRUFBQyxDQUFDO0FBQ3JCRCxHQUFHLENBQUNFLEdBQUcsQ0FBQ0QsZ0JBQU8sQ0FBQ0UsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUV2QkgsR0FBRyxDQUFDRSxHQUFHLENBQUMsY0FBYyxFQUFFRSxtQkFBVSxDQUFDO0FBQ25DSixHQUFHLENBQUNFLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRUcsc0JBQWEsQ0FBQztBQUMxQ0wsR0FBRyxDQUFDRSxHQUFHLENBQUMsc0JBQXNCLEVBQUVJLDBCQUFpQixDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFaLE9BQUEsR0FFcENJLEdBQUciLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","_dotenv","_database","_authRoutes","_accountRoutes","_transactionRoutes","e","__esModule","default","dotenv","config","connectDB","app","express","use","json","authRoutes","accountRoutes","transactionRoutes","_default","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\","sources":["app.js"],"sourcesContent":["/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\r\n\r\nimport express from \"express\";\r\nimport dotenv from \"dotenv\";\r\nimport connectDB from \"./config/database.js\";\r\nimport authRoutes from \"./routes/authRoutes.js\";\r\nimport accountRoutes from \"./routes/accountRoutes.js\";\r\nimport transactionRoutes from \"./routes/transactionRoutes.js\";\r\n\r\ndotenv.config();\r\nconnectDB();\r\n\r\nconst app = express();\r\napp.use(express.json());\r\n\r\napp.use(\"/api/v1/auth\", authRoutes);\r\napp.use(\"/api/v1/accounts\", accountRoutes);\r\napp.use(\"/api/v1/transactions\", transactionRoutes);\r\n\r\nexport default app;\r\n\r\n"],"mappings":";;;;;;AAMA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,SAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,WAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,cAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,kBAAA,GAAAN,sBAAA,CAAAC,OAAA;AAA8D,SAAAD,uBAAAO,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAX9D;AACA;AACA;AACA;AACA;;AASAG,eAAM,CAACC,MAAM,CAAC,CAAC;AACf,IAAAC,iBAAS,EAAC,CAAC;AAEX,MAAMC,GAAG,GAAG,IAAAC,gBAAO,EAAC,CAAC;AACrBD,GAAG,CAACE,GAAG,CAACD,gBAAO,CAACE,IAAI,CAAC,CAAC,CAAC;AAEvBH,GAAG,CAACE,GAAG,CAAC,cAAc,EAAEE,mBAAU,CAAC;AACnCJ,GAAG,CAACE,GAAG,CAAC,kBAAkB,EAAEG,sBAAa,CAAC;AAC1CL,GAAG,CAACE,GAAG,CAAC,sBAAsB,EAAEI,0BAAiB,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAZ,OAAA,GAEpCI,GAAG","ignoreList":[]}},"mtime":1742645177336},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\config\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\config\\\\database.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n_dotenv.default.config(); // ✅ Load environment variables\n\nconst connectDB = async () => {\n  try {\n    const mongoURI = process.env.MONGO_URI; // ✅ Ensure MONGO_URI is loaded\n    if (!mongoURI) {\n      throw new Error(\"MONGO_URI is missing in environment variables\");\n    }\n    await _mongoose.default.connect(mongoURI);\n    console.log(\"✅ MongoDB Connected...\");\n  } catch (error) {\n    console.error(\"❌ MongoDB Connection Failed:\", error.message);\n    process.exit(1);\n  }\n};\nvar _default = exports.default = connectDB;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9kb3RlbnYiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJkb3RlbnYiLCJjb25maWciLCJjb25uZWN0REIiLCJtb25nb1VSSSIsInByb2Nlc3MiLCJlbnYiLCJNT05HT19VUkkiLCJFcnJvciIsIm1vbmdvb3NlIiwiY29ubmVjdCIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsIm1lc3NhZ2UiLCJleGl0IiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXHNlcmdlXFxiYW5rYS1hcGlcXHNyY1xcY29uZmlnXFwiLCJzb3VyY2VzIjpbImRhdGFiYXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcclxuaW1wb3J0IGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XHJcblxyXG5kb3RlbnYuY29uZmlnKCk7IC8vIOKchSBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlc1xyXG5cclxuY29uc3QgY29ubmVjdERCID0gYXN5bmMgKCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBtb25nb1VSSSA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSSTsgLy8g4pyFIEVuc3VyZSBNT05HT19VUkkgaXMgbG9hZGVkXHJcbiAgICBpZiAoIW1vbmdvVVJJKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk1PTkdPX1VSSSBpcyBtaXNzaW5nIGluIGVudmlyb25tZW50IHZhcmlhYmxlc1wiKTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KG1vbmdvVVJJKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIuKchSBNb25nb0RCIENvbm5lY3RlZC4uLlwiKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBNb25nb0RCIENvbm5lY3Rpb24gRmFpbGVkOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHByb2Nlc3MuZXhpdCgxKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0REI7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQTRCLFNBQUFELHVCQUFBRyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBRTVCRyxlQUFNLENBQUNDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQzs7QUFFakIsTUFBTUMsU0FBUyxHQUFHLE1BQUFBLENBQUEsS0FBWTtFQUM1QixJQUFJO0lBQ0YsTUFBTUMsUUFBUSxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsU0FBUyxDQUFDLENBQUM7SUFDeEMsSUFBSSxDQUFDSCxRQUFRLEVBQUU7TUFDYixNQUFNLElBQUlJLEtBQUssQ0FBQywrQ0FBK0MsQ0FBQztJQUNsRTtJQUVBLE1BQU1DLGlCQUFRLENBQUNDLE9BQU8sQ0FBQ04sUUFBUSxDQUFDO0lBRWhDTyxPQUFPLENBQUNDLEdBQUcsQ0FBQyx3QkFBd0IsQ0FBQztFQUN2QyxDQUFDLENBQUMsT0FBT0MsS0FBSyxFQUFFO0lBQ2RGLE9BQU8sQ0FBQ0UsS0FBSyxDQUFDLDhCQUE4QixFQUFFQSxLQUFLLENBQUNDLE9BQU8sQ0FBQztJQUM1RFQsT0FBTyxDQUFDVSxJQUFJLENBQUMsQ0FBQyxDQUFDO0VBQ2pCO0FBQ0YsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FBQUMsT0FBQSxDQUFBakIsT0FBQSxHQUVhRyxTQUFTIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_dotenv","e","__esModule","default","dotenv","config","connectDB","mongoURI","process","env","MONGO_URI","Error","mongoose","connect","console","log","error","message","exit","_default","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\config\\","sources":["database.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\nimport dotenv from \"dotenv\";\r\n\r\ndotenv.config(); // ✅ Load environment variables\r\n\r\nconst connectDB = async () => {\r\n  try {\r\n    const mongoURI = process.env.MONGO_URI; // ✅ Ensure MONGO_URI is loaded\r\n    if (!mongoURI) {\r\n      throw new Error(\"MONGO_URI is missing in environment variables\");\r\n    }\r\n\r\n    await mongoose.connect(mongoURI);\r\n\r\n    console.log(\"✅ MongoDB Connected...\");\r\n  } catch (error) {\r\n    console.error(\"❌ MongoDB Connection Failed:\", error.message);\r\n    process.exit(1);\r\n  }\r\n};\r\n\r\nexport default connectDB;\r\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA4B,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE5BG,eAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;;AAEjB,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;EAC5B,IAAI;IACF,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,SAAS,CAAC,CAAC;IACxC,IAAI,CAACH,QAAQ,EAAE;MACb,MAAM,IAAII,KAAK,CAAC,+CAA+C,CAAC;IAClE;IAEA,MAAMC,iBAAQ,CAACC,OAAO,CAACN,QAAQ,CAAC;IAEhCO,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;EACvC,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdF,OAAO,CAACE,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAACC,OAAO,CAAC;IAC5DT,OAAO,CAACU,IAAI,CAAC,CAAC,CAAC;EACjB;AACF,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAjB,OAAA,GAEaG,SAAS","ignoreList":[]}},"mtime":1742455813723},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\routes\\\\authRoutes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\n/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\n\nconst express = require(\"express\");\nconst {\n  signup,\n  signin,\n  createStaff,\n  requestPasswordReset,\n  resetPassword\n} = require(\"../controllers/authController\");\nconst {\n  verifyToken,\n  isAdmin\n} = require(\"../middleware/authMiddleware\");\nconst router = express.Router();\nrouter.post(\"/signup\", signup);\nrouter.post(\"/signin\", signin);\nrouter.post(\"/signup-staff\", verifyToken, isAdmin, createStaff);\nrouter.post(\"/password-reset/request\", requestPasswordReset);\nrouter.post(\"/password-reset/reset\", resetPassword);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInNpZ251cCIsInNpZ25pbiIsImNyZWF0ZVN0YWZmIiwicmVxdWVzdFBhc3N3b3JkUmVzZXQiLCJyZXNldFBhc3N3b3JkIiwidmVyaWZ5VG9rZW4iLCJpc0FkbWluIiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcc2VyZ2VcXGJhbmthLWFwaVxcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsiYXV0aFJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG5EZXZlbG9wZXJzOlxyXG4tIDIwMjQ4LzIwMjIgIFNFUkdFIE1VTkVaQVxyXG4tIDIxOTM5LzIwMjMgIE5FRU1BIFpBTklOS0FcclxuKi9cclxuXHJcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTtcclxuY29uc3QgeyBzaWdudXAsIHNpZ25pbiwgY3JlYXRlU3RhZmYscmVxdWVzdFBhc3N3b3JkUmVzZXQsIHJlc2V0UGFzc3dvcmQgfSA9IHJlcXVpcmUoXCIuLi9jb250cm9sbGVycy9hdXRoQ29udHJvbGxlclwiKTtcclxuY29uc3QgeyB2ZXJpZnlUb2tlbiwgaXNBZG1pbiB9ID0gcmVxdWlyZShcIi4uL21pZGRsZXdhcmUvYXV0aE1pZGRsZXdhcmVcIik7XHJcblxyXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxucm91dGVyLnBvc3QoXCIvc2lnbnVwXCIsIHNpZ251cCk7XHJcbnJvdXRlci5wb3N0KFwiL3NpZ25pblwiLCBzaWduaW4pO1xyXG5yb3V0ZXIucG9zdChcIi9zaWdudXAtc3RhZmZcIiwgdmVyaWZ5VG9rZW4sIGlzQWRtaW4sIGNyZWF0ZVN0YWZmKTtcclxucm91dGVyLnBvc3QoXCIvcGFzc3dvcmQtcmVzZXQvcmVxdWVzdFwiLCByZXF1ZXN0UGFzc3dvcmRSZXNldCk7XHJcbnJvdXRlci5wb3N0KFwiL3Bhc3N3b3JkLXJlc2V0L3Jlc2V0XCIsIHJlc2V0UGFzc3dvcmQpOyBcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyBcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU07RUFBRUMsTUFBTTtFQUFFQyxNQUFNO0VBQUVDLFdBQVc7RUFBQ0Msb0JBQW9CO0VBQUVDO0FBQWMsQ0FBQyxHQUFHTCxPQUFPLENBQUMsK0JBQStCLENBQUM7QUFDcEgsTUFBTTtFQUFFTSxXQUFXO0VBQUVDO0FBQVEsQ0FBQyxHQUFHUCxPQUFPLENBQUMsOEJBQThCLENBQUM7QUFFeEUsTUFBTVEsTUFBTSxHQUFHVCxPQUFPLENBQUNVLE1BQU0sQ0FBQyxDQUFDO0FBRS9CRCxNQUFNLENBQUNFLElBQUksQ0FBQyxTQUFTLEVBQUVULE1BQU0sQ0FBQztBQUM5Qk8sTUFBTSxDQUFDRSxJQUFJLENBQUMsU0FBUyxFQUFFUixNQUFNLENBQUM7QUFDOUJNLE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLGVBQWUsRUFBRUosV0FBVyxFQUFFQyxPQUFPLEVBQUVKLFdBQVcsQ0FBQztBQUMvREssTUFBTSxDQUFDRSxJQUFJLENBQUMseUJBQXlCLEVBQUVOLG9CQUFvQixDQUFDO0FBQzVESSxNQUFNLENBQUNFLElBQUksQ0FBQyx1QkFBdUIsRUFBRUwsYUFBYSxDQUFDO0FBRW5ETSxNQUFNLENBQUNDLE9BQU8sR0FBR0osTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","signup","signin","createStaff","requestPasswordReset","resetPassword","verifyToken","isAdmin","router","Router","post","module","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\routes\\","sources":["authRoutes.js"],"sourcesContent":["/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\r\n\r\nconst express = require(\"express\");\r\nconst { signup, signin, createStaff,requestPasswordReset, resetPassword } = require(\"../controllers/authController\");\r\nconst { verifyToken, isAdmin } = require(\"../middleware/authMiddleware\");\r\n\r\nconst router = express.Router();\r\n\r\nrouter.post(\"/signup\", signup);\r\nrouter.post(\"/signin\", signin);\r\nrouter.post(\"/signup-staff\", verifyToken, isAdmin, createStaff);\r\nrouter.post(\"/password-reset/request\", requestPasswordReset);\r\nrouter.post(\"/password-reset/reset\", resetPassword); \r\n\r\nmodule.exports = router; \r\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC,MAAM;EAAEC,MAAM;EAAEC,WAAW;EAACC,oBAAoB;EAAEC;AAAc,CAAC,GAAGL,OAAO,CAAC,+BAA+B,CAAC;AACpH,MAAM;EAAEM,WAAW;EAAEC;AAAQ,CAAC,GAAGP,OAAO,CAAC,8BAA8B,CAAC;AAExE,MAAMQ,MAAM,GAAGT,OAAO,CAACU,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,SAAS,EAAET,MAAM,CAAC;AAC9BO,MAAM,CAACE,IAAI,CAAC,SAAS,EAAER,MAAM,CAAC;AAC9BM,MAAM,CAACE,IAAI,CAAC,eAAe,EAAEJ,WAAW,EAAEC,OAAO,EAAEJ,WAAW,CAAC;AAC/DK,MAAM,CAACE,IAAI,CAAC,yBAAyB,EAAEN,oBAAoB,CAAC;AAC5DI,MAAM,CAACE,IAAI,CAAC,uBAAuB,EAAEL,aAAa,CAAC;AAEnDM,MAAM,CAACC,OAAO,GAAGJ,MAAM","ignoreList":[]}},"mtime":1742644783638},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\controllers\\\\authController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.signup = exports.signin = exports.resetPassword = exports.requestPasswordReset = exports.createStaff = void 0;\nvar _user = _interopRequireDefault(require(\"../models/user.js\"));\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _jwtHelper = require(\"../utils/jwtHelper.js\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n_dotenv.default.config();\n\n// ✅ Generate JWT Token\nconst generateToken = user => {\n  return _jsonwebtoken.default.sign({\n    id: user._id,\n    role: user.role\n  }, process.env.JWT_SECRET, {\n    expiresIn: \"1d\"\n  });\n};\n\n//SIGNUP\nconst signup = async (req, res) => {\n  try {\n    const {\n      firstName,\n      lastName,\n      email,\n      password,\n      role\n    } = req.body;\n    if (!firstName || !lastName || !email || !password) {\n      return res.status(400).json({\n        error: \"All fields are required\"\n      });\n    }\n    const existingUser = await _user.default.findOne({\n      email\n    });\n    if (existingUser) {\n      return res.status(400).json({\n        error: \"User already exists\"\n      });\n    }\n    const hashedPassword = await _bcryptjs.default.hash(password, 12);\n    console.log(\"✅ Hashed Password Before Saving:\", hashedPassword); // 🔍 Debugging\n\n    const newUser = new _user.default({\n      firstName,\n      lastName,\n      email,\n      password: hashedPassword,\n      // ✅ Ensure hashed password is stored\n      role: role || \"user\"\n    });\n    await newUser.save();\n    console.log(\"✅ New User Created in DB:\", newUser);\n    res.status(201).json({\n      message: \"User registered successfully\",\n      user: {\n        id: newUser._id,\n        firstName,\n        lastName,\n        email,\n        role: newUser.role\n      },\n      token: generateToken(newUser)\n    });\n  } catch (error) {\n    console.error(\"❌ Signup Error:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n//SIGNIN\nexports.signup = signup;\nconst signin = async (req, res) => {\n  try {\n    const {\n      email,\n      password\n    } = req.body;\n    console.log(\"🔍 Entered Email:\", email);\n    console.log(\"🔍 Entered Password:\", password);\n\n    // ✅ Ensure email and password are provided\n    if (!email || !password) {\n      return res.status(400).json({\n        error: \"Email and password are required\"\n      });\n    }\n    const user = await _user.default.findOne({\n      email\n    });\n    console.log(\"🔍 Fetched User from DB:\", user);\n    if (!user) {\n      return res.status(401).json({\n        error: \"Invalid email or password\"\n      });\n    }\n    const isPasswordValid = await _bcryptjs.default.compare(password, user.password);\n    console.log(\"🔍 Stored Hashed Password:\", user.password);\n    console.log(\"🔍 Password Match Status:\", isPasswordValid);\n    if (!isPasswordValid) {\n      return res.status(401).json({\n        error: \"Invalid email or password\"\n      });\n    }\n    res.status(200).json({\n      message: \"Login successful\",\n      user: {\n        id: user._id,\n        firstName: user.firstName,\n        lastName: user.lastName,\n        email: user.email,\n        role: user.role\n      },\n      token: generateToken(user)\n    });\n  } catch (error) {\n    console.error(\"❌ Sign-in Error:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n//STAFF USER\nexports.signin = signin;\n// ✅ Create Staff (Cashier) - Admin Only\nconst createStaff = async (req, res) => {\n  try {\n    // ✅ Ensure only admins can create staff\n    if (!req.user || req.user.role !== \"admin\") {\n      return res.status(403).json({\n        error: \"Access denied. Admins only.\"\n      });\n    }\n    const {\n      firstName,\n      lastName,\n      email,\n      password\n    } = req.body;\n\n    // ✅ Ensure all fields are provided\n    if (!firstName || !lastName || !email || !password) {\n      return res.status(400).json({\n        error: \"All fields are required\"\n      });\n    }\n\n    // ✅ Check if user already exists\n    const existingUser = await _user.default.findOne({\n      email\n    });\n    if (existingUser) {\n      return res.status(400).json({\n        error: \"User already exists\"\n      });\n    }\n    try {\n      // ✅ Hash password before saving\n      const hashedPassword = await _bcryptjs.default.hash(password, 10);\n\n      // ✅ Create staff user\n      const staff = new _user.default({\n        firstName,\n        lastName,\n        email,\n        password: hashedPassword,\n        role: \"staff\"\n      });\n      await staff.save();\n\n      // ✅ Generate token\n      const token = (0, _jwtHelper.generateAuthToken)({\n        id: staff._id,\n        role: \"staff\"\n      });\n      res.status(201).json({\n        message: \"Staff account created successfully\",\n        user: {\n          id: staff._id,\n          firstName,\n          lastName,\n          email,\n          role: \"staff\"\n        },\n        token\n      });\n    } catch (hashError) {\n      console.error(\"❌ Password Hashing Error:\", hashError);\n      return res.status(500).json({\n        error: \"Failed to hash password\"\n      });\n    }\n  } catch (error) {\n    console.error(\"❌ Create Staff Error:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n// ✅ Request Password Reset (Send Reset Token via Email)\nexports.createStaff = createStaff;\nconst requestPasswordReset = async (req, res) => {\n  try {\n    const {\n      email\n    } = req.body;\n\n    // ✅ Check if user exists\n    const user = await _user.default.findOne({\n      email\n    });\n    if (!user) {\n      return res.status(404).json({\n        error: \"User not found\"\n      });\n    }\n\n    // ✅ Generate reset token\n    const resetToken = _jsonwebtoken.default.sign({\n      id: user._id\n    }, process.env.JWT_SECRET, {\n      expiresIn: \"15m\"\n    });\n\n    // ✅ Send email (Simulated using console.log, replace with nodemailer for real emails)\n    console.log(`🔹 Password Reset Token for ${email}: ${resetToken}`);\n    res.status(200).json({\n      message: \"Password reset link sent to email\",\n      resetToken\n    });\n  } catch (error) {\n    console.error(\"❌ Password Reset Request Error:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n// ✅ Reset Password (Using Token)\nexports.requestPasswordReset = requestPasswordReset;\nconst resetPassword = async (req, res) => {\n  try {\n    const {\n      token,\n      newPassword\n    } = req.body;\n\n    // ✅ Verify Token\n    const decoded = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET);\n    const user = await _user.default.findById(decoded.id);\n    if (!user) {\n      return res.status(404).json({\n        error: \"Invalid or expired token\"\n      });\n    }\n\n    // ✅ Hash new password\n    const hashedPassword = await _bcryptjs.default.hash(newPassword, 10);\n    user.password = hashedPassword;\n    await user.save();\n    res.status(200).json({\n      message: \"Password reset successful\"\n    });\n  } catch (error) {\n    console.error(\"❌ Password Reset Error:\", error);\n    res.status(500).json({\n      error: \"Invalid or expired token\"\n    });\n  }\n};\nexports.resetPassword = resetPassword;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdXNlciIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2pzb253ZWJ0b2tlbiIsIl9iY3J5cHRqcyIsIl9kb3RlbnYiLCJfand0SGVscGVyIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiZG90ZW52IiwiY29uZmlnIiwiZ2VuZXJhdGVUb2tlbiIsInVzZXIiLCJqd3QiLCJzaWduIiwiaWQiLCJfaWQiLCJyb2xlIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJzaWdudXAiLCJyZXEiLCJyZXMiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiZXhpc3RpbmdVc2VyIiwiVXNlciIsImZpbmRPbmUiLCJoYXNoZWRQYXNzd29yZCIsImJjcnlwdCIsImhhc2giLCJjb25zb2xlIiwibG9nIiwibmV3VXNlciIsInNhdmUiLCJtZXNzYWdlIiwidG9rZW4iLCJleHBvcnRzIiwic2lnbmluIiwiaXNQYXNzd29yZFZhbGlkIiwiY29tcGFyZSIsImNyZWF0ZVN0YWZmIiwic3RhZmYiLCJnZW5lcmF0ZUF1dGhUb2tlbiIsImhhc2hFcnJvciIsInJlcXVlc3RQYXNzd29yZFJlc2V0IiwicmVzZXRUb2tlbiIsInJlc2V0UGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsImRlY29kZWQiLCJ2ZXJpZnkiLCJmaW5kQnlJZCJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxzZXJnZVxcYmFua2EtYXBpXFxzcmNcXGNvbnRyb2xsZXJzXFwiLCJzb3VyY2VzIjpbImF1dGhDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBVc2VyIGZyb20gXCIuLi9tb2RlbHMvdXNlci5qc1wiO1xyXG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcclxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIjtcclxuaW1wb3J0IGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XHJcblxyXG5kb3RlbnYuY29uZmlnKCk7XHJcblxyXG4vLyDinIUgR2VuZXJhdGUgSldUIFRva2VuXHJcbmNvbnN0IGdlbmVyYXRlVG9rZW4gPSAodXNlcikgPT4ge1xyXG4gIHJldHVybiBqd3Quc2lnbih7IGlkOiB1c2VyLl9pZCwgcm9sZTogdXNlci5yb2xlIH0sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQsIHtcclxuICAgIGV4cGlyZXNJbjogXCIxZFwiLFxyXG4gIH0pO1xyXG59O1xyXG5cclxuLy9TSUdOVVBcclxuZXhwb3J0IGNvbnN0IHNpZ251cCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBmaXJzdE5hbWUsIGxhc3ROYW1lLCBlbWFpbCwgcGFzc3dvcmQsIHJvbGUgfSA9IHJlcS5ib2R5O1xyXG4gIFxyXG4gICAgICBpZiAoIWZpcnN0TmFtZSB8fCAhbGFzdE5hbWUgfHwgIWVtYWlsIHx8ICFwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkFsbCBmaWVsZHMgYXJlIHJlcXVpcmVkXCIgfSk7XHJcbiAgICAgIH1cclxuICBcclxuICAgICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgZW1haWwgfSk7XHJcbiAgICAgIGlmIChleGlzdGluZ1VzZXIpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJVc2VyIGFscmVhZHkgZXhpc3RzXCIgfSk7XHJcbiAgICAgIH1cclxuICBcclxuICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTIpO1xyXG4gIFxyXG4gICAgICBjb25zb2xlLmxvZyhcIuKchSBIYXNoZWQgUGFzc3dvcmQgQmVmb3JlIFNhdmluZzpcIiwgaGFzaGVkUGFzc3dvcmQpOyAvLyDwn5SNIERlYnVnZ2luZ1xyXG4gIFxyXG4gICAgICBjb25zdCBuZXdVc2VyID0gbmV3IFVzZXIoe1xyXG4gICAgICAgIGZpcnN0TmFtZSxcclxuICAgICAgICBsYXN0TmFtZSxcclxuICAgICAgICBlbWFpbCxcclxuICAgICAgICBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsIC8vIOKchSBFbnN1cmUgaGFzaGVkIHBhc3N3b3JkIGlzIHN0b3JlZFxyXG4gICAgICAgIHJvbGU6IHJvbGUgfHwgXCJ1c2VyXCIsXHJcbiAgICAgIH0pO1xyXG4gIFxyXG4gICAgICBhd2FpdCBuZXdVc2VyLnNhdmUoKTtcclxuICAgICAgY29uc29sZS5sb2coXCLinIUgTmV3IFVzZXIgQ3JlYXRlZCBpbiBEQjpcIiwgbmV3VXNlcik7XHJcbiAgXHJcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiBcIlVzZXIgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHlcIixcclxuICAgICAgICB1c2VyOiB7IGlkOiBuZXdVc2VyLl9pZCwgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwsIHJvbGU6IG5ld1VzZXIucm9sZSB9LFxyXG4gICAgICAgIHRva2VuOiBnZW5lcmF0ZVRva2VuKG5ld1VzZXIpLFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgU2lnbnVwIEVycm9yOlwiLCBlcnJvcik7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuIFxyXG4gIC8vU0lHTklOXHJcbmV4cG9ydCBjb25zdCBzaWduaW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuICBcclxuICAgICAgY29uc29sZS5sb2coXCLwn5SNIEVudGVyZWQgRW1haWw6XCIsIGVtYWlsKTtcclxuICAgICAgY29uc29sZS5sb2coXCLwn5SNIEVudGVyZWQgUGFzc3dvcmQ6XCIsIHBhc3N3b3JkKTtcclxuICBcclxuICAgICAgLy8g4pyFIEVuc3VyZSBlbWFpbCBhbmQgcGFzc3dvcmQgYXJlIHByb3ZpZGVkXHJcbiAgICAgIGlmICghZW1haWwgfHwgIXBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRW1haWwgYW5kIHBhc3N3b3JkIGFyZSByZXF1aXJlZFwiIH0pO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KTtcclxuICBcclxuICAgICAgY29uc29sZS5sb2coXCLwn5SNIEZldGNoZWQgVXNlciBmcm9tIERCOlwiLCB1c2VyKTtcclxuICBcclxuICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZFwiIH0pO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIGNvbnN0IGlzUGFzc3dvcmRWYWxpZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcclxuICBcclxuICAgICAgY29uc29sZS5sb2coXCLwn5SNIFN0b3JlZCBIYXNoZWQgUGFzc3dvcmQ6XCIsIHVzZXIucGFzc3dvcmQpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIvCflI0gUGFzc3dvcmQgTWF0Y2ggU3RhdHVzOlwiLCBpc1Bhc3N3b3JkVmFsaWQpO1xyXG4gIFxyXG4gICAgICBpZiAoIWlzUGFzc3dvcmRWYWxpZCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIkludmFsaWQgZW1haWwgb3IgcGFzc3dvcmRcIiB9KTtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogXCJMb2dpbiBzdWNjZXNzZnVsXCIsXHJcbiAgICAgICAgdXNlcjoge1xyXG4gICAgICAgICAgaWQ6IHVzZXIuX2lkLFxyXG4gICAgICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0TmFtZSxcclxuICAgICAgICAgIGxhc3ROYW1lOiB1c2VyLmxhc3ROYW1lLFxyXG4gICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgICByb2xlOiB1c2VyLnJvbGUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b2tlbjogZ2VuZXJhdGVUb2tlbih1c2VyKSxcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwi4p2MIFNpZ24taW4gRXJyb3I6XCIsIGVycm9yKTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvL1NUQUZGIFVTRVJcclxuaW1wb3J0IHsgZ2VuZXJhdGVBdXRoVG9rZW4gfSBmcm9tIFwiLi4vdXRpbHMvand0SGVscGVyLmpzXCI7IFxyXG4vLyDinIUgQ3JlYXRlIFN0YWZmIChDYXNoaWVyKSAtIEFkbWluIE9ubHlcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVN0YWZmID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIOKchSBFbnN1cmUgb25seSBhZG1pbnMgY2FuIGNyZWF0ZSBzdGFmZlxyXG4gICAgaWYgKCFyZXEudXNlciB8fCByZXEudXNlci5yb2xlICE9PSBcImFkbWluXCIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6IFwiQWNjZXNzIGRlbmllZC4gQWRtaW5zIG9ubHkuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBmaXJzdE5hbWUsIGxhc3ROYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIOKchSBFbnN1cmUgYWxsIGZpZWxkcyBhcmUgcHJvdmlkZWRcclxuICAgIGlmICghZmlyc3ROYW1lIHx8ICFsYXN0TmFtZSB8fCAhZW1haWwgfHwgIXBhc3N3b3JkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkFsbCBmaWVsZHMgYXJlIHJlcXVpcmVkXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g4pyFIENoZWNrIGlmIHVzZXIgYWxyZWFkeSBleGlzdHNcclxuICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pO1xyXG4gICAgaWYgKGV4aXN0aW5nVXNlcikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJVc2VyIGFscmVhZHkgZXhpc3RzXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g4pyFIEhhc2ggcGFzc3dvcmQgYmVmb3JlIHNhdmluZ1xyXG4gICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMCk7XHJcblxyXG4gICAgICAvLyDinIUgQ3JlYXRlIHN0YWZmIHVzZXJcclxuICAgICAgY29uc3Qgc3RhZmYgPSBuZXcgVXNlcih7XHJcbiAgICAgICAgZmlyc3ROYW1lLFxyXG4gICAgICAgIGxhc3ROYW1lLFxyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcclxuICAgICAgICByb2xlOiBcInN0YWZmXCIsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYXdhaXQgc3RhZmYuc2F2ZSgpO1xyXG5cclxuICAgICAgLy8g4pyFIEdlbmVyYXRlIHRva2VuXHJcbiAgICAgIGNvbnN0IHRva2VuID0gZ2VuZXJhdGVBdXRoVG9rZW4oeyBpZDogc3RhZmYuX2lkLCByb2xlOiBcInN0YWZmXCIgfSk7XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogXCJTdGFmZiBhY2NvdW50IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XCIsXHJcbiAgICAgICAgdXNlcjoge1xyXG4gICAgICAgICAgaWQ6IHN0YWZmLl9pZCxcclxuICAgICAgICAgIGZpcnN0TmFtZSxcclxuICAgICAgICAgIGxhc3ROYW1lLFxyXG4gICAgICAgICAgZW1haWwsXHJcbiAgICAgICAgICByb2xlOiBcInN0YWZmXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b2tlbixcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChoYXNoRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBQYXNzd29yZCBIYXNoaW5nIEVycm9yOlwiLCBoYXNoRXJyb3IpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJGYWlsZWQgdG8gaGFzaCBwYXNzd29yZFwiIH0pO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIENyZWF0ZSBTdGFmZiBFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9KTtcclxuICB9XHJcbn07XHJcbiAgXHJcbi8vIOKchSBSZXF1ZXN0IFBhc3N3b3JkIFJlc2V0IChTZW5kIFJlc2V0IFRva2VuIHZpYSBFbWFpbClcclxuZXhwb3J0IGNvbnN0IHJlcXVlc3RQYXNzd29yZFJlc2V0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZW1haWwgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIOKchSBDaGVjayBpZiB1c2VyIGV4aXN0c1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pO1xyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIlVzZXIgbm90IGZvdW5kXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g4pyFIEdlbmVyYXRlIHJlc2V0IHRva2VuXHJcbiAgICBjb25zdCByZXNldFRva2VuID0gand0LnNpZ24oeyBpZDogdXNlci5faWQgfSwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwgeyBleHBpcmVzSW46IFwiMTVtXCIgfSk7XHJcblxyXG4gICAgLy8g4pyFIFNlbmQgZW1haWwgKFNpbXVsYXRlZCB1c2luZyBjb25zb2xlLmxvZywgcmVwbGFjZSB3aXRoIG5vZGVtYWlsZXIgZm9yIHJlYWwgZW1haWxzKVxyXG4gICAgY29uc29sZS5sb2coYPCflLkgUGFzc3dvcmQgUmVzZXQgVG9rZW4gZm9yICR7ZW1haWx9OiAke3Jlc2V0VG9rZW59YCk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIlBhc3N3b3JkIHJlc2V0IGxpbmsgc2VudCB0byBlbWFpbFwiLCByZXNldFRva2VuIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIFBhc3N3b3JkIFJlc2V0IFJlcXVlc3QgRXJyb3I6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8g4pyFIFJlc2V0IFBhc3N3b3JkIChVc2luZyBUb2tlbilcclxuZXhwb3J0IGNvbnN0IHJlc2V0UGFzc3dvcmQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB0b2tlbiwgbmV3UGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIOKchSBWZXJpZnkgVG9rZW5cclxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKTtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKGRlY29kZWQuaWQpO1xyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIkludmFsaWQgb3IgZXhwaXJlZCB0b2tlblwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOKchSBIYXNoIG5ldyBwYXNzd29yZFxyXG4gICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChuZXdQYXNzd29yZCwgMTApO1xyXG4gICAgdXNlci5wYXNzd29yZCA9IGhhc2hlZFBhc3N3b3JkO1xyXG4gICAgYXdhaXQgdXNlci5zYXZlKCk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIlBhc3N3b3JkIHJlc2V0IHN1Y2Nlc3NmdWxcIiB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBQYXNzd29yZCBSZXNldCBFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIG9yIGV4cGlyZWQgdG9rZW5cIiB9KTtcclxuICB9XHJcbn07Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxLQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxhQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxTQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxPQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFtR0EsSUFBQUksVUFBQSxHQUFBSixPQUFBO0FBQTBELFNBQUFELHVCQUFBTSxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxD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","map":{"version":3,"names":["_user","_interopRequireDefault","require","_jsonwebtoken","_bcryptjs","_dotenv","_jwtHelper","e","__esModule","default","dotenv","config","generateToken","user","jwt","sign","id","_id","role","process","env","JWT_SECRET","expiresIn","signup","req","res","firstName","lastName","email","password","body","status","json","error","existingUser","User","findOne","hashedPassword","bcrypt","hash","console","log","newUser","save","message","token","exports","signin","isPasswordValid","compare","createStaff","staff","generateAuthToken","hashError","requestPasswordReset","resetToken","resetPassword","newPassword","decoded","verify","findById"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\controllers\\","sources":["authController.js"],"sourcesContent":["import User from \"../models/user.js\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport dotenv from \"dotenv\";\r\n\r\ndotenv.config();\r\n\r\n// ✅ Generate JWT Token\r\nconst generateToken = (user) => {\r\n  return jwt.sign({ id: user._id, role: user.role }, process.env.JWT_SECRET, {\r\n    expiresIn: \"1d\",\r\n  });\r\n};\r\n\r\n//SIGNUP\r\nexport const signup = async (req, res) => {\r\n    try {\r\n      const { firstName, lastName, email, password, role } = req.body;\r\n  \r\n      if (!firstName || !lastName || !email || !password) {\r\n        return res.status(400).json({ error: \"All fields are required\" });\r\n      }\r\n  \r\n      const existingUser = await User.findOne({ email });\r\n      if (existingUser) {\r\n        return res.status(400).json({ error: \"User already exists\" });\r\n      }\r\n  \r\n      const hashedPassword = await bcrypt.hash(password, 12);\r\n  \r\n      console.log(\"✅ Hashed Password Before Saving:\", hashedPassword); // 🔍 Debugging\r\n  \r\n      const newUser = new User({\r\n        firstName,\r\n        lastName,\r\n        email,\r\n        password: hashedPassword, // ✅ Ensure hashed password is stored\r\n        role: role || \"user\",\r\n      });\r\n  \r\n      await newUser.save();\r\n      console.log(\"✅ New User Created in DB:\", newUser);\r\n  \r\n      res.status(201).json({\r\n        message: \"User registered successfully\",\r\n        user: { id: newUser._id, firstName, lastName, email, role: newUser.role },\r\n        token: generateToken(newUser),\r\n      });\r\n    } catch (error) {\r\n      console.error(\"❌ Signup Error:\", error);\r\n      res.status(500).json({ error: \"Internal server error\" });\r\n    }\r\n  };\r\n \r\n  //SIGNIN\r\nexport const signin = async (req, res) => {\r\n    try {\r\n      const { email, password } = req.body;\r\n  \r\n      console.log(\"🔍 Entered Email:\", email);\r\n      console.log(\"🔍 Entered Password:\", password);\r\n  \r\n      // ✅ Ensure email and password are provided\r\n      if (!email || !password) {\r\n        return res.status(400).json({ error: \"Email and password are required\" });\r\n      }\r\n  \r\n      const user = await User.findOne({ email });\r\n  \r\n      console.log(\"🔍 Fetched User from DB:\", user);\r\n  \r\n      if (!user) {\r\n        return res.status(401).json({ error: \"Invalid email or password\" });\r\n      }\r\n  \r\n      const isPasswordValid = await bcrypt.compare(password, user.password);\r\n  \r\n      console.log(\"🔍 Stored Hashed Password:\", user.password);\r\n      console.log(\"🔍 Password Match Status:\", isPasswordValid);\r\n  \r\n      if (!isPasswordValid) {\r\n        return res.status(401).json({ error: \"Invalid email or password\" });\r\n      }\r\n  \r\n      res.status(200).json({\r\n        message: \"Login successful\",\r\n        user: {\r\n          id: user._id,\r\n          firstName: user.firstName,\r\n          lastName: user.lastName,\r\n          email: user.email,\r\n          role: user.role,\r\n        },\r\n        token: generateToken(user),\r\n      });\r\n    } catch (error) {\r\n      console.error(\"❌ Sign-in Error:\", error);\r\n      res.status(500).json({ error: \"Internal server error\" });\r\n    }\r\n  };\r\n\r\n  //STAFF USER\r\nimport { generateAuthToken } from \"../utils/jwtHelper.js\"; \r\n// ✅ Create Staff (Cashier) - Admin Only\r\nexport const createStaff = async (req, res) => {\r\n  try {\r\n    // ✅ Ensure only admins can create staff\r\n    if (!req.user || req.user.role !== \"admin\") {\r\n      return res.status(403).json({ error: \"Access denied. Admins only.\" });\r\n    }\r\n\r\n    const { firstName, lastName, email, password } = req.body;\r\n\r\n    // ✅ Ensure all fields are provided\r\n    if (!firstName || !lastName || !email || !password) {\r\n      return res.status(400).json({ error: \"All fields are required\" });\r\n    }\r\n\r\n    // ✅ Check if user already exists\r\n    const existingUser = await User.findOne({ email });\r\n    if (existingUser) {\r\n      return res.status(400).json({ error: \"User already exists\" });\r\n    }\r\n\r\n    try {\r\n      // ✅ Hash password before saving\r\n      const hashedPassword = await bcrypt.hash(password, 10);\r\n\r\n      // ✅ Create staff user\r\n      const staff = new User({\r\n        firstName,\r\n        lastName,\r\n        email,\r\n        password: hashedPassword,\r\n        role: \"staff\",\r\n      });\r\n\r\n      await staff.save();\r\n\r\n      // ✅ Generate token\r\n      const token = generateAuthToken({ id: staff._id, role: \"staff\" });\r\n\r\n      res.status(201).json({\r\n        message: \"Staff account created successfully\",\r\n        user: {\r\n          id: staff._id,\r\n          firstName,\r\n          lastName,\r\n          email,\r\n          role: \"staff\",\r\n        },\r\n        token,\r\n      });\r\n    } catch (hashError) {\r\n      console.error(\"❌ Password Hashing Error:\", hashError);\r\n      return res.status(500).json({ error: \"Failed to hash password\" });\r\n    }\r\n  } catch (error) {\r\n    console.error(\"❌ Create Staff Error:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n  \r\n// ✅ Request Password Reset (Send Reset Token via Email)\r\nexport const requestPasswordReset = async (req, res) => {\r\n  try {\r\n    const { email } = req.body;\r\n\r\n    // ✅ Check if user exists\r\n    const user = await User.findOne({ email });\r\n    if (!user) {\r\n      return res.status(404).json({ error: \"User not found\" });\r\n    }\r\n\r\n    // ✅ Generate reset token\r\n    const resetToken = jwt.sign({ id: user._id }, process.env.JWT_SECRET, { expiresIn: \"15m\" });\r\n\r\n    // ✅ Send email (Simulated using console.log, replace with nodemailer for real emails)\r\n    console.log(`🔹 Password Reset Token for ${email}: ${resetToken}`);\r\n\r\n    res.status(200).json({ message: \"Password reset link sent to email\", resetToken });\r\n  } catch (error) {\r\n    console.error(\"❌ Password Reset Request Error:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n\r\n// ✅ Reset Password (Using Token)\r\nexport const resetPassword = async (req, res) => {\r\n  try {\r\n    const { token, newPassword } = req.body;\r\n\r\n    // ✅ Verify Token\r\n    const decoded = jwt.verify(token, process.env.JWT_SECRET);\r\n    const user = await User.findById(decoded.id);\r\n    if (!user) {\r\n      return res.status(404).json({ error: \"Invalid or expired token\" });\r\n    }\r\n\r\n    // ✅ Hash new password\r\n    const hashedPassword = await bcrypt.hash(newPassword, 10);\r\n    user.password = hashedPassword;\r\n    await user.save();\r\n\r\n    res.status(200).json({ message: \"Password reset successful\" });\r\n  } catch (error) {\r\n    console.error(\"❌ Password Reset Error:\", error);\r\n    res.status(500).json({ error: \"Invalid or expired token\" });\r\n  }\r\n};"],"mappings":";;;;;;AAAA,IAAAA,KAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,aAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,SAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,OAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAmGA,IAAAI,UAAA,GAAAJ,OAAA;AAA0D,SAAAD,uBAAAM,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAjG1DG,eAAM,CAACC,MAAM,CAAC,CAAC;;AAEf;AACA,MAAMC,aAAa,GAAIC,IAAI,IAAK;EAC9B,OAAOC,qBAAG,CAACC,IAAI,CAAC;IAAEC,EAAE,EAAEH,IAAI,CAACI,GAAG;IAAEC,IAAI,EAAEL,IAAI,CAACK;EAAK,CAAC,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU,EAAE;IACzEC,SAAS,EAAE;EACb,CAAC,CAAC;AACJ,CAAC;;AAED;AACO,MAAMC,MAAM,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,IAAI;IACF,MAAM;MAAEC,SAAS;MAAEC,QAAQ;MAAEC,KAAK;MAAEC,QAAQ;MAAEX;IAAK,CAAC,GAAGM,GAAG,CAACM,IAAI;IAE/D,IAAI,CAACJ,SAAS,IAAI,CAACC,QAAQ,IAAI,CAACC,KAAK,IAAI,CAACC,QAAQ,EAAE;MAClD,OAAOJ,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAA0B,CAAC,CAAC;IACnE;IAEA,MAAMC,YAAY,GAAG,MAAMC,aAAI,CAACC,OAAO,CAAC;MAAER;IAAM,CAAC,CAAC;IAClD,IAAIM,YAAY,EAAE;MAChB,OAAOT,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAAsB,CAAC,CAAC;IAC/D;IAEA,MAAMI,cAAc,GAAG,MAAMC,iBAAM,CAACC,IAAI,CAACV,QAAQ,EAAE,EAAE,CAAC;IAEtDW,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAEJ,cAAc,CAAC,CAAC,CAAC;;IAEjE,MAAMK,OAAO,GAAG,IAAIP,aAAI,CAAC;MACvBT,SAAS;MACTC,QAAQ;MACRC,KAAK;MACLC,QAAQ,EAAEQ,cAAc;MAAE;MAC1BnB,IAAI,EAAEA,IAAI,IAAI;IAChB,CAAC,CAAC;IAEF,MAAMwB,OAAO,CAACC,IAAI,CAAC,CAAC;IACpBH,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEC,OAAO,CAAC;IAEjDjB,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACnBY,OAAO,EAAE,8BAA8B;MACvC/B,IAAI,EAAE;QAAEG,EAAE,EAAE0B,OAAO,CAACzB,GAAG;QAAES,SAAS;QAAEC,QAAQ;QAAEC,KAAK;QAAEV,IAAI,EAAEwB,OAAO,CAACxB;MAAK,CAAC;MACzE2B,KAAK,EAAEjC,aAAa,CAAC8B,OAAO;IAC9B,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOT,KAAK,EAAE;IACdO,OAAO,CAACP,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC;IACvCR,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC;;AAED;AAAAa,OAAA,CAAAvB,MAAA,GAAAA,MAAA;AACK,MAAMwB,MAAM,GAAG,MAAAA,CAAOvB,GAAG,EAAEC,GAAG,KAAK;EACtC,IAAI;IACF,MAAM;MAAEG,KAAK;MAAEC;IAAS,CAAC,GAAGL,GAAG,CAACM,IAAI;IAEpCU,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEb,KAAK,CAAC;IACvCY,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEZ,QAAQ,CAAC;;IAE7C;IACA,IAAI,CAACD,KAAK,IAAI,CAACC,QAAQ,EAAE;MACvB,OAAOJ,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAAkC,CAAC,CAAC;IAC3E;IAEA,MAAMpB,IAAI,GAAG,MAAMsB,aAAI,CAACC,OAAO,CAAC;MAAER;IAAM,CAAC,CAAC;IAE1CY,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAE5B,IAAI,CAAC;IAE7C,IAAI,CAACA,IAAI,EAAE;MACT,OAAOY,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAA4B,CAAC,CAAC;IACrE;IAEA,MAAMe,eAAe,GAAG,MAAMV,iBAAM,CAACW,OAAO,CAACpB,QAAQ,EAAEhB,IAAI,CAACgB,QAAQ,CAAC;IAErEW,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAE5B,IAAI,CAACgB,QAAQ,CAAC;IACxDW,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEO,eAAe,CAAC;IAEzD,IAAI,CAACA,eAAe,EAAE;MACpB,OAAOvB,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAA4B,CAAC,CAAC;IACrE;IAEAR,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACnBY,OAAO,EAAE,kBAAkB;MAC3B/B,IAAI,EAAE;QACJG,EAAE,EAAEH,IAAI,CAACI,GAAG;QACZS,SAAS,EAAEb,IAAI,CAACa,SAAS;QACzBC,QAAQ,EAAEd,IAAI,CAACc,QAAQ;QACvBC,KAAK,EAAEf,IAAI,CAACe,KAAK;QACjBV,IAAI,EAAEL,IAAI,CAACK;MACb,CAAC;MACD2B,KAAK,EAAEjC,aAAa,CAACC,IAAI;IAC3B,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOoB,KAAK,EAAE;IACdO,OAAO,CAACP,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;IACxCR,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC;;AAED;AAAAa,OAAA,CAAAC,MAAA,GAAAA,MAAA;AAEF;AACO,MAAMG,WAAW,GAAG,MAAAA,CAAO1B,GAAG,EAAEC,GAAG,KAAK;EAC7C,IAAI;IACF;IACA,IAAI,CAACD,GAAG,CAACX,IAAI,IAAIW,GAAG,CAACX,IAAI,CAACK,IAAI,KAAK,OAAO,EAAE;MAC1C,OAAOO,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAA8B,CAAC,CAAC;IACvE;IAEA,MAAM;MAAEP,SAAS;MAAEC,QAAQ;MAAEC,KAAK;MAAEC;IAAS,CAAC,GAAGL,GAAG,CAACM,IAAI;;IAEzD;IACA,IAAI,CAACJ,SAAS,IAAI,CAACC,QAAQ,IAAI,CAACC,KAAK,IAAI,CAACC,QAAQ,EAAE;MAClD,OAAOJ,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAA0B,CAAC,CAAC;IACnE;;IAEA;IACA,MAAMC,YAAY,GAAG,MAAMC,aAAI,CAACC,OAAO,CAAC;MAAER;IAAM,CAAC,CAAC;IAClD,IAAIM,YAAY,EAAE;MAChB,OAAOT,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAAsB,CAAC,CAAC;IAC/D;IAEA,IAAI;MACF;MACA,MAAMI,cAAc,GAAG,MAAMC,iBAAM,CAACC,IAAI,CAACV,QAAQ,EAAE,EAAE,CAAC;;MAEtD;MACA,MAAMsB,KAAK,GAAG,IAAIhB,aAAI,CAAC;QACrBT,SAAS;QACTC,QAAQ;QACRC,KAAK;QACLC,QAAQ,EAAEQ,cAAc;QACxBnB,IAAI,EAAE;MACR,CAAC,CAAC;MAEF,MAAMiC,KAAK,CAACR,IAAI,CAAC,CAAC;;MAElB;MACA,MAAME,KAAK,GAAG,IAAAO,4BAAiB,EAAC;QAAEpC,EAAE,EAAEmC,KAAK,CAAClC,GAAG;QAAEC,IAAI,EAAE;MAAQ,CAAC,CAAC;MAEjEO,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QACnBY,OAAO,EAAE,oCAAoC;QAC7C/B,IAAI,EAAE;UACJG,EAAE,EAAEmC,KAAK,CAAClC,GAAG;UACbS,SAAS;UACTC,QAAQ;UACRC,KAAK;UACLV,IAAI,EAAE;QACR,CAAC;QACD2B;MACF,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOQ,SAAS,EAAE;MAClBb,OAAO,CAACP,KAAK,CAAC,2BAA2B,EAAEoB,SAAS,CAAC;MACrD,OAAO5B,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAA0B,CAAC,CAAC;IACnE;EACF,CAAC,CAAC,OAAOA,KAAK,EAAE;IACdO,OAAO,CAACP,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC7CR,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC;;AAED;AAAAa,OAAA,CAAAI,WAAA,GAAAA,WAAA;AACO,MAAMI,oBAAoB,GAAG,MAAAA,CAAO9B,GAAG,EAAEC,GAAG,KAAK;EACtD,IAAI;IACF,MAAM;MAAEG;IAAM,CAAC,GAAGJ,GAAG,CAACM,IAAI;;IAE1B;IACA,MAAMjB,IAAI,GAAG,MAAMsB,aAAI,CAACC,OAAO,CAAC;MAAER;IAAM,CAAC,CAAC;IAC1C,IAAI,CAACf,IAAI,EAAE;MACT,OAAOY,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAAiB,CAAC,CAAC;IAC1D;;IAEA;IACA,MAAMsB,UAAU,GAAGzC,qBAAG,CAACC,IAAI,CAAC;MAAEC,EAAE,EAAEH,IAAI,CAACI;IAAI,CAAC,EAAEE,OAAO,CAACC,GAAG,CAACC,UAAU,EAAE;MAAEC,SAAS,EAAE;IAAM,CAAC,CAAC;;IAE3F;IACAkB,OAAO,CAACC,GAAG,CAAC,+BAA+Bb,KAAK,KAAK2B,UAAU,EAAE,CAAC;IAElE9B,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEY,OAAO,EAAE,mCAAmC;MAAEW;IAAW,CAAC,CAAC;EACpF,CAAC,CAAC,OAAOtB,KAAK,EAAE;IACdO,OAAO,CAACP,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;IACvDR,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC;;AAED;AAAAa,OAAA,CAAAQ,oBAAA,GAAAA,oBAAA;AACO,MAAME,aAAa,GAAG,MAAAA,CAAOhC,GAAG,EAAEC,GAAG,KAAK;EAC/C,IAAI;IACF,MAAM;MAAEoB,KAAK;MAAEY;IAAY,CAAC,GAAGjC,GAAG,CAACM,IAAI;;IAEvC;IACA,MAAM4B,OAAO,GAAG5C,qBAAG,CAAC6C,MAAM,CAACd,KAAK,EAAE1B,OAAO,CAACC,GAAG,CAACC,UAAU,CAAC;IACzD,MAAMR,IAAI,GAAG,MAAMsB,aAAI,CAACyB,QAAQ,CAACF,OAAO,CAAC1C,EAAE,CAAC;IAC5C,IAAI,CAACH,IAAI,EAAE;MACT,OAAOY,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAA2B,CAAC,CAAC;IACpE;;IAEA;IACA,MAAMI,cAAc,GAAG,MAAMC,iBAAM,CAACC,IAAI,CAACkB,WAAW,EAAE,EAAE,CAAC;IACzD5C,IAAI,CAACgB,QAAQ,GAAGQ,cAAc;IAC9B,MAAMxB,IAAI,CAAC8B,IAAI,CAAC,CAAC;IAEjBlB,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEY,OAAO,EAAE;IAA4B,CAAC,CAAC;EAChE,CAAC,CAAC,OAAOX,KAAK,EAAE;IACdO,OAAO,CAACP,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IAC/CR,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAE;IAA2B,CAAC,CAAC;EAC7D;AACF,CAAC;AAACa,OAAA,CAAAU,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1742548172846},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\models\\\\user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst userSchema = new _mongoose.default.Schema({\n  firstName: {\n    type: String,\n    required: true\n  },\n  lastName: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  role: {\n    type: String,\n    enum: [\"user\", \"admin\", \"staff\"],\n    default: \"user\"\n  }\n});\n\n// ✅ Hash password before saving only if it's not already hashed\nuserSchema.pre(\"save\", async function (next) {\n  if (!this.isModified(\"password\")) return next();\n\n  // Ensure the password is not already hashed\n  if (!this.password.startsWith(\"$2b$\")) {\n    const salt = await _bcryptjs.default.genSalt(12);\n    this.password = await _bcryptjs.default.hash(this.password, salt);\n  }\n  next();\n});\n\n// ✅ Compare password correctly\nuserSchema.methods.matchPassword = async function (enteredPassword) {\n  return await _bcryptjs.default.compare(enteredPassword, this.password);\n};\nconst User = _mongoose.default.model(\"User\", userSchema);\nvar _default = exports.default = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9iY3J5cHRqcyIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInVzZXJTY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsImZpcnN0TmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsImxhc3ROYW1lIiwiZW1haWwiLCJ1bmlxdWUiLCJwYXNzd29yZCIsInJvbGUiLCJlbnVtIiwicHJlIiwibmV4dCIsImlzTW9kaWZpZWQiLCJzdGFydHNXaXRoIiwic2FsdCIsImJjcnlwdCIsImdlblNhbHQiLCJoYXNoIiwibWV0aG9kcyIsIm1hdGNoUGFzc3dvcmQiLCJlbnRlcmVkUGFzc3dvcmQiLCJjb21wYXJlIiwiVXNlciIsIm1vZGVsIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXHNlcmdlXFxiYW5rYS1hcGlcXHNyY1xcbW9kZWxzXFwiLCJzb3VyY2VzIjpbInVzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRqc1wiO1xyXG5cclxuY29uc3QgdXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gIGZpcnN0TmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgbGFzdE5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gIGVtYWlsOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUsIHVuaXF1ZTogdHJ1ZSB9LFxyXG4gIHBhc3N3b3JkOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICByb2xlOiB7IHR5cGU6IFN0cmluZywgZW51bTogW1widXNlclwiLCBcImFkbWluXCIsXCJzdGFmZlwiXSwgZGVmYXVsdDogXCJ1c2VyXCIgfSxcclxufSk7XHJcblxyXG4vLyDinIUgSGFzaCBwYXNzd29yZCBiZWZvcmUgc2F2aW5nIG9ubHkgaWYgaXQncyBub3QgYWxyZWFkeSBoYXNoZWRcclxudXNlclNjaGVtYS5wcmUoXCJzYXZlXCIsIGFzeW5jIGZ1bmN0aW9uIChuZXh0KSB7XHJcbiAgaWYgKCF0aGlzLmlzTW9kaWZpZWQoXCJwYXNzd29yZFwiKSkgcmV0dXJuIG5leHQoKTtcclxuXHJcbiAgLy8gRW5zdXJlIHRoZSBwYXNzd29yZCBpcyBub3QgYWxyZWFkeSBoYXNoZWRcclxuICBpZiAoIXRoaXMucGFzc3dvcmQuc3RhcnRzV2l0aChcIiQyYiRcIikpIHtcclxuICAgIGNvbnN0IHNhbHQgPSBhd2FpdCBiY3J5cHQuZ2VuU2FsdCgxMik7XHJcbiAgICB0aGlzLnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2godGhpcy5wYXNzd29yZCwgc2FsdCk7XHJcbiAgfVxyXG5cclxuICBuZXh0KCk7XHJcbn0pO1xyXG5cclxuLy8g4pyFIENvbXBhcmUgcGFzc3dvcmQgY29ycmVjdGx5XHJcbnVzZXJTY2hlbWEubWV0aG9kcy5tYXRjaFBhc3N3b3JkID0gYXN5bmMgZnVuY3Rpb24gKGVudGVyZWRQYXNzd29yZCkge1xyXG4gIHJldHVybiBhd2FpdCBiY3J5cHQuY29tcGFyZShlbnRlcmVkUGFzc3dvcmQsIHRoaXMucGFzc3dvcmQpO1xyXG59O1xyXG5cclxuY29uc3QgVXNlciA9IG1vbmdvb3NlLm1vZGVsKFwiVXNlclwiLCB1c2VyU2NoZW1hKTtcclxuZXhwb3J0IGRlZmF1bHQgVXNlcjtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxTQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxTQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFBOEIsU0FBQUQsdUJBQUFHLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFFOUIsTUFBTUcsVUFBVSxHQUFHLElBQUlDLGlCQUFRLENBQUNDLE1BQU0sQ0FBQztFQUNyQ0MsU0FBUyxFQUFFO0lBQUVDLElBQUksRUFBRUMsTUFBTTtJQUFFQyxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQzNDQyxRQUFRLEVBQUU7SUFBRUgsSUFBSSxFQUFFQyxNQUFNO0lBQUVDLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDMUNFLEtBQUssRUFBRTtJQUFFSixJQUFJLEVBQUVDLE1BQU07SUFBRUMsUUFBUSxFQUFFLElBQUk7SUFBRUcsTUFBTSxFQUFFO0VBQUssQ0FBQztFQUNyREMsUUFBUSxFQUFFO0lBQUVOLElBQUksRUFBRUMsTUFBTTtJQUFFQyxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQzFDSyxJQUFJLEVBQUU7SUFBRVAsSUFBSSxFQUFFQyxNQUFNO0lBQUVPLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUMsT0FBTyxDQUFDO0lBQUViLE9BQU8sRUFBRTtFQUFPO0FBQ3pFLENBQUMsQ0FBQzs7QUFFRjtBQUNBQyxVQUFVLENBQUNhLEdBQUcsQ0FBQyxNQUFNLEVBQUUsZ0JBQWdCQyxJQUFJLEVBQUU7RUFDM0MsSUFBSSxDQUFDLElBQUksQ0FBQ0MsVUFBVSxDQUFDLFVBQVUsQ0FBQyxFQUFFLE9BQU9ELElBQUksQ0FBQyxDQUFDOztFQUUvQztFQUNBLElBQUksQ0FBQyxJQUFJLENBQUNKLFFBQVEsQ0FBQ00sVUFBVSxDQUFDLE1BQU0sQ0FBQyxFQUFFO0lBQ3JDLE1BQU1DLElBQUksR0FBRyxNQUFNQyxpQkFBTSxDQUFDQyxPQUFPLENBQUMsRUFBRSxDQUFDO0lBQ3JDLElBQUksQ0FBQ1QsUUFBUSxHQUFHLE1BQU1RLGlCQUFNLENBQUNFLElBQUksQ0FBQyxJQUFJLENBQUNWLFFBQVEsRUFBRU8sSUFBSSxDQUFDO0VBQ3hEO0VBRUFILElBQUksQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxDQUFDOztBQUVGO0FBQ0FkLFVBQVUsQ0FBQ3FCLE9BQU8sQ0FBQ0MsYUFBYSxHQUFHLGdCQUFnQkMsZUFBZSxFQUFFO0VBQ2xFLE9BQU8sTUFBTUwsaUJBQU0sQ0FBQ00sT0FBTyxDQUFDRCxlQUFlLEVBQUUsSUFBSSxDQUFDYixRQUFRLENBQUM7QUFDN0QsQ0FBQztBQUVELE1BQU1lLElBQUksR0FBR3hCLGlCQUFRLENBQUN5QixLQUFLLENBQUMsTUFBTSxFQUFFMUIsVUFBVSxDQUFDO0FBQUMsSUFBQTJCLFFBQUEsR0FBQUMsT0FBQSxDQUFBN0IsT0FBQSxHQUNqQzBCLElBQUkiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","_bcryptjs","e","__esModule","default","userSchema","mongoose","Schema","firstName","type","String","required","lastName","email","unique","password","role","enum","pre","next","isModified","startsWith","salt","bcrypt","genSalt","hash","methods","matchPassword","enteredPassword","compare","User","model","_default","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\models\\","sources":["user.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\nimport bcrypt from \"bcryptjs\";\r\n\r\nconst userSchema = new mongoose.Schema({\r\n  firstName: { type: String, required: true },\r\n  lastName: { type: String, required: true },\r\n  email: { type: String, required: true, unique: true },\r\n  password: { type: String, required: true },\r\n  role: { type: String, enum: [\"user\", \"admin\",\"staff\"], default: \"user\" },\r\n});\r\n\r\n// ✅ Hash password before saving only if it's not already hashed\r\nuserSchema.pre(\"save\", async function (next) {\r\n  if (!this.isModified(\"password\")) return next();\r\n\r\n  // Ensure the password is not already hashed\r\n  if (!this.password.startsWith(\"$2b$\")) {\r\n    const salt = await bcrypt.genSalt(12);\r\n    this.password = await bcrypt.hash(this.password, salt);\r\n  }\r\n\r\n  next();\r\n});\r\n\r\n// ✅ Compare password correctly\r\nuserSchema.methods.matchPassword = async function (enteredPassword) {\r\n  return await bcrypt.compare(enteredPassword, this.password);\r\n};\r\n\r\nconst User = mongoose.model(\"User\", userSchema);\r\nexport default User;\r\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,SAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA8B,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE9B,MAAMG,UAAU,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACrCC,SAAS,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC3CC,QAAQ,EAAE;IAAEH,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC1CE,KAAK,EAAE;IAAEJ,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE,IAAI;IAAEG,MAAM,EAAE;EAAK,CAAC;EACrDC,QAAQ,EAAE;IAAEN,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC1CK,IAAI,EAAE;IAAEP,IAAI,EAAEC,MAAM;IAAEO,IAAI,EAAE,CAAC,MAAM,EAAE,OAAO,EAAC,OAAO,CAAC;IAAEb,OAAO,EAAE;EAAO;AACzE,CAAC,CAAC;;AAEF;AACAC,UAAU,CAACa,GAAG,CAAC,MAAM,EAAE,gBAAgBC,IAAI,EAAE;EAC3C,IAAI,CAAC,IAAI,CAACC,UAAU,CAAC,UAAU,CAAC,EAAE,OAAOD,IAAI,CAAC,CAAC;;EAE/C;EACA,IAAI,CAAC,IAAI,CAACJ,QAAQ,CAACM,UAAU,CAAC,MAAM,CAAC,EAAE;IACrC,MAAMC,IAAI,GAAG,MAAMC,iBAAM,CAACC,OAAO,CAAC,EAAE,CAAC;IACrC,IAAI,CAACT,QAAQ,GAAG,MAAMQ,iBAAM,CAACE,IAAI,CAAC,IAAI,CAACV,QAAQ,EAAEO,IAAI,CAAC;EACxD;EAEAH,IAAI,CAAC,CAAC;AACR,CAAC,CAAC;;AAEF;AACAd,UAAU,CAACqB,OAAO,CAACC,aAAa,GAAG,gBAAgBC,eAAe,EAAE;EAClE,OAAO,MAAML,iBAAM,CAACM,OAAO,CAACD,eAAe,EAAE,IAAI,CAACb,QAAQ,CAAC;AAC7D,CAAC;AAED,MAAMe,IAAI,GAAGxB,iBAAQ,CAACyB,KAAK,CAAC,MAAM,EAAE1B,UAAU,CAAC;AAAC,IAAA2B,QAAA,GAAAC,OAAA,CAAA7B,OAAA,GACjC0B,IAAI","ignoreList":[]}},"mtime":1742542399179},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\routes\\\\protectedRoutes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _authMiddleware = require(\"../middleware/authMiddleware.js\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst router = _express.default.Router();\nrouter.get(\"/\", _authMiddleware.verifyToken, (req, res) => {\n  res.status(200).json({\n    message: \"Authorized access\"\n  });\n});\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2F1dGhNaWRkbGV3YXJlIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0Iiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsInZlcmlmeVRva2VuIiwicmVxIiwicmVzIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcc2VyZ2VcXGJhbmthLWFwaVxcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsicHJvdGVjdGVkUm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSBcIi4uL21pZGRsZXdhcmUvYXV0aE1pZGRsZXdhcmUuanNcIjtcclxuXHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIuZ2V0KFwiL1wiLCB2ZXJpZnlUb2tlbiwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIkF1dGhvcml6ZWQgYWNjZXNzXCIgfSk7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGVBQUEsR0FBQUQsT0FBQTtBQUE4RCxTQUFBRCx1QkFBQUcsQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUU5RCxNQUFNRyxNQUFNLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0FBRS9CRixNQUFNLENBQUNHLEdBQUcsQ0FBQyxHQUFHLEVBQUVDLDJCQUFXLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDekNBLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7SUFBRUMsT0FBTyxFQUFFO0VBQW9CLENBQUMsQ0FBQztBQUN4RCxDQUFDLENBQUM7QUFBQyxJQUFBQyxRQUFBLEdBQUFDLE9BQUEsQ0FBQVosT0FBQSxHQUVZQyxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_express","_interopRequireDefault","require","_authMiddleware","e","__esModule","default","router","express","Router","get","verifyToken","req","res","status","json","message","_default","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\routes\\","sources":["protectedRoutes.js"],"sourcesContent":["import express from \"express\";\r\nimport { verifyToken } from \"../middleware/authMiddleware.js\";\r\n\r\nconst router = express.Router();\r\n\r\nrouter.get(\"/\", verifyToken, (req, res) => {\r\n  res.status(200).json({ message: \"Authorized access\" });\r\n});\r\n\r\nexport default router;\r\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,eAAA,GAAAD,OAAA;AAA8D,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE9D,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,CAAC,CAAC;AAE/BF,MAAM,CAACG,GAAG,CAAC,GAAG,EAAEC,2BAAW,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EACzCA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAAEC,OAAO,EAAE;EAAoB,CAAC,CAAC;AACxD,CAAC,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAZ,OAAA,GAEYC,MAAM","ignoreList":[]}},"mtime":1742463564937},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\middleware\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\middleware\\\\authMiddleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.verifyToken = exports.isStaff = exports.isAdmin = exports.adminOrStaffAuth = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\n\n_dotenv.default.config();\n\n// Verify Token Middleware\nconst verifyToken = (req, res, next) => {\n  try {\n    const authHeader = req.header(\"Authorization\");\n    if (!authHeader) {\n      return res.status(401).json({\n        error: \"Access denied. No token provided.\"\n      });\n    }\n    const token = authHeader.split(\" \")[1]; // Extract Bearer token\n    if (!token) {\n      return res.status(401).json({\n        error: \"Invalid token format. Use 'Bearer <token>'\"\n      });\n    }\n    const decoded = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET);\n    req.user = decoded;\n    next();\n  } catch (err) {\n    console.error(\"Token Verification Error:\", err.message);\n    res.status(403).json({\n      error: \"Invalid or expired token\"\n    });\n  }\n};\n\n// Staff Middleware\nexports.verifyToken = verifyToken;\nconst isStaff = (req, res, next) => {\n  if (!req.user || req.user.role !== \"staff\") {\n    return res.status(403).json({\n      error: \"Access denied. Staff only.\"\n    });\n  }\n  next();\n};\n\n//Admin or Staff Middleware\nexports.isStaff = isStaff;\nconst adminOrStaffAuth = (req, res, next) => {\n  console.log(\"🔍 Middleware Role Check:\", req.user?.role);\n  if (!req.user || ![\"admin\", \"staff\"].includes(req.user.role)) {\n    return res.status(403).json({\n      error: \"Access denied. Admins and staff only.\"\n    });\n  }\n  next();\n};\n\n// Admin Middleware\nexports.adminOrStaffAuth = adminOrStaffAuth;\nconst isAdmin = (req, res, next) => {\n  if (!req.user || req.user.role !== \"admin\") {\n    return res.status(403).json({\n      error: \"Access denied. Admins only.\"\n    });\n  }\n  next();\n};\nexports.isAdmin = isAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZG90ZW52IiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiZG90ZW52IiwiY29uZmlnIiwidmVyaWZ5VG9rZW4iLCJyZXEiLCJyZXMiLCJuZXh0IiwiYXV0aEhlYWRlciIsImhlYWRlciIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInRva2VuIiwic3BsaXQiLCJkZWNvZGVkIiwiand0IiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJ1c2VyIiwiZXJyIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJleHBvcnRzIiwiaXNTdGFmZiIsInJvbGUiLCJhZG1pbk9yU3RhZmZBdXRoIiwibG9nIiwiaW5jbHVkZXMiLCJpc0FkbWluIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXHNlcmdlXFxiYW5rYS1hcGlcXHNyY1xcbWlkZGxld2FyZVxcIiwic291cmNlcyI6WyJhdXRoTWlkZGxld2FyZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG5EZXZlbG9wZXJzOlxyXG4tIDIwMjQ4LzIwMjIgIFNFUkdFIE1VTkVaQVxyXG4tIDIxOTM5LzIwMjMgIE5FRU1BIFpBTklOS0FcclxuKi9cclxuXHJcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xyXG5pbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcclxuZG90ZW52LmNvbmZpZygpO1xyXG5cclxuLy8gVmVyaWZ5IFRva2VuIE1pZGRsZXdhcmVcclxuZXhwb3J0IGNvbnN0IHZlcmlmeVRva2VuID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVyKFwiQXV0aG9yaXphdGlvblwiKTtcclxuICAgIGlmICghYXV0aEhlYWRlcikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogXCJBY2Nlc3MgZGVuaWVkLiBObyB0b2tlbiBwcm92aWRlZC5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIuc3BsaXQoXCIgXCIpWzFdOyAvLyBFeHRyYWN0IEJlYXJlciB0b2tlblxyXG4gICAgaWYgKCF0b2tlbikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIHRva2VuIGZvcm1hdC4gVXNlICdCZWFyZXIgPHRva2VuPidcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCk7XHJcbiAgICByZXEudXNlciA9IGRlY29kZWQ7XHJcbiAgICBuZXh0KCk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiVG9rZW4gVmVyaWZpY2F0aW9uIEVycm9yOlwiLCBlcnIubWVzc2FnZSk7IFxyXG4gICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIG9yIGV4cGlyZWQgdG9rZW5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBTdGFmZiBNaWRkbGV3YXJlXHJcbmV4cG9ydCBjb25zdCBpc1N0YWZmID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgaWYgKCFyZXEudXNlciB8fCByZXEudXNlci5yb2xlICE9PSBcInN0YWZmXCIpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIkFjY2VzcyBkZW5pZWQuIFN0YWZmIG9ubHkuXCIgfSk7XHJcbiAgfVxyXG4gIG5leHQoKTtcclxufTtcclxuXHJcbi8vQWRtaW4gb3IgU3RhZmYgTWlkZGxld2FyZVxyXG5leHBvcnQgY29uc3QgYWRtaW5PclN0YWZmQXV0aCA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKFwi8J+UjSBNaWRkbGV3YXJlIFJvbGUgQ2hlY2s6XCIsIHJlcS51c2VyPy5yb2xlKTsgXHJcblxyXG4gIGlmICghcmVxLnVzZXIgfHwgIVtcImFkbWluXCIsIFwic3RhZmZcIl0uaW5jbHVkZXMocmVxLnVzZXIucm9sZSkpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIkFjY2VzcyBkZW5pZWQuIEFkbWlucyBhbmQgc3RhZmYgb25seS5cIiB9KTtcclxuICB9XHJcblxyXG4gIG5leHQoKTtcclxufTtcclxuXHJcbi8vIEFkbWluIE1pZGRsZXdhcmVcclxuZXhwb3J0IGNvbnN0IGlzQWRtaW4gPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICBpZiAoIXJlcS51c2VyIHx8IHJlcS51c2VyLnJvbGUgIT09IFwiYWRtaW5cIikge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6IFwiQWNjZXNzIGRlbmllZC4gQWRtaW5zIG9ubHkuXCIgfSk7XHJcbiAgfVxyXG4gIG5leHQoKTtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFNQSxJQUFBQSxhQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFBNEIsU0FBQUQsdUJBQUFHLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFQNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJQUcsZUFBTSxDQUFDQyxNQUFNLENBQUMsQ0FBQzs7QUFFZjtBQUNPLE1BQU1DLFdBQVcsR0FBR0EsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUM3QyxJQUFJO0lBQ0YsTUFBTUMsVUFBVSxHQUFHSCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxlQUFlLENBQUM7SUFDOUMsSUFBSSxDQUFDRCxVQUFVLEVBQUU7TUFDZixPQUFPRixHQUFHLENBQUNJLE1BQU0s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","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","_dotenv","e","__esModule","default","dotenv","config","verifyToken","req","res","next","authHeader","header","status","json","error","token","split","decoded","jwt","verify","process","env","JWT_SECRET","user","err","console","message","exports","isStaff","role","adminOrStaffAuth","log","includes","isAdmin"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\middleware\\","sources":["authMiddleware.js"],"sourcesContent":["/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\r\n\r\nimport jwt from \"jsonwebtoken\";\r\nimport dotenv from \"dotenv\";\r\ndotenv.config();\r\n\r\n// Verify Token Middleware\r\nexport const verifyToken = (req, res, next) => {\r\n  try {\r\n    const authHeader = req.header(\"Authorization\");\r\n    if (!authHeader) {\r\n      return res.status(401).json({ error: \"Access denied. No token provided.\" });\r\n    }\r\n\r\n    const token = authHeader.split(\" \")[1]; // Extract Bearer token\r\n    if (!token) {\r\n      return res.status(401).json({ error: \"Invalid token format. Use 'Bearer <token>'\" });\r\n    }\r\n\r\n    const decoded = jwt.verify(token, process.env.JWT_SECRET);\r\n    req.user = decoded;\r\n    next();\r\n  } catch (err) {\r\n    console.error(\"Token Verification Error:\", err.message); \r\n    res.status(403).json({ error: \"Invalid or expired token\" });\r\n  }\r\n};\r\n\r\n// Staff Middleware\r\nexport const isStaff = (req, res, next) => {\r\n  if (!req.user || req.user.role !== \"staff\") {\r\n    return res.status(403).json({ error: \"Access denied. Staff only.\" });\r\n  }\r\n  next();\r\n};\r\n\r\n//Admin or Staff Middleware\r\nexport const adminOrStaffAuth = (req, res, next) => {\r\n  console.log(\"🔍 Middleware Role Check:\", req.user?.role); \r\n\r\n  if (!req.user || ![\"admin\", \"staff\"].includes(req.user.role)) {\r\n    return res.status(403).json({ error: \"Access denied. Admins and staff only.\" });\r\n  }\r\n\r\n  next();\r\n};\r\n\r\n// Admin Middleware\r\nexport const isAdmin = (req, res, next) => {\r\n  if (!req.user || req.user.role !== \"admin\") {\r\n    return res.status(403).json({ error: \"Access denied. Admins only.\" });\r\n  }\r\n  next();\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1742644683861},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\routes\\\\accountRoutes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _accountController = require(\"../controllers/accountController.js\");\nvar _authMiddleware = require(\"../middleware/authMiddleware.js\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\n\nconst router = _express.default.Router();\nrouter.post(\"/\", _authMiddleware.verifyToken, _accountController.createAccount); // Create a bank account\nrouter.get(\"/user/:userId\", _authMiddleware.verifyToken, _accountController.getUserAccounts);\nrouter.get(\"/\", _authMiddleware.verifyToken, _authMiddleware.adminOrStaffAuth, _accountController.getAllAccounts);\nrouter.patch(\"/:accountId/status\", _authMiddleware.verifyToken, _authMiddleware.adminOrStaffAuth, _accountController.updateAccountStatus);\nrouter.delete(\"/:accountId\", _authMiddleware.verifyToken, _authMiddleware.isAdmin, _accountController.deleteAccount);\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2FjY291bnRDb250cm9sbGVyIiwiX2F1dGhNaWRkbGV3YXJlIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0Iiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsInBvc3QiLCJ2ZXJpZnlUb2tlbiIsImNyZWF0ZUFjY291bnQiLCJnZXQiLCJnZXRVc2VyQWNjb3VudHMiLCJhZG1pbk9yU3RhZmZBdXRoIiwiZ2V0QWxsQWNjb3VudHMiLCJwYXRjaCIsInVwZGF0ZUFjY291bnRTdGF0dXMiLCJkZWxldGUiLCJpc0FkbWluIiwiZGVsZXRlQWNjb3VudCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxzZXJnZVxcYmFua2EtYXBpXFxzcmNcXHJvdXRlc1xcIiwic291cmNlcyI6WyJhY2NvdW50Um91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbkRldmVsb3BlcnM6XHJcbi0gMjAyNDgvMjAyMiAgU0VSR0UgTVVORVpBXHJcbi0gMjE5MzkvMjAyMyAgTkVFTUEgWkFOSU5LQVxyXG4qL1xyXG5cclxuaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IHtcclxuICBjcmVhdGVBY2NvdW50LFxyXG4gIGdldEFsbEFjY291bnRzLFxyXG4gIGdldFVzZXJBY2NvdW50cyxcclxuICB1cGRhdGVBY2NvdW50U3RhdHVzLFxyXG4gIGRlbGV0ZUFjY291bnQsXHJcbn0gZnJvbSBcIi4uL2NvbnRyb2xsZXJzL2FjY291bnRDb250cm9sbGVyLmpzXCI7XHJcbmltcG9ydCB7IHZlcmlmeVRva2VuLCBpc0FkbWluLCBhZG1pbk9yU3RhZmZBdXRoIH0gZnJvbSBcIi4uL21pZGRsZXdhcmUvYXV0aE1pZGRsZXdhcmUuanNcIjtcclxuXHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdChcIi9cIiwgdmVyaWZ5VG9rZW4sIGNyZWF0ZUFjY291bnQpOyAvLyBDcmVhdGUgYSBiYW5rIGFjY291bnRcclxucm91dGVyLmdldChcIi91c2VyLzp1c2VySWRcIiwgdmVyaWZ5VG9rZW4sIGdldFVzZXJBY2NvdW50cyk7XHJcbnJvdXRlci5nZXQoXCIvXCIsIHZlcmlmeVRva2VuLCBhZG1pbk9yU3RhZmZBdXRoLCBnZXRBbGxBY2NvdW50cyk7XHJcbnJvdXRlci5wYXRjaChcIi86YWNjb3VudElkL3N0YXR1c1wiLCB2ZXJpZnlUb2tlbiwgYWRtaW5PclN0YWZmQXV0aCwgdXBkYXRlQWNjb3VudFN0YXR1cyk7XHJcbnJvdXRlci5kZWxldGUoXCIvOmFjY291bnRJZFwiLCB2ZXJpZnlUb2tlbiwgaXNBZG1pbiwgZGVsZXRlQWNjb3VudCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBTUEsSUFBQUEsUUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsa0JBQUEsR0FBQUQsT0FBQTtBQU9BLElBQUFFLGVBQUEsR0FBQUYsT0FBQTtBQUF5RixTQUFBRCx1QkFBQUksQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQWR6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQVlBLE1BQU1HLE1BQU0sR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxDQUFDLENBQUM7QUFFL0JGLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLEdBQUcsRUFBRUMsMkJBQVcsRUFBRUMsZ0NBQWEsQ0FBQyxDQUFDLENBQUM7QUFDOUNMLE1BQU0sQ0FBQ00sR0FBRyxDQUFDLGVBQWUsRUFBRUYsMkJBQVcsRUFBRUcsa0NBQWUsQ0FBQztBQUN6RFAsTUFBTSxDQUFDTSxHQUFHLENBQUMsR0FBRyxFQUFFRiwyQkFBVyxFQUFFSSxnQ0FBZ0IsRUFBRUMsaUNBQWMsQ0FBQztBQUM5RFQsTUFBTSxDQUFDVSxLQUFLLENBQUMsb0JBQW9CLEVBQUVOLDJCQUFXLEVBQUVJLGdDQUFnQixFQUFFRyxzQ0FBbUIsQ0FBQztBQUN0RlgsTUFBTSxDQUFDWSxNQUFNLENBQUMsYUFBYSxFQUFFUiwyQkFBVyxFQUFFUyx1QkFBTyxFQUFFQyxnQ0FBYSxDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFqQixPQUFBLEdBRW5EQyxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_express","_interopRequireDefault","require","_accountController","_authMiddleware","e","__esModule","default","router","express","Router","post","verifyToken","createAccount","get","getUserAccounts","adminOrStaffAuth","getAllAccounts","patch","updateAccountStatus","delete","isAdmin","deleteAccount","_default","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\routes\\","sources":["accountRoutes.js"],"sourcesContent":["/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\r\n\r\nimport express from \"express\";\r\nimport {\r\n  createAccount,\r\n  getAllAccounts,\r\n  getUserAccounts,\r\n  updateAccountStatus,\r\n  deleteAccount,\r\n} from \"../controllers/accountController.js\";\r\nimport { verifyToken, isAdmin, adminOrStaffAuth } from \"../middleware/authMiddleware.js\";\r\n\r\nconst router = express.Router();\r\n\r\nrouter.post(\"/\", verifyToken, createAccount); // Create a bank account\r\nrouter.get(\"/user/:userId\", verifyToken, getUserAccounts);\r\nrouter.get(\"/\", verifyToken, adminOrStaffAuth, getAllAccounts);\r\nrouter.patch(\"/:accountId/status\", verifyToken, adminOrStaffAuth, updateAccountStatus);\r\nrouter.delete(\"/:accountId\", verifyToken, isAdmin, deleteAccount);\r\n\r\nexport default router;\r\n"],"mappings":";;;;;;AAMA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,kBAAA,GAAAD,OAAA;AAOA,IAAAE,eAAA,GAAAF,OAAA;AAAyF,SAAAD,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAdzF;AACA;AACA;AACA;AACA;;AAYA,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,CAAC,CAAC;AAE/BF,MAAM,CAACG,IAAI,CAAC,GAAG,EAAEC,2BAAW,EAAEC,gCAAa,CAAC,CAAC,CAAC;AAC9CL,MAAM,CAACM,GAAG,CAAC,eAAe,EAAEF,2BAAW,EAAEG,kCAAe,CAAC;AACzDP,MAAM,CAACM,GAAG,CAAC,GAAG,EAAEF,2BAAW,EAAEI,gCAAgB,EAAEC,iCAAc,CAAC;AAC9DT,MAAM,CAACU,KAAK,CAAC,oBAAoB,EAAEN,2BAAW,EAAEI,gCAAgB,EAAEG,sCAAmB,CAAC;AACtFX,MAAM,CAACY,MAAM,CAAC,aAAa,EAAER,2BAAW,EAAES,uBAAO,EAAEC,gCAAa,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAjB,OAAA,GAEnDC,MAAM","ignoreList":[]}},"mtime":1742644772223},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\controllers\\\\accountController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateAccountStatus = exports.getUserAccounts = exports.getAllAccounts = exports.deleteAccount = exports.createAccount = void 0;\nvar _account = _interopRequireDefault(require(\"../models/account.js\"));\nvar _user = _interopRequireDefault(require(\"../models/user.js\"));\nvar _accountHelper = require(\"../utils/accountHelper.js\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\n\n// Create a new bank account\nconst createAccount = async (req, res) => {\n  try {\n    const {\n      type,\n      initialDeposit\n    } = req.body;\n    const userId = req.user.id; // Get authenticated user ID from token\n\n    // Ensure user exists\n    const user = await _user.default.findById(userId);\n    if (!user) return res.status(404).json({\n      error: \"User not found\"\n    });\n\n    // Generate unique account number\n    const accountNumber = (0, _accountHelper.generateAccountNumber)();\n\n    // Create and save the account\n    const newAccount = new _account.default({\n      owner: userId,\n      accountNumber,\n      type,\n      balance: initialDeposit || 0\n    });\n    await newAccount.save();\n    res.status(201).json({\n      message: \"Account created successfully\",\n      data: newAccount\n    });\n  } catch (error) {\n    console.error(\"Error creating account:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n//GET ALL ACCOUNTS\nexports.createAccount = createAccount;\nconst getAllAccounts = async (req, res) => {\n  try {\n    console.log(\"🔍 User Role in Controller:\", req.user.role); //Check user role\n\n    if (![\"admin\", \"staff\"].includes(req.user.role)) {\n      return res.status(403).json({\n        error: \"Access denied. Admins and staff only.\"\n      });\n    }\n    const accounts = await _account.default.find().populate(\"owner\", \"firstName lastName email\");\n    res.status(200).json({\n      data: accounts\n    });\n  } catch (error) {\n    console.error(\"Error fetching accounts:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\nexports.getAllAccounts = getAllAccounts;\nconst getUserAccounts = async (req, res) => {\n  try {\n    const {\n      userId\n    } = req.params; // Get user ID from request params\n    const requesterId = req.user.id; // Get ID from authenticated user\n    const requesterRole = req.user.role; // Get role from authenticated user\n\n    // Only admins/staff can view any user’s account\n    if (requesterRole !== \"admin\" && requesterRole !== \"staff\") {\n      //Users can only view their own accounts\n      if (requesterId !== userId) {\n        return res.status(403).json({\n          error: \"Access denied. You can only view your own accounts.\"\n        });\n      }\n    }\n\n    //Fetch accounts for the given user ID\n    const accounts = await _account.default.find({\n      owner: userId\n    }).populate(\"owner\", \"firstName lastName email\");\n    if (!accounts.length) {\n      return res.status(404).json({\n        error: \"No accounts found for this user\"\n      });\n    }\n    res.status(200).json({\n      data: accounts\n    });\n  } catch (error) {\n    console.error(\"Error fetching user accounts:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n// Update account status (Admin & Staff)\nexports.getUserAccounts = getUserAccounts;\nconst updateAccountStatus = async (req, res) => {\n  try {\n    const {\n      accountId\n    } = req.params;\n    const {\n      status\n    } = req.body;\n    console.log(\"🔍 Role Checking:\", req.user.role); // Debugging\n\n    //Allow only Admin & Staff\n    if (![\"admin\", \"staff\"].includes(req.user.role)) {\n      return res.status(403).json({\n        error: \"Access denied. Admins & Staff only.\"\n      });\n    }\n\n    //Validate status\n    if (![\"active\", \"dormant\", \"closed\"].includes(status)) {\n      return res.status(400).json({\n        error: \"Invalid account status\"\n      });\n    }\n    const account = await _account.default.findByIdAndUpdate(accountId, {\n      status\n    }, {\n      new: true\n    });\n    if (!account) return res.status(404).json({\n      error: \"Account not found\"\n    });\n    res.status(200).json({\n      message: \"Account status updated\",\n      data: account\n    });\n  } catch (error) {\n    console.error(\"Error updating account status:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n// Delete an account (Admin Only)\nexports.updateAccountStatus = updateAccountStatus;\nconst deleteAccount = async (req, res) => {\n  try {\n    const {\n      accountId\n    } = req.params;\n    const account = await _account.default.findByIdAndDelete(accountId);\n    if (!account) return res.status(404).json({\n      error: \"Account not found\"\n    });\n    res.status(200).json({\n      message: \"Account deleted successfully\"\n    });\n  } catch (error) {\n    console.error(\"Error deleting account:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\nexports.deleteAccount = deleteAccount;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYWNjb3VudCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3VzZXIiLCJfYWNjb3VudEhlbHBlciIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImNyZWF0ZUFjY291bnQiLCJyZXEiLCJyZXMiLCJ0eXBlIiwiaW5pdGlhbERlcG9zaXQiLCJib2R5IiwidXNlcklkIiwidXNlciIsImlkIiwiVXNlciIsImZpbmRCeUlkIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiYWNjb3VudE51bWJlciIsImdlbmVyYXRlQWNjb3VudE51bWJlciIsIm5ld0FjY291bnQiLCJBY2NvdW50Iiwib3duZXIiLCJiYWxhbmNlIiwic2F2ZSIsIm1lc3NhZ2UiLCJkYXRhIiwiY29uc29sZSIsImV4cG9ydHMiLCJnZXRBbGxBY2NvdW50cyIsImxvZyIsInJvbGUiLCJpbmNsdWRlcyIsImFjY291bnRzIiwiZmluZCIsInBvcHVsYXRlIiwiZ2V0VXNlckFjY291bnRzIiwicGFyYW1zIiwicmVxdWVzdGVySWQiLCJyZXF1ZXN0ZXJSb2xlIiwibGVuZ3RoIiwidXBkYXRlQWNjb3VudFN0YXR1cyIsImFjY291bnRJZCIsImFjY291bnQiLCJmaW5kQnlJZEFuZFVwZGF0ZSIsIm5ldyIsImRlbGV0ZUFjY291bnQiLCJmaW5kQnlJZEFuZERlbGV0ZSJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxzZXJnZVxcYmFua2EtYXBpXFxzcmNcXGNvbnRyb2xsZXJzXFwiLCJzb3VyY2VzIjpbImFjY291bnRDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbkRldmVsb3BlcnM6XHJcbi0gMjAyNDgvMjAyMiAgU0VSR0UgTVVORVpBXHJcbi0gMjE5MzkvMjAyMyAgTkVFTUEgWkFOSU5LQVxyXG4qL1xyXG5cclxuaW1wb3J0IEFjY291bnQgZnJvbSBcIi4uL21vZGVscy9hY2NvdW50LmpzXCI7XHJcbmltcG9ydCBVc2VyIGZyb20gXCIuLi9tb2RlbHMvdXNlci5qc1wiO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZUFjY291bnROdW1iZXIgfSBmcm9tIFwiLi4vdXRpbHMvYWNjb3VudEhlbHBlci5qc1wiO1xyXG5cclxuLy8gQ3JlYXRlIGEgbmV3IGJhbmsgYWNjb3VudFxyXG5leHBvcnQgY29uc3QgY3JlYXRlQWNjb3VudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHR5cGUsIGluaXRpYWxEZXBvc2l0IH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyLmlkOyAvLyBHZXQgYXV0aGVudGljYXRlZCB1c2VyIElEIGZyb20gdG9rZW5cclxuXHJcbiAgICAvLyBFbnN1cmUgdXNlciBleGlzdHNcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XHJcbiAgICBpZiAoIXVzZXIpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIlVzZXIgbm90IGZvdW5kXCIgfSk7XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgdW5pcXVlIGFjY291bnQgbnVtYmVyXHJcbiAgICBjb25zdCBhY2NvdW50TnVtYmVyID0gZ2VuZXJhdGVBY2NvdW50TnVtYmVyKCk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGFuZCBzYXZlIHRoZSBhY2NvdW50XHJcbiAgICBjb25zdCBuZXdBY2NvdW50ID0gbmV3IEFjY291bnQoe1xyXG4gICAgICBvd25lcjogdXNlcklkLFxyXG4gICAgICBhY2NvdW50TnVtYmVyLFxyXG4gICAgICB0eXBlLFxyXG4gICAgICBiYWxhbmNlOiBpbml0aWFsRGVwb3NpdCB8fCAwLFxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgbmV3QWNjb3VudC5zYXZlKCk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcIkFjY291bnQgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIiwgZGF0YTogbmV3QWNjb3VudCB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNyZWF0aW5nIGFjY291bnQ6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbi8vR0VUIEFMTCBBQ0NPVU5UU1xyXG5leHBvcnQgY29uc3QgZ2V0QWxsQWNjb3VudHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coXCLwn5SNIFVzZXIgUm9sZSBpbiBDb250cm9sbGVyOlwiLCByZXEudXNlci5yb2xlKTsgLy9DaGVjayB1c2VyIHJvbGVcclxuXHJcbiAgICBpZiAoIVtcImFkbWluXCIsIFwic3RhZmZcIl0uaW5jbHVkZXMocmVxLnVzZXIucm9sZSkpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6IFwiQWNjZXNzIGRlbmllZC4gQWRtaW5zIGFuZCBzdGFmZiBvbmx5LlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGFjY291bnRzID0gYXdhaXQgQWNjb3VudC5maW5kKCkucG9wdWxhdGUoXCJvd25lclwiLCBcImZpcnN0TmFtZSBsYXN0TmFtZSBlbWFpbFwiKTtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgZGF0YTogYWNjb3VudHMgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBhY2NvdW50czpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IGdldFVzZXJBY2NvdW50cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtczsgLy8gR2V0IHVzZXIgSUQgZnJvbSByZXF1ZXN0IHBhcmFtc1xyXG4gICAgY29uc3QgcmVxdWVzdGVySWQgPSByZXEudXNlci5pZDsgLy8gR2V0IElEIGZyb20gYXV0aGVudGljYXRlZCB1c2VyXHJcbiAgICBjb25zdCByZXF1ZXN0ZXJSb2xlID0gcmVxLnVzZXIucm9sZTsgLy8gR2V0IHJvbGUgZnJvbSBhdXRoZW50aWNhdGVkIHVzZXJcclxuXHJcbiAgICAvLyBPbmx5IGFkbWlucy9zdGFmZiBjYW4gdmlldyBhbnkgdXNlcuKAmXMgYWNjb3VudFxyXG4gICAgaWYgKHJlcXVlc3RlclJvbGUgIT09IFwiYWRtaW5cIiAmJiByZXF1ZXN0ZXJSb2xlICE9PSBcInN0YWZmXCIpIHtcclxuICAgICAgLy9Vc2VycyBjYW4gb25seSB2aWV3IHRoZWlyIG93biBhY2NvdW50c1xyXG4gICAgICBpZiAocmVxdWVzdGVySWQgIT09IHVzZXJJZCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIkFjY2VzcyBkZW5pZWQuIFlvdSBjYW4gb25seSB2aWV3IHlvdXIgb3duIGFjY291bnRzLlwiIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy9GZXRjaCBhY2NvdW50cyBmb3IgdGhlIGdpdmVuIHVzZXIgSURcclxuICAgIGNvbnN0IGFjY291bnRzID0gYXdhaXQgQWNjb3VudC5maW5kKHsgb3duZXI6IHVzZXJJZCB9KS5wb3B1bGF0ZShcIm93bmVyXCIsIFwiZmlyc3ROYW1lIGxhc3ROYW1lIGVtYWlsXCIpO1xyXG5cclxuICAgIGlmICghYWNjb3VudHMubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIk5vIGFjY291bnRzIGZvdW5kIGZvciB0aGlzIHVzZXJcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IGFjY291bnRzIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgdXNlciBhY2NvdW50czpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBVcGRhdGUgYWNjb3VudCBzdGF0dXMgKEFkbWluICYgU3RhZmYpXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVBY2NvdW50U3RhdHVzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgYWNjb3VudElkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBzdGF0dXMgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFwi8J+UjSBSb2xlIENoZWNraW5nOlwiLCByZXEudXNlci5yb2xlKTsgLy8gRGVidWdnaW5nXHJcblxyXG4gICAgLy9BbGxvdyBvbmx5IEFkbWluICYgU3RhZmZcclxuICAgIGlmICghW1wiYWRtaW5cIiwgXCJzdGFmZlwiXS5pbmNsdWRlcyhyZXEudXNlci5yb2xlKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJBY2Nlc3MgZGVuaWVkLiBBZG1pbnMgJiBTdGFmZiBvbmx5LlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vVmFsaWRhdGUgc3RhdHVzXHJcbiAgICBpZiAoIVtcImFjdGl2ZVwiLCBcImRvcm1hbnRcIiwgXCJjbG9zZWRcIl0uaW5jbHVkZXMoc3RhdHVzKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIGFjY291bnQgc3RhdHVzXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IEFjY291bnQuZmluZEJ5SWRBbmRVcGRhdGUoYWNjb3VudElkLCB7IHN0YXR1cyB9LCB7IG5ldzogdHJ1ZSB9KTtcclxuICAgIGlmICghYWNjb3VudCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiQWNjb3VudCBub3QgZm91bmRcIiB9KTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiQWNjb3VudCBzdGF0dXMgdXBkYXRlZFwiLCBkYXRhOiBhY2NvdW50IH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgYWNjb3VudCBzdGF0dXM6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRGVsZXRlIGFuIGFjY291bnQgKEFkbWluIE9ubHkpXHJcbmV4cG9ydCBjb25zdCBkZWxldGVBY2NvdW50ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgYWNjb3VudElkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBBY2NvdW50LmZpbmRCeUlkQW5kRGVsZXRlKGFjY291bnRJZCk7XHJcbiAgICBpZiAoIWFjY291bnQpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIkFjY291bnQgbm90IGZvdW5kXCIgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIkFjY291bnQgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIiB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRlbGV0aW5nIGFjY291bnQ6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVy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","map":{"version":3,"names":["_account","_interopRequireDefault","require","_user","_accountHelper","e","__esModule","default","createAccount","req","res","type","initialDeposit","body","userId","user","id","User","findById","status","json","error","accountNumber","generateAccountNumber","newAccount","Account","owner","balance","save","message","data","console","exports","getAllAccounts","log","role","includes","accounts","find","populate","getUserAccounts","params","requesterId","requesterRole","length","updateAccountStatus","accountId","account","findByIdAndUpdate","new","deleteAccount","findByIdAndDelete"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\controllers\\","sources":["accountController.js"],"sourcesContent":["/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\r\n\r\nimport Account from \"../models/account.js\";\r\nimport User from \"../models/user.js\";\r\nimport { generateAccountNumber } from \"../utils/accountHelper.js\";\r\n\r\n// Create a new bank account\r\nexport const createAccount = async (req, res) => {\r\n  try {\r\n    const { type, initialDeposit } = req.body;\r\n    const userId = req.user.id; // Get authenticated user ID from token\r\n\r\n    // Ensure user exists\r\n    const user = await User.findById(userId);\r\n    if (!user) return res.status(404).json({ error: \"User not found\" });\r\n\r\n    // Generate unique account number\r\n    const accountNumber = generateAccountNumber();\r\n\r\n    // Create and save the account\r\n    const newAccount = new Account({\r\n      owner: userId,\r\n      accountNumber,\r\n      type,\r\n      balance: initialDeposit || 0,\r\n    });\r\n\r\n    await newAccount.save();\r\n\r\n    res.status(201).json({ message: \"Account created successfully\", data: newAccount });\r\n  } catch (error) {\r\n    console.error(\"Error creating account:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n\r\n\r\n//GET ALL ACCOUNTS\r\nexport const getAllAccounts = async (req, res) => {\r\n  try {\r\n    console.log(\"🔍 User Role in Controller:\", req.user.role); //Check user role\r\n\r\n    if (![\"admin\", \"staff\"].includes(req.user.role)) {\r\n      return res.status(403).json({ error: \"Access denied. Admins and staff only.\" });\r\n    }\r\n\r\n    const accounts = await Account.find().populate(\"owner\", \"firstName lastName email\");\r\n    res.status(200).json({ data: accounts });\r\n  } catch (error) {\r\n    console.error(\"Error fetching accounts:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n\r\n\r\nexport const getUserAccounts = async (req, res) => {\r\n  try {\r\n    const { userId } = req.params; // Get user ID from request params\r\n    const requesterId = req.user.id; // Get ID from authenticated user\r\n    const requesterRole = req.user.role; // Get role from authenticated user\r\n\r\n    // Only admins/staff can view any user’s account\r\n    if (requesterRole !== \"admin\" && requesterRole !== \"staff\") {\r\n      //Users can only view their own accounts\r\n      if (requesterId !== userId) {\r\n        return res.status(403).json({ error: \"Access denied. You can only view your own accounts.\" });\r\n      }\r\n    }\r\n\r\n    //Fetch accounts for the given user ID\r\n    const accounts = await Account.find({ owner: userId }).populate(\"owner\", \"firstName lastName email\");\r\n\r\n    if (!accounts.length) {\r\n      return res.status(404).json({ error: \"No accounts found for this user\" });\r\n    }\r\n\r\n    res.status(200).json({ data: accounts });\r\n  } catch (error) {\r\n    console.error(\"Error fetching user accounts:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n\r\n// Update account status (Admin & Staff)\r\nexport const updateAccountStatus = async (req, res) => {\r\n  try {\r\n    const { accountId } = req.params;\r\n    const { status } = req.body;\r\n\r\n    console.log(\"🔍 Role Checking:\", req.user.role); // Debugging\r\n\r\n    //Allow only Admin & Staff\r\n    if (![\"admin\", \"staff\"].includes(req.user.role)) {\r\n      return res.status(403).json({ error: \"Access denied. Admins & Staff only.\" });\r\n    }\r\n\r\n    //Validate status\r\n    if (![\"active\", \"dormant\", \"closed\"].includes(status)) {\r\n      return res.status(400).json({ error: \"Invalid account status\" });\r\n    }\r\n\r\n    const account = await Account.findByIdAndUpdate(accountId, { status }, { new: true });\r\n    if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n    res.status(200).json({ message: \"Account status updated\", data: account });\r\n  } catch (error) {\r\n    console.error(\"Error updating account status:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n\r\n// Delete an account (Admin Only)\r\nexport const deleteAccount = async (req, res) => {\r\n  try {\r\n    const { accountId } = req.params;\r\n\r\n    const account = await Account.findByIdAndDelete(accountId);\r\n    if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n    res.status(200).json({ message: \"Account deleted successfully\" });\r\n  } catch (error) {\r\n    console.error(\"Error deleting account:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1742644210090},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\models\\\\account.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\n\nconst accountSchema = new _mongoose.default.Schema({\n  owner: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: \"User\",\n    required: true\n  },\n  // Link to User model\n  accountNumber: {\n    type: String,\n    unique: true,\n    required: true\n  },\n  type: {\n    type: String,\n    enum: [\"savings\", \"current\"],\n    required: true\n  },\n  balance: {\n    type: Number,\n    default: 0\n  },\n  status: {\n    type: String,\n    enum: [\"active\", \"dormant\", \"closed\"],\n    default: \"active\"\n  }\n}, {\n  timestamps: true\n});\nvar _default = exports.default = _mongoose.default.model(\"Account\", accountSchema);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImFjY291bnRTY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsIm93bmVyIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJyZXF1aXJlZCIsImFjY291bnROdW1iZXIiLCJTdHJpbmciLCJ1bmlxdWUiLCJlbnVtIiwiYmFsYW5jZSIsIk51bWJlciIsInN0YXR1cyIsInRpbWVzdGFtcHMiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxzZXJnZVxcYmFua2EtYXBpXFxzcmNcXG1vZGVsc1xcIiwic291cmNlcyI6WyJhY2NvdW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbkRldmVsb3BlcnM6XHJcbi0gMjAyNDgvMjAyMiAgU0VSR0UgTVVORVpBXHJcbi0gMjE5MzkvMjAyMyAgTkVFTUEgWkFOSU5LQVxyXG4qL1xyXG5cclxuaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuY29uc3QgYWNjb3VudFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXHJcbiAge1xyXG4gICAgb3duZXI6IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiVXNlclwiLCByZXF1aXJlZDogdHJ1ZSB9LCAvLyBMaW5rIHRvIFVzZXIgbW9kZWxcclxuICAgIGFjY291bnROdW1iZXI6IHsgdHlwZTogU3RyaW5nLCB1bmlxdWU6IHRydWUsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICB0eXBlOiB7IHR5cGU6IFN0cmluZywgZW51bTogW1wic2F2aW5nc1wiLCBcImN1cnJlbnRcIl0sIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICBiYWxhbmNlOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxyXG4gICAgc3RhdHVzOiB7IHR5cGU6IFN0cmluZywgZW51bTogW1wiYWN0aXZlXCIsIFwiZG9ybWFudFwiLCBcImNsb3NlZFwiXSwgZGVmYXVsdDogXCJhY3RpdmVcIiB9LFxyXG4gIH0sXHJcbiAgeyB0aW1lc3RhbXBzOiB0cnVlIH1cclxuKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlLm1vZGVsKFwiQWNjb3VudFwiLCBhY2NvdW50U2NoZW1hKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFNQSxJQUFBQSxTQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFBZ0MsU0FBQUQsdUJBQUFFLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFOaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJQSxNQUFNRyxhQUFhLEdBQUcsSUFBSUMsaUJBQVEsQ0FBQ0MsTUFBTSxDQUN2QztFQUNFQyxLQUFLLEVBQUU7SUFBRUMsSUFBSSxFQUFFSCxpQkFBUSxDQUFDQyxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUUsTUFBTTtJQUFFQyxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQUU7RUFDOUVDLGFBQWEsRUFBRTtJQUFFTCxJQUFJLEVBQUVNLE1BQU07SUFBRUMsTUFBTSxFQUFFLElBQUk7SUFBRUgsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUM3REosSUFBSSxFQUFFO0lBQUVBLElBQUksRUFBRU0sTUFBTTtJQUFFRSxJQUFJLEVBQUUsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDO0lBQUVKLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDcEVLLE9BQU8sRUFBRTtJQUFFVCxJQUFJLEVBQUVVLE1BQU07SUFBRWYsT0FBTyxFQUFFO0VBQUUsQ0FBQztFQUNyQ2dCLE1BQU0sRUFBRTtJQUFFWCxJQUFJLEVBQUVNLE1BQU07SUFBRUUsSUFBSSxFQUFFLENBQUMsUUFBUSxFQUFFLFNBQVMsRUFBRSxRQUFRLENBQUM7SUFBRWIsT0FBTyxFQUFFO0VBQVM7QUFDbkYsQ0FBQyxFQUNEO0VBQUVpQixVQUFVLEVBQUU7QUFBSyxDQUNyQixDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFuQixPQUFBLEdBRWFFLGlCQUFRLENBQUNrQixLQUFLLENBQUMsU0FBUyxFQUFFbkIsYUFBYSxDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","e","__esModule","default","accountSchema","mongoose","Schema","owner","type","Types","ObjectId","ref","required","accountNumber","String","unique","enum","balance","Number","status","timestamps","_default","exports","model"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\models\\","sources":["account.js"],"sourcesContent":["/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\r\n\r\nimport mongoose from \"mongoose\";\r\n\r\nconst accountSchema = new mongoose.Schema(\r\n  {\r\n    owner: { type: mongoose.Schema.Types.ObjectId, ref: \"User\", required: true }, // Link to User model\r\n    accountNumber: { type: String, unique: true, required: true },\r\n    type: { type: String, enum: [\"savings\", \"current\"], required: true },\r\n    balance: { type: Number, default: 0 },\r\n    status: { type: String, enum: [\"active\", \"dormant\", \"closed\"], default: \"active\" },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nexport default mongoose.model(\"Account\", accountSchema);\r\n"],"mappings":";;;;;;AAMA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAgC,SAAAD,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AANhC;AACA;AACA;AACA;AACA;;AAIA,MAAMG,aAAa,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CACvC;EACEC,KAAK,EAAE;IAAEC,IAAI,EAAEH,iBAAQ,CAACC,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAAE;EAC9EC,aAAa,EAAE;IAAEL,IAAI,EAAEM,MAAM;IAAEC,MAAM,EAAE,IAAI;IAAEH,QAAQ,EAAE;EAAK,CAAC;EAC7DJ,IAAI,EAAE;IAAEA,IAAI,EAAEM,MAAM;IAAEE,IAAI,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC;IAAEJ,QAAQ,EAAE;EAAK,CAAC;EACpEK,OAAO,EAAE;IAAET,IAAI,EAAEU,MAAM;IAAEf,OAAO,EAAE;EAAE,CAAC;EACrCgB,MAAM,EAAE;IAAEX,IAAI,EAAEM,MAAM;IAAEE,IAAI,EAAE,CAAC,QAAQ,EAAE,SAAS,EAAE,QAAQ,CAAC;IAAEb,OAAO,EAAE;EAAS;AACnF,CAAC,EACD;EAAEiB,UAAU,EAAE;AAAK,CACrB,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAnB,OAAA,GAEaE,iBAAQ,CAACkB,KAAK,CAAC,SAAS,EAAEnB,aAAa,CAAC","ignoreList":[]}},"mtime":1742644710749},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\utils\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\utils\\\\accountHelper.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.generateAccountNumber = void 0;\nconst generateAccountNumber = () => {\n  return \"BA\" + Math.floor(1000000000 + Math.random() * 9000000000).toString();\n};\nexports.generateAccountNumber = generateAccountNumber;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZW5lcmF0ZUFjY291bnROdW1iZXIiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0b1N0cmluZyIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcc2VyZ2VcXGJhbmthLWFwaVxcc3JjXFx1dGlsc1xcIiwic291cmNlcyI6WyJhY2NvdW50SGVscGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBnZW5lcmF0ZUFjY291bnROdW1iZXIgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gXCJCQVwiICsgTWF0aC5mbG9vcigxMDAwMDAwMDAwICsgTWF0aC5yYW5kb20oKSAqIDkwMDAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgfTtcclxuICAiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFPLE1BQU1BLHFCQUFxQixHQUFHQSxDQUFBLEtBQU07RUFDdkMsT0FBTyxJQUFJLEdBQUdDLElBQUksQ0FBQ0MsS0FBSyxDQUFDLFVBQVUsR0FBR0QsSUFBSSxDQUFDRSxNQUFNLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDQyxRQUFRLENBQUMsQ0FBQztBQUM5RSxDQUFDO0FBQUNDLE9BQUEsQ0FBQUwscUJBQUEsR0FBQUEscUJBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["generateAccountNumber","Math","floor","random","toString","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\utils\\","sources":["accountHelper.js"],"sourcesContent":["export const generateAccountNumber = () => {\r\n    return \"BA\" + Math.floor(1000000000 + Math.random() * 9000000000).toString();\r\n  };\r\n  "],"mappings":";;;;;;AAAO,MAAMA,qBAAqB,GAAGA,CAAA,KAAM;EACvC,OAAO,IAAI,GAAGC,IAAI,CAACC,KAAK,CAAC,UAAU,GAAGD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,UAAU,CAAC,CAACC,QAAQ,CAAC,CAAC;AAC9E,CAAC;AAACC,OAAA,CAAAL,qBAAA,GAAAA,qBAAA","ignoreList":[]}},"mtime":1742464439676},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\routes\\\\protectedRoutes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _authMiddleware = require(\"../middleware/authMiddleware.js\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst router = _express.default.Router();\nrouter.get(\"/\", _authMiddleware.verifyToken, (req, res) => {\n  res.status(200).json({\n    message: \"Authorized access\"\n  });\n});\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2F1dGhNaWRkbGV3YXJlIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0Iiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsInZlcmlmeVRva2VuIiwicmVxIiwicmVzIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcc2VyZ2VcXGJhbmthLWFwaVxcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsicHJvdGVjdGVkUm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSBcIi4uL21pZGRsZXdhcmUvYXV0aE1pZGRsZXdhcmUuanNcIjtcclxuXHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIuZ2V0KFwiL1wiLCB2ZXJpZnlUb2tlbiwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIkF1dGhvcml6ZWQgYWNjZXNzXCIgfSk7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGVBQUEsR0FBQUQsT0FBQTtBQUE4RCxTQUFBRCx1QkFBQUcsQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUU5RCxNQUFNRyxNQUFNLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0FBRS9CRixNQUFNLENBQUNHLEdBQUcsQ0FBQyxHQUFHLEVBQUVDLDJCQUFXLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDekNBLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7SUFBRUMsT0FBTyxFQUFFO0VBQW9CLENBQUMsQ0FBQztBQUN4RCxDQUFDLENBQUM7QUFBQyxJQUFBQyxRQUFBLEdBQUFDLE9BQUEsQ0FBQVosT0FBQSxHQUVZQyxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_express","_interopRequireDefault","require","_authMiddleware","e","__esModule","default","router","express","Router","get","verifyToken","req","res","status","json","message","_default","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\routes\\","sources":["protectedRoutes.js"],"sourcesContent":["import express from \"express\";\r\nimport { verifyToken } from \"../middleware/authMiddleware.js\";\r\n\r\nconst router = express.Router();\r\n\r\nrouter.get(\"/\", verifyToken, (req, res) => {\r\n  res.status(200).json({ message: \"Authorized access\" });\r\n});\r\n\r\nexport default router;\r\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,eAAA,GAAAD,OAAA;AAA8D,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE9D,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,CAAC,CAAC;AAE/BF,MAAM,CAACG,GAAG,CAAC,GAAG,EAAEC,2BAAW,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EACzCA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAAEC,OAAO,EAAE;EAAoB,CAAC,CAAC;AACxD,CAAC,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAZ,OAAA,GAEYC,MAAM","ignoreList":[]}},"mtime":1742463564937},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\middleware\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\middleware\\\\authMiddleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.verifyToken = exports.isStaff = exports.isAdmin = exports.adminOrStaffAuth = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// // import jwt from \"jsonwebtoken\";\n// // import dotenv from \"dotenv\";\n// // dotenv.config();\n\n// // // Verify Token\n// // export const verifyToken = (req, res, next) => {\n// //   const token = req.header(\"Authorization\")?.split(\" \")[1]; // Extract token\n// //   if (!token) return res.status(401).json({ error: \"Access denied. No token provided.\" });\n\n// //   try {\n// //     const decoded = jwt.verify(token, process.env.JWT_SECRET);\n// //     req.user = decoded;\n// //     next();\n// //   } catch (err) {\n// //     res.status(403).json({ error: \"Invalid or expired token\" });\n// //   }\n// // };\n\n// // export const adminOrStaffAuth = (req, res, next) => {\n// //   console.log(\"🔍 Middleware Role Check:\", req.user.role); // ✅ Debugging\n\n// //   if (![\"admin\", \"staff\"].includes(req.user.role)) {\n// //     return res.status(403).json({ error: \"Access denied. Admins and staff only.\" });\n// //   }\n\n// //   next();\n// // };\n\n// // // Admin Middleware\n// // export const isAdmin = (req, res, next) => {\n// //   if (req.user.role !== \"admin\") {\n// //     return res.status(403).json({ error: \"Access denied. Admins only.\" });\n// //   }\n// //   next();\n// // };\n\n_dotenv.default.config();\n\n//-------------------------------------------------\n// ✅ Verify Token Middleware\nconst verifyToken = (req, res, next) => {\n  try {\n    const authHeader = req.header(\"Authorization\");\n    if (!authHeader) {\n      return res.status(401).json({\n        error: \"Access denied. No token provided.\"\n      });\n    }\n    const token = authHeader.split(\" \")[1]; // Extract Bearer token\n    if (!token) {\n      return res.status(401).json({\n        error: \"Invalid token format. Use 'Bearer <token>'\"\n      });\n    }\n    const decoded = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET);\n    req.user = decoded;\n    next();\n  } catch (err) {\n    console.error(\"❌ Token Verification Error:\", err.message); // ✅ Debugging\n    res.status(403).json({\n      error: \"Invalid or expired token\"\n    });\n  }\n};\n//----------------------------------------------------------------\n\n//---added\n// ✅ Staff Middleware\nexports.verifyToken = verifyToken;\nconst isStaff = (req, res, next) => {\n  if (!req.user || req.user.role !== \"staff\") {\n    return res.status(403).json({\n      error: \"Access denied. Staff only.\"\n    });\n  }\n  next();\n};\n//---added\n\n// ✅ Admin or Staff Middleware\nexports.isStaff = isStaff;\nconst adminOrStaffAuth = (req, res, next) => {\n  console.log(\"🔍 Middleware Role Check:\", req.user?.role); // ✅ Debugging\n\n  if (!req.user || ![\"admin\", \"staff\"].includes(req.user.role)) {\n    return res.status(403).json({\n      error: \"Access denied. Admins and staff only.\"\n    });\n  }\n  next();\n};\n\n// ✅ Admin Middleware\nexports.adminOrStaffAuth = adminOrStaffAuth;\nconst isAdmin = (req, res, next) => {\n  if (!req.user || req.user.role !== \"admin\") {\n    return res.status(403).json({\n      error: \"Access denied. Admins only.\"\n    });\n  }\n  next();\n};\n//\n// import jwt from \"jsonwebtoken\";\n// import dotenv from \"dotenv\";\n// dotenv.config();\n\n// // ✅ Verify Token Middleware\n// export const verifyToken = (req, res, next) => {\n//   try {\n//     const authHeader = req.header(\"Authorization\");\n//     if (!authHeader) {\n//       return res.status(401).json({ error: \"Access denied. No token provided.\" });\n//     }\n\n//     const token = authHeader.split(\" \")[1]; // Extract Bearer token\n//     if (!token) {\n//       return res.status(401).json({ error: \"Invalid token format. Use 'Bearer <token>'\" });\n//     }\n\n//     const decoded = jwt.verify(token, process.env.JWT_SECRET);\n//     if (!decoded.id) {\n//       return res.status(403).json({ error: \"Invalid token: User ID missing\" });\n//     }\n\n//     req.user = decoded; // ✅ Ensure `req.user.id` is set\n//     console.log(\"🔍 Token Decoded:\", req.user);\n//     next();\n//   } catch (err) {\n//     console.error(\"❌ Token Verification Error:\", err.message);\n//     res.status(403).json({ error: \"Invalid or expired token\" });\n//   }\n// };\n\n// // ✅ Admin or Staff Middleware\n// export const adminOrStaffAuth = (req, res, next) => {\n//   if (!req.user) {\n//     console.error(\"❌ Unauthorized Access: No user found in request.\");\n//     return res.status(403).json({ error: \"Access denied. Admins and staff only.\" });\n//   }\n\n//   console.log(\"🔍 Middleware Role Check:\", req.user.role);\n\n//   if (![\"admin\", \"staff\"].includes(req.user.role)) {\n//     return res.status(403).json({ error: \"Access denied. Admins and staff only.\" });\n//   }\n\n//   next();\n// };\n\n// // ✅ Admin Middleware\n// export const isAdmin = (req, res, next) => {\n//   if (!req.user) {\n//     console.error(\"❌ Unauthorized Access: No user found in request.\");\n//     return res.status(403).json({ error: \"Access denied. Admins only.\" });\n//   }\n\n//   if (req.user.role !== \"admin\") {\n//     return res.status(403).json({ error: \"Access denied. Admins only.\" });\n//   }\n\n//   next();\n// };\nexports.isAdmin = isAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZG90ZW52IiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiZG90ZW52IiwiY29uZmlnIiwidmVyaWZ5VG9rZW4iLCJyZXEiLCJyZXMiLCJuZXh0IiwiYXV0aEhlYWRlciIsImhlYWRlciIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInRva2VuIiwic3BsaXQiLCJkZWNvZGVkIiwiand0IiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJ1c2VyIiwiZXJyIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJleHBvcnRzIiwiaXNTdGFmZiIsInJvbGUiLCJhZG1pbk9yU3RhZmZBdXRoIiwibG9nIiwiaW5jbHVkZXMiLCJpc0FkbWluIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXHNlcmdlXFxiYW5rYS1hcGlcXHNyY1xcbWlkZGxld2FyZVxcIiwic291cmNlcyI6WyJhdXRoTWlkZGxld2FyZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLy8gLy8gaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XHJcbi8vIC8vIGltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xyXG4vLyAvLyBkb3RlbnYuY29uZmlnKCk7XHJcblxyXG4vLyAvLyAvLyBWZXJpZnkgVG9rZW5cclxuLy8gLy8gZXhwb3J0IGNvbnN0IHZlcmlmeVRva2VuID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbi8vIC8vICAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVyKFwiQXV0aG9yaXphdGlvblwiKT8uc3BsaXQoXCIgXCIpWzFdOyAvLyBFeHRyYWN0IHRva2VuXHJcbi8vIC8vICAgaWYgKCF0b2tlbikgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IFwiQWNjZXNzIGRlbmllZC4gTm8gdG9rZW4gcHJvdmlkZWQuXCIgfSk7XHJcblxyXG4vLyAvLyAgIHRyeSB7XHJcbi8vIC8vICAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCk7XHJcbi8vIC8vICAgICByZXEudXNlciA9IGRlY29kZWQ7XHJcbi8vIC8vICAgICBuZXh0KCk7XHJcbi8vIC8vICAgfSBjYXRjaCAoZXJyKSB7XHJcbi8vIC8vICAgICByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIkludmFsaWQgb3IgZXhwaXJlZCB0b2tlblwiIH0pO1xyXG4vLyAvLyAgIH1cclxuLy8gLy8gfTtcclxuXHJcbi8vIC8vIGV4cG9ydCBjb25zdCBhZG1pbk9yU3RhZmZBdXRoID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbi8vIC8vICAgY29uc29sZS5sb2coXCLwn5SNIE1pZGRsZXdhcmUgUm9sZSBDaGVjazpcIiwgcmVxLnVzZXIucm9sZSk7IC8vIOKchSBEZWJ1Z2dpbmdcclxuXHJcbi8vIC8vICAgaWYgKCFbXCJhZG1pblwiLCBcInN0YWZmXCJdLmluY2x1ZGVzKHJlcS51c2VyLnJvbGUpKSB7XHJcbi8vIC8vICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJBY2Nlc3MgZGVuaWVkLiBBZG1pbnMgYW5kIHN0YWZmIG9ubHkuXCIgfSk7XHJcbi8vIC8vICAgfVxyXG5cclxuLy8gLy8gICBuZXh0KCk7XHJcbi8vIC8vIH07XHJcblxyXG5cclxuLy8gLy8gLy8gQWRtaW4gTWlkZGxld2FyZVxyXG4vLyAvLyBleHBvcnQgY29uc3QgaXNBZG1pbiA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4vLyAvLyAgIGlmIChyZXEudXNlci5yb2xlICE9PSBcImFkbWluXCIpIHtcclxuLy8gLy8gICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIkFjY2VzcyBkZW5pZWQuIEFkbWlucyBvbmx5LlwiIH0pO1xyXG4vLyAvLyAgIH1cclxuLy8gLy8gICBuZXh0KCk7XHJcbi8vIC8vIH07XHJcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xyXG5pbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcclxuZG90ZW52LmNvbmZpZygpO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIOKchSBWZXJpZnkgVG9rZW4gTWlkZGxld2FyZVxyXG5leHBvcnQgY29uc3QgdmVyaWZ5VG9rZW4gPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXIoXCJBdXRob3JpemF0aW9uXCIpO1xyXG4gICAgaWYgKCFhdXRoSGVhZGVyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIkFjY2VzcyBkZW5pZWQuIE5vIHRva2VuIHByb3ZpZGVkLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zcGxpdChcIiBcIilbMV07IC8vIEV4dHJhY3QgQmVhcmVyIHRva2VuXHJcbiAgICBpZiAoIXRva2VuKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIkludmFsaWQgdG9rZW4gZm9ybWF0LiBVc2UgJ0JlYXJlciA8dG9rZW4+J1wiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKTtcclxuICAgIHJlcS51c2VyID0gZGVjb2RlZDtcclxuICAgIG5leHQoKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgVG9rZW4gVmVyaWZpY2F0aW9uIEVycm9yOlwiLCBlcnIubWVzc2FnZSk7IC8vIOKchSBEZWJ1Z2dpbmdcclxuICAgIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCBvciBleHBpcmVkIHRva2VuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbi8vLS0tYWRkZWRcclxuLy8g4pyFIFN0YWZmIE1pZGRsZXdhcmVcclxuZXhwb3J0IGNvbnN0IGlzU3RhZmYgPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICBpZiAoIXJlcS51c2VyIHx8IHJlcS51c2VyLnJvbGUgIT09IFwic3RhZmZcIikge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6IFwiQWNjZXNzIGRlbmllZC4gU3RhZmYgb25seS5cIiB9KTtcclxuICB9XHJcbiAgbmV4dCgpO1xyXG59O1xyXG4vLy0tLWFkZGVkXHJcblxyXG4vLyDinIUgQWRtaW4gb3IgU3RhZmYgTWlkZGxld2FyZVxyXG5leHBvcnQgY29uc3QgYWRtaW5PclN0YWZmQXV0aCA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKFwi8J+UjSBNaWRkbGV3YXJlIFJvbGUgQ2hlY2s6XCIsIHJlcS51c2VyPy5yb2xlKTsgLy8g4pyFIERlYnVnZ2luZ1xyXG5cclxuICBpZiAoIXJlcS51c2VyIHx8ICFbXCJhZG1pblwiLCBcInN0YWZmXCJdLmluY2x1ZGVzKHJlcS51c2VyLnJvbGUpKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJBY2Nlc3MgZGVuaWVkLiBBZG1pbnMgYW5kIHN0YWZmIG9ubHkuXCIgfSk7XHJcbiAgfVxyXG5cclxuICBuZXh0KCk7XHJcbn07XHJcblxyXG4vLyDinIUgQWRtaW4gTWlkZGxld2FyZVxyXG5leHBvcnQgY29uc3QgaXNBZG1pbiA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIGlmICghcmVxLnVzZXIgfHwgcmVxLnVzZXIucm9sZSAhPT0gXCJhZG1pblwiKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJBY2Nlc3MgZGVuaWVkLiBBZG1pbnMgb25seS5cIiB9KTtcclxuICB9XHJcbiAgbmV4dCgpO1xyXG59O1xyXG4vL1xyXG4vLyBpbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcclxuLy8gaW1wb3J0IGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XHJcbi8vIGRvdGVudi5jb25maWcoKTtcclxuXHJcbi8vIC8vIOKchSBWZXJpZnkgVG9rZW4gTWlkZGxld2FyZVxyXG4vLyBleHBvcnQgY29uc3QgdmVyaWZ5VG9rZW4gPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuLy8gICB0cnkge1xyXG4vLyAgICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXIoXCJBdXRob3JpemF0aW9uXCIpO1xyXG4vLyAgICAgaWYgKCFhdXRoSGVhZGVyKSB7XHJcbi8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIkFjY2VzcyBkZW5pZWQuIE5vIHRva2VuIHByb3ZpZGVkLlwiIH0pO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zcGxpdChcIiBcIilbMV07IC8vIEV4dHJhY3QgQmVhcmVyIHRva2VuXHJcbi8vICAgICBpZiAoIXRva2VuKSB7XHJcbi8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIkludmFsaWQgdG9rZW4gZm9ybWF0LiBVc2UgJ0JlYXJlciA8dG9rZW4+J1wiIH0pO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKTtcclxuLy8gICAgIGlmICghZGVjb2RlZC5pZCkge1xyXG4vLyAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIHRva2VuOiBVc2VyIElEIG1pc3NpbmdcIiB9KTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICByZXEudXNlciA9IGRlY29kZWQ7IC8vIOKchSBFbnN1cmUgYHJlcS51c2VyLmlkYCBpcyBzZXRcclxuLy8gICAgIGNvbnNvbGUubG9nKFwi8J+UjSBUb2tlbiBEZWNvZGVkOlwiLCByZXEudXNlcik7XHJcbi8vICAgICBuZXh0KCk7XHJcbi8vICAgfSBjYXRjaCAoZXJyKSB7XHJcbi8vICAgICBjb25zb2xlLmVycm9yKFwi4p2MIFRva2VuIFZlcmlmaWNhdGlvbiBFcnJvcjpcIiwgZXJyLm1lc3NhZ2UpO1xyXG4vLyAgICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIG9yIGV4cGlyZWQgdG9rZW5cIiB9KTtcclxuLy8gICB9XHJcbi8vIH07XHJcblxyXG4vLyAvLyDinIUgQWRtaW4gb3IgU3RhZmYgTWlkZGxld2FyZVxyXG4vLyBleHBvcnQgY29uc3QgYWRtaW5PclN0YWZmQXV0aCA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4vLyAgIGlmICghcmVxLnVzZXIpIHtcclxuLy8gICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgVW5hdXRob3JpemVkIEFjY2VzczogTm8gdXNlciBmb3VuZCBpbiByZXF1ZXN0LlwiKTtcclxuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIkFjY2VzcyBkZW5pZWQuIEFkbWlucyBhbmQgc3RhZmYgb25seS5cIiB9KTtcclxuLy8gICB9XHJcblxyXG4vLyAgIGNvbnNvbGUubG9nKFwi8J+UjSBNaWRkbGV3YXJlIFJvbGUgQ2hlY2s6XCIsIHJlcS51c2VyLnJvbGUpO1xyXG5cclxuLy8gICBpZiAoIVtcImFkbWluXCIsIFwic3RhZmZcIl0uaW5jbHVkZXMocmVxLnVzZXIucm9sZSkpIHtcclxuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIkFjY2VzcyBkZW5pZWQuIEFkbWlucyBhbmQgc3RhZmYgb25seS5cIiB9KTtcclxuLy8gICB9XHJcblxyXG4vLyAgIG5leHQoKTtcclxuLy8gfTtcclxuXHJcbi8vIC8vIOKchSBBZG1pbiBNaWRkbGV3YXJlXHJcbi8vIGV4cG9ydCBjb25zdCBpc0FkbWluID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbi8vICAgaWYgKCFyZXEudXNlcikge1xyXG4vLyAgICAgY29uc29sZS5lcnJvcihcIuKdjCBVbmF1dGhvcml6ZWQgQWNjZXNzOiBObyB1c2VyIGZvdW5kIGluIHJlcXVlc3QuXCIpO1xyXG4vLyAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6IFwiQWNjZXNzIGRlbmllZC4gQWRtaW5zIG9ubHkuXCIgfSk7XHJcbi8vICAgfVxyXG5cclxuLy8gICBpZiAocmVxLnVzZXIucm9sZSAhPT0gXCJhZG1pblwiKSB7XHJcbi8vICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJBY2Nlc3MgZGVuaWVkLiBBZG1pbnMgb25seS5cIiB9KTtcclxuLy8gICB9XHJcblxyXG4vLyAgIG5leHQoKTtcclxuLy8gfTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFxQ0EsSUFBQUEsYUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQTRCLFNBQUFELHVCQUFBRyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBckM1QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBRyxlQUFNLENBQUNDLE1BQU0sQ0FBQyxDQUFDOztBQUVmO0FBQ0E7QUFDTyxNQUFNQyxXQUFXLEdBQUdBLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDN0MsSUFBSTtJQUNGLE1BQU1DLFVBQVUsR0FBR0gsR0FBRyxDQUFDSSxNQUFNLENBQUMsZUFBZSxDQUFDO0lBQzlDLElBQUksQ0FBQ0QsVUFBVSxFQUFFO01BQ2YsT0FBT0YsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxLQUFLLEVBQUU7TUFBb0MsQ0FBQyxDQUFDO0lBQzdFO0lBRUEsTUFBTUMsS0FBSyxHQUFHTCxVQUFVLENBQUNNLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3hDLElBQUksQ0FBQ0QsS0FBSyxFQUFFO01BQ1YsT0FBT1AsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxLQUFLLEVBQUU7TUFBNkMsQ0FBQyxDQUFDO0lBQ3RGO0lBRUEsTUFBTUcsT0FBTyxHQUFHQyxxQkFBRyxDQUFDQyxNQUFNLENBQUNKLEtBQUssRUFBRUssT0FBTyxDQUFDQyxHQUFHLENBQUNDLFVBQVUsQ0FBQztJQUN6RGYsR0FBRyxDQUFDZ0IsSUFBSSxHQUFHTixPQUFPO0lBQ2xCUixJQUFJLENBQUMsQ0FBQztFQUNSLENBQUMsQ0FBQyxPQUFPZSxHQUFHLEVBQUU7SUFDWkMsT0FBTyxDQUFDWCxLQUFLLENBQUMsNkJBQTZCLEVBQUVVLEdBQUcsQ0FBQ0UsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUMzRGxCLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsS0FBSyxFQUFFO0lBQTJCLENBQUMsQ0FBQztFQUM3RDtBQUNGLENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQUFhLE9BQUEsQ0FBQXJCLFdBQUEsR0FBQUEsV0FBQTtBQUNPLE1BQU1zQixPQUFPLEdBQUdBLENBQUNyQixHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ3pDLElBQUksQ0FBQ0YsR0FBRyxDQUFDZ0IsSUFBSSxJQUFJaEIsR0FBRyxDQUFDZ0IsSUFBSSxDQUFDTSxJQUFJLEtBQUssT0FBTyxFQUFFO0lBQzFDLE9BQU9yQixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLEtBQUssRUFBRTtJQUE2QixDQUFDLENBQUM7RUFDdEU7RUFDQUwsSUFBSSxDQUFDLENBQUM7QUFDUixDQUFDO0FBQ0Q7O0FBRUE7QUFBQWtCLE9BQUEsQ0FBQUMsT0FBQSxHQUFBQSxPQUFBO0FBQ08sTUFBTUUsZ0JBQWdCLEdBQUdBLENBQUN2QixHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ2xEZ0IsT0FBTyxDQUFDTSxHQUFHLENBQUMsMkJBQTJCLEVBQUV4QixHQUFHLENBQUNnQixJQUFJLEVBQUVNLElBQUksQ0FBQyxDQUFDLENBQUM7O0VBRTFELElBQUksQ0FBQ3RCLEdBQUcsQ0FBQ2dCLElBQUksSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDUyxRQUFRLENBQUN6QixHQUFHLENBQUNnQixJQUFJLENBQUNNLElBQUksQ0FBQyxFQUFFO0lBQzVELE9BQU9yQixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLEtBQUssRUFBRTtJQUF3QyxDQUFDLENBQUM7RUFDakY7RUFFQUwsSUFBSSxDQUFDLENBQUM7QUFDUixDQUFDOztBQUVEO0FBQUFrQixPQUFBLENBQUFHLGdCQUFBLEdBQUFBLGdCQUFBO0FBQ08sTUFBTUcsT0FBTyxHQUFHQSxDQUFDMUIsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUN6QyxJQUFJLENBQUNGLEdBQUcsQ0FBQ2dCLElBQUksSUFBSWhCLEdBQUcsQ0FBQ2dCLElBQUksQ0FBQ00sSUFBSSxLQUFLLE9BQU8sRUFBRTtJQUMxQyxPQUFPckIsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxLQUFLLEVBQUU7SUFBOEIsQ0FBQyxDQUFDO0VBQ3ZFO0VBQ0FMLElBQUksQ0FBQyxDQUFDO0FBQ1IsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBa0IsT0FBQSxDQUFBTSxPQUFBLEdBQUFBLE9BQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","_dotenv","e","__esModule","default","dotenv","config","verifyToken","req","res","next","authHeader","header","status","json","error","token","split","decoded","jwt","verify","process","env","JWT_SECRET","user","err","console","message","exports","isStaff","role","adminOrStaffAuth","log","includes","isAdmin"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\middleware\\","sources":["authMiddleware.js"],"sourcesContent":["\r\n// // import jwt from \"jsonwebtoken\";\r\n// // import dotenv from \"dotenv\";\r\n// // dotenv.config();\r\n\r\n// // // Verify Token\r\n// // export const verifyToken = (req, res, next) => {\r\n// //   const token = req.header(\"Authorization\")?.split(\" \")[1]; // Extract token\r\n// //   if (!token) return res.status(401).json({ error: \"Access denied. No token provided.\" });\r\n\r\n// //   try {\r\n// //     const decoded = jwt.verify(token, process.env.JWT_SECRET);\r\n// //     req.user = decoded;\r\n// //     next();\r\n// //   } catch (err) {\r\n// //     res.status(403).json({ error: \"Invalid or expired token\" });\r\n// //   }\r\n// // };\r\n\r\n// // export const adminOrStaffAuth = (req, res, next) => {\r\n// //   console.log(\"🔍 Middleware Role Check:\", req.user.role); // ✅ Debugging\r\n\r\n// //   if (![\"admin\", \"staff\"].includes(req.user.role)) {\r\n// //     return res.status(403).json({ error: \"Access denied. Admins and staff only.\" });\r\n// //   }\r\n\r\n// //   next();\r\n// // };\r\n\r\n\r\n// // // Admin Middleware\r\n// // export const isAdmin = (req, res, next) => {\r\n// //   if (req.user.role !== \"admin\") {\r\n// //     return res.status(403).json({ error: \"Access denied. Admins only.\" });\r\n// //   }\r\n// //   next();\r\n// // };\r\nimport jwt from \"jsonwebtoken\";\r\nimport dotenv from \"dotenv\";\r\ndotenv.config();\r\n\r\n//-------------------------------------------------\r\n// ✅ Verify Token Middleware\r\nexport const verifyToken = (req, res, next) => {\r\n  try {\r\n    const authHeader = req.header(\"Authorization\");\r\n    if (!authHeader) {\r\n      return res.status(401).json({ error: \"Access denied. No token provided.\" });\r\n    }\r\n\r\n    const token = authHeader.split(\" \")[1]; // Extract Bearer token\r\n    if (!token) {\r\n      return res.status(401).json({ error: \"Invalid token format. Use 'Bearer <token>'\" });\r\n    }\r\n\r\n    const decoded = jwt.verify(token, process.env.JWT_SECRET);\r\n    req.user = decoded;\r\n    next();\r\n  } catch (err) {\r\n    console.error(\"❌ Token Verification Error:\", err.message); // ✅ Debugging\r\n    res.status(403).json({ error: \"Invalid or expired token\" });\r\n  }\r\n};\r\n//----------------------------------------------------------------\r\n\r\n//---added\r\n// ✅ Staff Middleware\r\nexport const isStaff = (req, res, next) => {\r\n  if (!req.user || req.user.role !== \"staff\") {\r\n    return res.status(403).json({ error: \"Access denied. Staff only.\" });\r\n  }\r\n  next();\r\n};\r\n//---added\r\n\r\n// ✅ Admin or Staff Middleware\r\nexport const adminOrStaffAuth = (req, res, next) => {\r\n  console.log(\"🔍 Middleware Role Check:\", req.user?.role); // ✅ Debugging\r\n\r\n  if (!req.user || ![\"admin\", \"staff\"].includes(req.user.role)) {\r\n    return res.status(403).json({ error: \"Access denied. Admins and staff only.\" });\r\n  }\r\n\r\n  next();\r\n};\r\n\r\n// ✅ Admin Middleware\r\nexport const isAdmin = (req, res, next) => {\r\n  if (!req.user || req.user.role !== \"admin\") {\r\n    return res.status(403).json({ error: \"Access denied. Admins only.\" });\r\n  }\r\n  next();\r\n};\r\n//\r\n// import jwt from \"jsonwebtoken\";\r\n// import dotenv from \"dotenv\";\r\n// dotenv.config();\r\n\r\n// // ✅ Verify Token Middleware\r\n// export const verifyToken = (req, res, next) => {\r\n//   try {\r\n//     const authHeader = req.header(\"Authorization\");\r\n//     if (!authHeader) {\r\n//       return res.status(401).json({ error: \"Access denied. No token provided.\" });\r\n//     }\r\n\r\n//     const token = authHeader.split(\" \")[1]; // Extract Bearer token\r\n//     if (!token) {\r\n//       return res.status(401).json({ error: \"Invalid token format. Use 'Bearer <token>'\" });\r\n//     }\r\n\r\n//     const decoded = jwt.verify(token, process.env.JWT_SECRET);\r\n//     if (!decoded.id) {\r\n//       return res.status(403).json({ error: \"Invalid token: User ID missing\" });\r\n//     }\r\n\r\n//     req.user = decoded; // ✅ Ensure `req.user.id` is set\r\n//     console.log(\"🔍 Token Decoded:\", req.user);\r\n//     next();\r\n//   } catch (err) {\r\n//     console.error(\"❌ Token Verification Error:\", err.message);\r\n//     res.status(403).json({ error: \"Invalid or expired token\" });\r\n//   }\r\n// };\r\n\r\n// // ✅ Admin or Staff Middleware\r\n// export const adminOrStaffAuth = (req, res, next) => {\r\n//   if (!req.user) {\r\n//     console.error(\"❌ Unauthorized Access: No user found in request.\");\r\n//     return res.status(403).json({ error: \"Access denied. Admins and staff only.\" });\r\n//   }\r\n\r\n//   console.log(\"🔍 Middleware Role Check:\", req.user.role);\r\n\r\n//   if (![\"admin\", \"staff\"].includes(req.user.role)) {\r\n//     return res.status(403).json({ error: \"Access denied. Admins and staff only.\" });\r\n//   }\r\n\r\n//   next();\r\n// };\r\n\r\n// // ✅ Admin Middleware\r\n// export const isAdmin = (req, res, next) => {\r\n//   if (!req.user) {\r\n//     console.error(\"❌ Unauthorized Access: No user found in request.\");\r\n//     return res.status(403).json({ error: \"Access denied. Admins only.\" });\r\n//   }\r\n\r\n//   if (req.user.role !== \"admin\") {\r\n//     return res.status(403).json({ error: \"Access denied. Admins only.\" });\r\n//   }\r\n\r\n//   next();\r\n// };\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1742629394529},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\routes\\\\accountRoutes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _accountController = require(\"../controllers/accountController.js\");\nvar _authMiddleware = require(\"../middleware/authMiddleware.js\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// import express from \"express\";\n// import {\n//   createAccount,\n//   getAllAccounts,\n//   getUserAccounts,\n//   updateAccountStatus,\n//   deleteAccount,\n// } from \"../controllers/accountController.js\";\n// import { verifyToken, isAdmin, adminOrStaffAuth } from \"../middleware/authMiddleware.js\";\n\n// const router = express.Router();\n\n// router.post(\"/\", verifyToken, createAccount); // ✅ Create a bank account\n// // router.get(\"/user\", verifyToken, getUserAccounts); // ✅ Get accounts of logged-in user\n// router.get(\"/user/:userId\", verifyToken, getUserAccounts);\n// router.get(\"/\", verifyToken, adminOrStaffAuth, getAllAccounts); // ✅ Get all accounts (Admin)\n// router.patch(\"/:accountId/status\", verifyToken, adminOrStaffAuth, updateAccountStatus); // ✅ Update account status\n// router.delete(\"/:accountId\", verifyToken, isAdmin, deleteAccount); // ✅ Delete an account\n\n// export default router;\n\nconst router = _express.default.Router();\nrouter.post(\"/\", _authMiddleware.verifyToken, _accountController.createAccount); // ✅ Create a bank account\nrouter.get(\"/user/:userId\", _authMiddleware.verifyToken, _accountController.getUserAccounts);\nrouter.get(\"/\", _authMiddleware.verifyToken, _authMiddleware.adminOrStaffAuth, _accountController.getAllAccounts);\nrouter.patch(\"/:accountId/status\", _authMiddleware.verifyToken, _authMiddleware.adminOrStaffAuth, _accountController.updateAccountStatus);\nrouter.delete(\"/:accountId\", _authMiddleware.verifyToken, _authMiddleware.isAdmin, _accountController.deleteAccount);\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2FjY291bnRDb250cm9sbGVyIiwiX2F1dGhNaWRkbGV3YXJlIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0Iiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsInBvc3QiLCJ2ZXJpZnlUb2tlbiIsImNyZWF0ZUFjY291bnQiLCJnZXQiLCJnZXRVc2VyQWNjb3VudHMiLCJhZG1pbk9yU3RhZmZBdXRoIiwiZ2V0QWxsQWNjb3VudHMiLCJwYXRjaCIsInVwZGF0ZUFjY291bnRTdGF0dXMiLCJkZWxldGUiLCJpc0FkbWluIiwiZGVsZXRlQWNjb3VudCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxzZXJnZVxcYmFua2EtYXBpXFxzcmNcXHJvdXRlc1xcIiwic291cmNlcyI6WyJhY2NvdW50Um91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XHJcbi8vIGltcG9ydCB7XHJcbi8vICAgY3JlYXRlQWNjb3VudCxcclxuLy8gICBnZXRBbGxBY2NvdW50cyxcclxuLy8gICBnZXRVc2VyQWNjb3VudHMsXHJcbi8vICAgdXBkYXRlQWNjb3VudFN0YXR1cyxcclxuLy8gICBkZWxldGVBY2NvdW50LFxyXG4vLyB9IGZyb20gXCIuLi9jb250cm9sbGVycy9hY2NvdW50Q29udHJvbGxlci5qc1wiO1xyXG4vLyBpbXBvcnQgeyB2ZXJpZnlUb2tlbiwgaXNBZG1pbiwgYWRtaW5PclN0YWZmQXV0aCB9IGZyb20gXCIuLi9taWRkbGV3YXJlL2F1dGhNaWRkbGV3YXJlLmpzXCI7XHJcblxyXG4vLyBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxuLy8gcm91dGVyLnBvc3QoXCIvXCIsIHZlcmlmeVRva2VuLCBjcmVhdGVBY2NvdW50KTsgLy8g4pyFIENyZWF0ZSBhIGJhbmsgYWNjb3VudFxyXG4vLyAvLyByb3V0ZXIuZ2V0KFwiL3VzZXJcIiwgdmVyaWZ5VG9rZW4sIGdldFVzZXJBY2NvdW50cyk7IC8vIOKchSBHZXQgYWNjb3VudHMgb2YgbG9nZ2VkLWluIHVzZXJcclxuLy8gcm91dGVyLmdldChcIi91c2VyLzp1c2VySWRcIiwgdmVyaWZ5VG9rZW4sIGdldFVzZXJBY2NvdW50cyk7XHJcbi8vIHJvdXRlci5nZXQoXCIvXCIsIHZlcmlmeVRva2VuLCBhZG1pbk9yU3RhZmZBdXRoLCBnZXRBbGxBY2NvdW50cyk7IC8vIOKchSBHZXQgYWxsIGFjY291bnRzIChBZG1pbilcclxuLy8gcm91dGVyLnBhdGNoKFwiLzphY2NvdW50SWQvc3RhdHVzXCIsIHZlcmlmeVRva2VuLCBhZG1pbk9yU3RhZmZBdXRoLCB1cGRhdGVBY2NvdW50U3RhdHVzKTsgLy8g4pyFIFVwZGF0ZSBhY2NvdW50IHN0YXR1c1xyXG4vLyByb3V0ZXIuZGVsZXRlKFwiLzphY2NvdW50SWRcIiwgdmVyaWZ5VG9rZW4sIGlzQWRtaW4sIGRlbGV0ZUFjY291bnQpOyAvLyDinIUgRGVsZXRlIGFuIGFjY291bnRcclxuXHJcbi8vIGV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcclxuaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IHtcclxuICBjcmVhdGVBY2NvdW50LFxyXG4gIGdldEFsbEFjY291bnRzLFxyXG4gIGdldFVzZXJBY2NvdW50cyxcclxuICB1cGRhdGVBY2NvdW50U3RhdHVzLFxyXG4gIGRlbGV0ZUFjY291bnQsXHJcbn0gZnJvbSBcIi4uL2NvbnRyb2xsZXJzL2FjY291bnRDb250cm9sbGVyLmpzXCI7XHJcbmltcG9ydCB7IHZlcmlmeVRva2VuLCBpc0FkbWluLCBhZG1pbk9yU3RhZmZBdXRoIH0gZnJvbSBcIi4uL21pZGRsZXdhcmUvYXV0aE1pZGRsZXdhcmUuanNcIjtcclxuXHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIucG9zdChcIi9cIiwgdmVyaWZ5VG9rZW4sIGNyZWF0ZUFjY291bnQpOyAvLyDinIUgQ3JlYXRlIGEgYmFuayBhY2NvdW50XHJcbnJvdXRlci5nZXQoXCIvdXNlci86dXNlcklkXCIsIHZlcmlmeVRva2VuLCBnZXRVc2VyQWNjb3VudHMpO1xyXG5yb3V0ZXIuZ2V0KFwiL1wiLCB2ZXJpZnlUb2tlbiwgYWRtaW5PclN0YWZmQXV0aCwgZ2V0QWxsQWNjb3VudHMpO1xyXG5yb3V0ZXIucGF0Y2goXCIvOmFjY291bnRJZC9zdGF0dXNcIiwgdmVyaWZ5VG9rZW4sIGFkbWluT3JTdGFmZkF1dGgsIHVwZGF0ZUFjY291bnRTdGF0dXMpO1xyXG5yb3V0ZXIuZGVsZXRlKFwiLzphY2NvdW50SWRcIiwgdmVyaWZ5VG9rZW4sIGlzQWRtaW4sIGRlbGV0ZUFjY291bnQpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQW9CQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxrQkFBQSxHQUFBRCxPQUFBO0FBT0EsSUFBQUUsZUFBQSxHQUFBRixPQUFBO0FBQXlGLFNBQUFELHVCQUFBSSxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBNUJ6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQVdBLE1BQU1HLE1BQU0sR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxDQUFDLENBQUM7QUFFL0JGLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLEdBQUcsRUFBRUMsMkJBQVcsRUFBRUMsZ0NBQWEsQ0FBQyxDQUFDLENBQUM7QUFDOUNMLE1BQU0sQ0FBQ00sR0FBRyxDQUFDLGVBQWUsRUFBRUYsMkJBQVcsRUFBRUcsa0NBQWUsQ0FBQztBQUN6RFAsTUFBTSxDQUFDTSxHQUFHLENBQUMsR0FBRyxFQUFFRiwyQkFBVyxFQUFFSSxnQ0FBZ0IsRUFBRUMsaUNBQWMsQ0FBQztBQUM5RFQsTUFBTSxDQUFDVSxLQUFLLENBQUMsb0JBQW9CLEVBQUVOLDJCQUFXLEVBQUVJLGdDQUFnQixFQUFFRyxzQ0FBbUIsQ0FBQztBQUN0RlgsTUFBTSxDQUFDWSxNQUFNLENBQUMsYUFBYSxFQUFFUiwyQkFBVyxFQUFFUyx1QkFBTyxFQUFFQyxnQ0FBYSxDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFqQixPQUFBLEdBRW5EQyxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_express","_interopRequireDefault","require","_accountController","_authMiddleware","e","__esModule","default","router","express","Router","post","verifyToken","createAccount","get","getUserAccounts","adminOrStaffAuth","getAllAccounts","patch","updateAccountStatus","delete","isAdmin","deleteAccount","_default","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\routes\\","sources":["accountRoutes.js"],"sourcesContent":["// import express from \"express\";\r\n// import {\r\n//   createAccount,\r\n//   getAllAccounts,\r\n//   getUserAccounts,\r\n//   updateAccountStatus,\r\n//   deleteAccount,\r\n// } from \"../controllers/accountController.js\";\r\n// import { verifyToken, isAdmin, adminOrStaffAuth } from \"../middleware/authMiddleware.js\";\r\n\r\n// const router = express.Router();\r\n\r\n// router.post(\"/\", verifyToken, createAccount); // ✅ Create a bank account\r\n// // router.get(\"/user\", verifyToken, getUserAccounts); // ✅ Get accounts of logged-in user\r\n// router.get(\"/user/:userId\", verifyToken, getUserAccounts);\r\n// router.get(\"/\", verifyToken, adminOrStaffAuth, getAllAccounts); // ✅ Get all accounts (Admin)\r\n// router.patch(\"/:accountId/status\", verifyToken, adminOrStaffAuth, updateAccountStatus); // ✅ Update account status\r\n// router.delete(\"/:accountId\", verifyToken, isAdmin, deleteAccount); // ✅ Delete an account\r\n\r\n// export default router;\r\nimport express from \"express\";\r\nimport {\r\n  createAccount,\r\n  getAllAccounts,\r\n  getUserAccounts,\r\n  updateAccountStatus,\r\n  deleteAccount,\r\n} from \"../controllers/accountController.js\";\r\nimport { verifyToken, isAdmin, adminOrStaffAuth } from \"../middleware/authMiddleware.js\";\r\n\r\nconst router = express.Router();\r\n\r\nrouter.post(\"/\", verifyToken, createAccount); // ✅ Create a bank account\r\nrouter.get(\"/user/:userId\", verifyToken, getUserAccounts);\r\nrouter.get(\"/\", verifyToken, adminOrStaffAuth, getAllAccounts);\r\nrouter.patch(\"/:accountId/status\", verifyToken, adminOrStaffAuth, updateAccountStatus);\r\nrouter.delete(\"/:accountId\", verifyToken, isAdmin, deleteAccount);\r\n\r\nexport default router;\r\n"],"mappings":";;;;;;AAoBA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,kBAAA,GAAAD,OAAA;AAOA,IAAAE,eAAA,GAAAF,OAAA;AAAyF,SAAAD,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AA5BzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAWA,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,CAAC,CAAC;AAE/BF,MAAM,CAACG,IAAI,CAAC,GAAG,EAAEC,2BAAW,EAAEC,gCAAa,CAAC,CAAC,CAAC;AAC9CL,MAAM,CAACM,GAAG,CAAC,eAAe,EAAEF,2BAAW,EAAEG,kCAAe,CAAC;AACzDP,MAAM,CAACM,GAAG,CAAC,GAAG,EAAEF,2BAAW,EAAEI,gCAAgB,EAAEC,iCAAc,CAAC;AAC9DT,MAAM,CAACU,KAAK,CAAC,oBAAoB,EAAEN,2BAAW,EAAEI,gCAAgB,EAAEG,sCAAmB,CAAC;AACtFX,MAAM,CAACY,MAAM,CAAC,aAAa,EAAER,2BAAW,EAAES,uBAAO,EAAEC,gCAAa,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAjB,OAAA,GAEnDC,MAAM","ignoreList":[]}},"mtime":1742581548712},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\controllers\\\\accountController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateAccountStatus = exports.getUserAccounts = exports.getAllAccounts = exports.deleteAccount = exports.createAccount = void 0;\nvar _account = _interopRequireDefault(require(\"../models/account.js\"));\nvar _user = _interopRequireDefault(require(\"../models/user.js\"));\nvar _accountHelper = require(\"../utils/accountHelper.js\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// Helper function for account numbers\n\n// ✅ Create a new bank account\nconst createAccount = async (req, res) => {\n  try {\n    const {\n      type,\n      initialDeposit\n    } = req.body;\n    const userId = req.user.id; // Get authenticated user ID from token\n\n    // Ensure user exists\n    const user = await _user.default.findById(userId);\n    if (!user) return res.status(404).json({\n      error: \"User not found\"\n    });\n\n    // Generate unique account number\n    const accountNumber = (0, _accountHelper.generateAccountNumber)();\n\n    // Create and save the account\n    const newAccount = new _account.default({\n      owner: userId,\n      accountNumber,\n      type,\n      balance: initialDeposit || 0\n    });\n    await newAccount.save();\n    res.status(201).json({\n      message: \"Account created successfully\",\n      data: newAccount\n    });\n  } catch (error) {\n    console.error(\"❌ Error creating account:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n//GET ALL ACCOUNTS\nexports.createAccount = createAccount;\nconst getAllAccounts = async (req, res) => {\n  try {\n    console.log(\"🔍 User Role in Controller:\", req.user.role); // ✅ Check user role\n\n    if (![\"admin\", \"staff\"].includes(req.user.role)) {\n      return res.status(403).json({\n        error: \"Access denied. Admins and staff only.\"\n      });\n    }\n    const accounts = await _account.default.find().populate(\"owner\", \"firstName lastName email\");\n    res.status(200).json({\n      data: accounts\n    });\n  } catch (error) {\n    console.error(\"❌ Error fetching accounts:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\nexports.getAllAccounts = getAllAccounts;\nconst getUserAccounts = async (req, res) => {\n  try {\n    const {\n      userId\n    } = req.params; // Get user ID from request params\n    const requesterId = req.user.id; // Get ID from authenticated user\n    const requesterRole = req.user.role; // Get role from authenticated user\n\n    // ✅ Only admins/staff can view any user’s account\n    if (requesterRole !== \"admin\" && requesterRole !== \"staff\") {\n      // ✅ Users can only view their own accounts\n      if (requesterId !== userId) {\n        return res.status(403).json({\n          error: \"Access denied. You can only view your own accounts.\"\n        });\n      }\n    }\n\n    // ✅ Fetch accounts for the given user ID\n    const accounts = await _account.default.find({\n      owner: userId\n    }).populate(\"owner\", \"firstName lastName email\");\n    if (!accounts.length) {\n      return res.status(404).json({\n        error: \"No accounts found for this user\"\n      });\n    }\n    res.status(200).json({\n      data: accounts\n    });\n  } catch (error) {\n    console.error(\"❌ Error fetching user accounts:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n// ✅ Update account status (Admin & Staff)\nexports.getUserAccounts = getUserAccounts;\nconst updateAccountStatus = async (req, res) => {\n  try {\n    const {\n      accountId\n    } = req.params;\n    const {\n      status\n    } = req.body;\n    console.log(\"🔍 Role Checking:\", req.user.role); // Debugging\n\n    // ✅ Allow only Admin & Staff\n    if (![\"admin\", \"staff\"].includes(req.user.role)) {\n      return res.status(403).json({\n        error: \"Access denied. Admins & Staff only.\"\n      });\n    }\n\n    // ✅ Validate status\n    if (![\"active\", \"dormant\", \"closed\"].includes(status)) {\n      return res.status(400).json({\n        error: \"Invalid account status\"\n      });\n    }\n    const account = await _account.default.findByIdAndUpdate(accountId, {\n      status\n    }, {\n      new: true\n    });\n    if (!account) return res.status(404).json({\n      error: \"Account not found\"\n    });\n    res.status(200).json({\n      message: \"Account status updated\",\n      data: account\n    });\n  } catch (error) {\n    console.error(\"❌ Error updating account status:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n// ✅ Delete an account (Admin Only)\nexports.updateAccountStatus = updateAccountStatus;\nconst deleteAccount = async (req, res) => {\n  try {\n    const {\n      accountId\n    } = req.params;\n    const account = await _account.default.findByIdAndDelete(accountId);\n    if (!account) return res.status(404).json({\n      error: \"Account not found\"\n    });\n    res.status(200).json({\n      message: \"Account deleted successfully\"\n    });\n  } catch (error) {\n    console.error(\"❌ Error deleting account:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\nexports.deleteAccount = deleteAccount;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYWNjb3VudCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3VzZXIiLCJfYWNjb3VudEhlbHBlciIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImNyZWF0ZUFjY291bnQiLCJyZXEiLCJyZXMiLCJ0eXBlIiwiaW5pdGlhbERlcG9zaXQiLCJib2R5IiwidXNlcklkIiwidXNlciIsImlkIiwiVXNlciIsImZpbmRCeUlkIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiYWNjb3VudE51bWJlciIsImdlbmVyYXRlQWNjb3VudE51bWJlciIsIm5ld0FjY291bnQiLCJBY2NvdW50Iiwib3duZXIiLCJiYWxhbmNlIiwic2F2ZSIsIm1lc3NhZ2UiLCJkYXRhIiwiY29uc29sZSIsImV4cG9ydHMiLCJnZXRBbGxBY2NvdW50cyIsImxvZyIsInJvbGUiLCJpbmNsdWRlcyIsImFjY291bnRzIiwiZmluZCIsInBvcHVsYXRlIiwiZ2V0VXNlckFjY291bnRzIiwicGFyYW1zIiwicmVxdWVzdGVySWQiLCJyZXF1ZXN0ZXJSb2xlIiwibGVuZ3RoIiwidXBkYXRlQWNjb3VudFN0YXR1cyIsImFjY291bnRJZCIsImFjY291bnQiLCJmaW5kQnlJZEFuZFVwZGF0ZSIsIm5ldyIsImRlbGV0ZUFjY291bnQiLCJmaW5kQnlJZEFuZERlbGV0ZSJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxzZXJnZVxcYmFua2EtYXBpXFxzcmNcXGNvbnRyb2xsZXJzXFwiLCJzb3VyY2VzIjpbImFjY291bnRDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBY2NvdW50IGZyb20gXCIuLi9tb2RlbHMvYWNjb3VudC5qc1wiO1xyXG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vbW9kZWxzL3VzZXIuanNcIjtcclxuaW1wb3J0IHsgZ2VuZXJhdGVBY2NvdW50TnVtYmVyIH0gZnJvbSBcIi4uL3V0aWxzL2FjY291bnRIZWxwZXIuanNcIjsgLy8gSGVscGVyIGZ1bmN0aW9uIGZvciBhY2NvdW50IG51bWJlcnNcclxuXHJcbi8vIOKchSBDcmVhdGUgYSBuZXcgYmFuayBhY2NvdW50XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVBY2NvdW50ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgdHlwZSwgaW5pdGlhbERlcG9zaXQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgdXNlcklkID0gcmVxLnVzZXIuaWQ7IC8vIEdldCBhdXRoZW50aWNhdGVkIHVzZXIgSUQgZnJvbSB0b2tlblxyXG5cclxuICAgIC8vIEVuc3VyZSB1c2VyIGV4aXN0c1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcclxuICAgIGlmICghdXNlcikgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiVXNlciBub3QgZm91bmRcIiB9KTtcclxuXHJcbiAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgYWNjb3VudCBudW1iZXJcclxuICAgIGNvbnN0IGFjY291bnROdW1iZXIgPSBnZW5lcmF0ZUFjY291bnROdW1iZXIoKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgYW5kIHNhdmUgdGhlIGFjY291bnRcclxuICAgIGNvbnN0IG5ld0FjY291bnQgPSBuZXcgQWNjb3VudCh7XHJcbiAgICAgIG93bmVyOiB1c2VySWQsXHJcbiAgICAgIGFjY291bnROdW1iZXIsXHJcbiAgICAgIHR5cGUsXHJcbiAgICAgIGJhbGFuY2U6IGluaXRpYWxEZXBvc2l0IHx8IDAsXHJcbiAgICB9KTtcclxuXHJcbiAgICBhd2FpdCBuZXdBY2NvdW50LnNhdmUoKTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6IFwiQWNjb3VudCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiLCBkYXRhOiBuZXdBY2NvdW50IH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGNyZWF0aW5nIGFjY291bnQ6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbi8vR0VUIEFMTCBBQ0NPVU5UU1xyXG5leHBvcnQgY29uc3QgZ2V0QWxsQWNjb3VudHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coXCLwn5SNIFVzZXIgUm9sZSBpbiBDb250cm9sbGVyOlwiLCByZXEudXNlci5yb2xlKTsgLy8g4pyFIENoZWNrIHVzZXIgcm9sZVxyXG5cclxuICAgIGlmICghW1wiYWRtaW5cIiwgXCJzdGFmZlwiXS5pbmNsdWRlcyhyZXEudXNlci5yb2xlKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJBY2Nlc3MgZGVuaWVkLiBBZG1pbnMgYW5kIHN0YWZmIG9ubHkuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCBBY2NvdW50LmZpbmQoKS5wb3B1bGF0ZShcIm93bmVyXCIsIFwiZmlyc3ROYW1lIGxhc3ROYW1lIGVtYWlsXCIpO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBkYXRhOiBhY2NvdW50cyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBmZXRjaGluZyBhY2NvdW50czpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IGdldFVzZXJBY2NvdW50cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtczsgLy8gR2V0IHVzZXIgSUQgZnJvbSByZXF1ZXN0IHBhcmFtc1xyXG4gICAgY29uc3QgcmVxdWVzdGVySWQgPSByZXEudXNlci5pZDsgLy8gR2V0IElEIGZyb20gYXV0aGVudGljYXRlZCB1c2VyXHJcbiAgICBjb25zdCByZXF1ZXN0ZXJSb2xlID0gcmVxLnVzZXIucm9sZTsgLy8gR2V0IHJvbGUgZnJvbSBhdXRoZW50aWNhdGVkIHVzZXJcclxuXHJcbiAgICAvLyDinIUgT25seSBhZG1pbnMvc3RhZmYgY2FuIHZpZXcgYW55IHVzZXLigJlzIGFjY291bnRcclxuICAgIGlmIChyZXF1ZXN0ZXJSb2xlICE9PSBcImFkbWluXCIgJiYgcmVxdWVzdGVyUm9sZSAhPT0gXCJzdGFmZlwiKSB7XHJcbiAgICAgIC8vIOKchSBVc2VycyBjYW4gb25seSB2aWV3IHRoZWlyIG93biBhY2NvdW50c1xyXG4gICAgICBpZiAocmVxdWVzdGVySWQgIT09IHVzZXJJZCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIkFjY2VzcyBkZW5pZWQuIFlvdSBjYW4gb25seSB2aWV3IHlvdXIgb3duIGFjY291bnRzLlwiIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g4pyFIEZldGNoIGFjY291bnRzIGZvciB0aGUgZ2l2ZW4gdXNlciBJRFxyXG4gICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCBBY2NvdW50LmZpbmQoeyBvd25lcjogdXNlcklkIH0pLnBvcHVsYXRlKFwib3duZXJcIiwgXCJmaXJzdE5hbWUgbGFzdE5hbWUgZW1haWxcIik7XHJcblxyXG4gICAgaWYgKCFhY2NvdW50cy5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiTm8gYWNjb3VudHMgZm91bmQgZm9yIHRoaXMgdXNlclwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgZGF0YTogYWNjb3VudHMgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgZmV0Y2hpbmcgdXNlciBhY2NvdW50czpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyDinIUgVXBkYXRlIGFjY291bnQgc3RhdHVzIChBZG1pbiAmIFN0YWZmKVxyXG5leHBvcnQgY29uc3QgdXBkYXRlQWNjb3VudFN0YXR1cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGFjY291bnRJZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHsgc3RhdHVzIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIvCflI0gUm9sZSBDaGVja2luZzpcIiwgcmVxLnVzZXIucm9sZSk7IC8vIERlYnVnZ2luZ1xyXG5cclxuICAgIC8vIOKchSBBbGxvdyBvbmx5IEFkbWluICYgU3RhZmZcclxuICAgIGlmICghW1wiYWRtaW5cIiwgXCJzdGFmZlwiXS5pbmNsdWRlcyhyZXEudXNlci5yb2xlKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJBY2Nlc3MgZGVuaWVkLiBBZG1pbnMgJiBTdGFmZiBvbmx5LlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOKchSBWYWxpZGF0ZSBzdGF0dXNcclxuICAgIGlmICghW1wiYWN0aXZlXCIsIFwiZG9ybWFudFwiLCBcImNsb3NlZFwiXS5pbmNsdWRlcyhzdGF0dXMpKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkludmFsaWQgYWNjb3VudCBzdGF0dXNcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgQWNjb3VudC5maW5kQnlJZEFuZFVwZGF0ZShhY2NvdW50SWQsIHsgc3RhdHVzIH0sIHsgbmV3OiB0cnVlIH0pO1xyXG4gICAgaWYgKCFhY2NvdW50KSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJBY2NvdW50IG5vdCBmb3VuZFwiIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogXCJBY2NvdW50IHN0YXR1cyB1cGRhdGVkXCIsIGRhdGE6IGFjY291bnQgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgdXBkYXRpbmcgYWNjb3VudCBzdGF0dXM6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8g4pyFIERlbGV0ZSBhbiBhY2NvdW50IChBZG1pbiBPbmx5KVxyXG5leHBvcnQgY29uc3QgZGVsZXRlQWNjb3VudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGFjY291bnRJZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgQWNjb3VudC5maW5kQnlJZEFuZERlbGV0ZShhY2NvdW50SWQpO1xyXG4gICAgaWYgKCFhY2NvdW50KSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJBY2NvdW50IG5vdCBmb3VuZFwiIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogXCJBY2NvdW50IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgZGVsZXRpbmcgYWNjb3VudDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBz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","map":{"version":3,"names":["_account","_interopRequireDefault","require","_user","_accountHelper","e","__esModule","default","createAccount","req","res","type","initialDeposit","body","userId","user","id","User","findById","status","json","error","accountNumber","generateAccountNumber","newAccount","Account","owner","balance","save","message","data","console","exports","getAllAccounts","log","role","includes","accounts","find","populate","getUserAccounts","params","requesterId","requesterRole","length","updateAccountStatus","accountId","account","findByIdAndUpdate","new","deleteAccount","findByIdAndDelete"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\controllers\\","sources":["accountController.js"],"sourcesContent":["import Account from \"../models/account.js\";\r\nimport User from \"../models/user.js\";\r\nimport { generateAccountNumber } from \"../utils/accountHelper.js\"; // Helper function for account numbers\r\n\r\n// ✅ Create a new bank account\r\nexport const createAccount = async (req, res) => {\r\n  try {\r\n    const { type, initialDeposit } = req.body;\r\n    const userId = req.user.id; // Get authenticated user ID from token\r\n\r\n    // Ensure user exists\r\n    const user = await User.findById(userId);\r\n    if (!user) return res.status(404).json({ error: \"User not found\" });\r\n\r\n    // Generate unique account number\r\n    const accountNumber = generateAccountNumber();\r\n\r\n    // Create and save the account\r\n    const newAccount = new Account({\r\n      owner: userId,\r\n      accountNumber,\r\n      type,\r\n      balance: initialDeposit || 0,\r\n    });\r\n\r\n    await newAccount.save();\r\n\r\n    res.status(201).json({ message: \"Account created successfully\", data: newAccount });\r\n  } catch (error) {\r\n    console.error(\"❌ Error creating account:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n\r\n\r\n//GET ALL ACCOUNTS\r\nexport const getAllAccounts = async (req, res) => {\r\n  try {\r\n    console.log(\"🔍 User Role in Controller:\", req.user.role); // ✅ Check user role\r\n\r\n    if (![\"admin\", \"staff\"].includes(req.user.role)) {\r\n      return res.status(403).json({ error: \"Access denied. Admins and staff only.\" });\r\n    }\r\n\r\n    const accounts = await Account.find().populate(\"owner\", \"firstName lastName email\");\r\n    res.status(200).json({ data: accounts });\r\n  } catch (error) {\r\n    console.error(\"❌ Error fetching accounts:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n\r\n\r\nexport const getUserAccounts = async (req, res) => {\r\n  try {\r\n    const { userId } = req.params; // Get user ID from request params\r\n    const requesterId = req.user.id; // Get ID from authenticated user\r\n    const requesterRole = req.user.role; // Get role from authenticated user\r\n\r\n    // ✅ Only admins/staff can view any user’s account\r\n    if (requesterRole !== \"admin\" && requesterRole !== \"staff\") {\r\n      // ✅ Users can only view their own accounts\r\n      if (requesterId !== userId) {\r\n        return res.status(403).json({ error: \"Access denied. You can only view your own accounts.\" });\r\n      }\r\n    }\r\n\r\n    // ✅ Fetch accounts for the given user ID\r\n    const accounts = await Account.find({ owner: userId }).populate(\"owner\", \"firstName lastName email\");\r\n\r\n    if (!accounts.length) {\r\n      return res.status(404).json({ error: \"No accounts found for this user\" });\r\n    }\r\n\r\n    res.status(200).json({ data: accounts });\r\n  } catch (error) {\r\n    console.error(\"❌ Error fetching user accounts:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n\r\n// ✅ Update account status (Admin & Staff)\r\nexport const updateAccountStatus = async (req, res) => {\r\n  try {\r\n    const { accountId } = req.params;\r\n    const { status } = req.body;\r\n\r\n    console.log(\"🔍 Role Checking:\", req.user.role); // Debugging\r\n\r\n    // ✅ Allow only Admin & Staff\r\n    if (![\"admin\", \"staff\"].includes(req.user.role)) {\r\n      return res.status(403).json({ error: \"Access denied. Admins & Staff only.\" });\r\n    }\r\n\r\n    // ✅ Validate status\r\n    if (![\"active\", \"dormant\", \"closed\"].includes(status)) {\r\n      return res.status(400).json({ error: \"Invalid account status\" });\r\n    }\r\n\r\n    const account = await Account.findByIdAndUpdate(accountId, { status }, { new: true });\r\n    if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n    res.status(200).json({ message: \"Account status updated\", data: account });\r\n  } catch (error) {\r\n    console.error(\"❌ Error updating account status:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n\r\n// ✅ Delete an account (Admin Only)\r\nexport const deleteAccount = async (req, res) => {\r\n  try {\r\n    const { accountId } = req.params;\r\n\r\n    const account = await Account.findByIdAndDelete(accountId);\r\n    if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n    res.status(200).json({ message: \"Account deleted successfully\" });\r\n  } catch (error) {\r\n    console.error(\"❌ Error deleting account:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1742582578292},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\models\\\\account.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst accountSchema = new _mongoose.default.Schema({\n  owner: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: \"User\",\n    required: true\n  },\n  // Link to User model\n  accountNumber: {\n    type: String,\n    unique: true,\n    required: true\n  },\n  type: {\n    type: String,\n    enum: [\"savings\", \"current\"],\n    required: true\n  },\n  balance: {\n    type: Number,\n    default: 0\n  },\n  status: {\n    type: String,\n    enum: [\"active\", \"dormant\", \"closed\"],\n    default: \"active\"\n  }\n}, {\n  timestamps: true\n});\nvar _default = exports.default = _mongoose.default.model(\"Account\", accountSchema);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImFjY291bnRTY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsIm93bmVyIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJyZXF1aXJlZCIsImFjY291bnROdW1iZXIiLCJTdHJpbmciLCJ1bmlxdWUiLCJlbnVtIiwiYmFsYW5jZSIsIk51bWJlciIsInN0YXR1cyIsInRpbWVzdGFtcHMiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxzZXJnZVxcYmFua2EtYXBpXFxzcmNcXG1vZGVsc1xcIiwic291cmNlcyI6WyJhY2NvdW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcclxuXHJcbmNvbnN0IGFjY291bnRTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxyXG4gIHtcclxuICAgIG93bmVyOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIlVzZXJcIiwgcmVxdWlyZWQ6IHRydWUgfSwgLy8gTGluayB0byBVc2VyIG1vZGVsXHJcbiAgICBhY2NvdW50TnVtYmVyOiB7IHR5cGU6IFN0cmluZywgdW5pcXVlOiB0cnVlLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgdHlwZTogeyB0eXBlOiBTdHJpbmcsIGVudW06IFtcInNhdmluZ3NcIiwgXCJjdXJyZW50XCJdLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgYmFsYW5jZTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxuICAgIHN0YXR1czogeyB0eXBlOiBTdHJpbmcsIGVudW06IFtcImFjdGl2ZVwiLCBcImRvcm1hbnRcIiwgXCJjbG9zZWRcIl0sIGRlZmF1bHQ6IFwiYWN0aXZlXCIgfSxcclxuICB9LFxyXG4gIHsgdGltZXN0YW1wczogdHJ1ZSB9XHJcbik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbChcIkFjY291bnRcIiwgYWNjb3VudFNjaGVtYSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQWdDLFNBQUFELHVCQUFBRSxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBRWhDLE1BQU1HLGFBQWEsR0FBRyxJQUFJQyxpQkFBUSxDQUFDQyxNQUFNLENBQ3ZDO0VBQ0VDLEtBQUssRUFBRTtJQUFFQyxJQUFJLEVBQUVILGlCQUFRLENBQUNDLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRSxNQUFNO0lBQUVDLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFBRTtFQUM5RUMsYUFBYSxFQUFFO0lBQUVMLElBQUksRUFBRU0sTUFBTTtJQUFFQyxNQUFNLEVBQUUsSUFBSTtJQUFFSCxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQzdESixJQUFJLEVBQUU7SUFBRUEsSUFBSSxFQUFFTSxNQUFNO0lBQUVFLElBQUksRUFBRSxDQUFDLFNBQVMsRUFBRSxTQUFTLENBQUM7SUFBRUosUUFBUSxFQUFFO0VBQUssQ0FBQztFQUNwRUssT0FBTyxFQUFFO0lBQUVULElBQUksRUFBRVUsTUFBTTtJQUFFZixPQUFPLEVBQUU7RUFBRSxDQUFDO0VBQ3JDZ0IsTUFBTSxFQUFFO0lBQUVYLElBQUksRUFBRU0sTUFBTTtJQUFFRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLEVBQUUsU0FBUyxFQUFFLFFBQVEsQ0FBQztJQUFFYixPQUFPLEVBQUU7RUFBUztBQUNuRixDQUFDLEVBQ0Q7RUFBRWlCLFVBQVUsRUFBRTtBQUFLLENBQ3JCLENBQUM7QUFBQyxJQUFBQyxRQUFBLEdBQUFDLE9BQUEsQ0FBQW5CLE9BQUEsR0FFYUUsaUJBQVEsQ0FBQ2tCLEtBQUssQ0FBQyxTQUFTLEVBQUVuQixhQUFhLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","e","__esModule","default","accountSchema","mongoose","Schema","owner","type","Types","ObjectId","ref","required","accountNumber","String","unique","enum","balance","Number","status","timestamps","_default","exports","model"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\models\\","sources":["account.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst accountSchema = new mongoose.Schema(\r\n  {\r\n    owner: { type: mongoose.Schema.Types.ObjectId, ref: \"User\", required: true }, // Link to User model\r\n    accountNumber: { type: String, unique: true, required: true },\r\n    type: { type: String, enum: [\"savings\", \"current\"], required: true },\r\n    balance: { type: Number, default: 0 },\r\n    status: { type: String, enum: [\"active\", \"dormant\", \"closed\"], default: \"active\" },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nexport default mongoose.model(\"Account\", accountSchema);\r\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAgC,SAAAD,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEhC,MAAMG,aAAa,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CACvC;EACEC,KAAK,EAAE;IAAEC,IAAI,EAAEH,iBAAQ,CAACC,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAAE;EAC9EC,aAAa,EAAE;IAAEL,IAAI,EAAEM,MAAM;IAAEC,MAAM,EAAE,IAAI;IAAEH,QAAQ,EAAE;EAAK,CAAC;EAC7DJ,IAAI,EAAE;IAAEA,IAAI,EAAEM,MAAM;IAAEE,IAAI,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC;IAAEJ,QAAQ,EAAE;EAAK,CAAC;EACpEK,OAAO,EAAE;IAAET,IAAI,EAAEU,MAAM;IAAEf,OAAO,EAAE;EAAE,CAAC;EACrCgB,MAAM,EAAE;IAAEX,IAAI,EAAEM,MAAM;IAAEE,IAAI,EAAE,CAAC,QAAQ,EAAE,SAAS,EAAE,QAAQ,CAAC;IAAEb,OAAO,EAAE;EAAS;AACnF,CAAC,EACD;EAAEiB,UAAU,EAAE;AAAK,CACrB,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAnB,OAAA,GAEaE,iBAAQ,CAACkB,KAAK,CAAC,SAAS,EAAEnB,aAAa,CAAC","ignoreList":[]}},"mtime":1742464210718},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\utils\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\utils\\\\accountHelper.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.generateAccountNumber = void 0;\nconst generateAccountNumber = () => {\n  return \"BA\" + Math.floor(1000000000 + Math.random() * 9000000000).toString();\n};\nexports.generateAccountNumber = generateAccountNumber;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZW5lcmF0ZUFjY291bnROdW1iZXIiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0b1N0cmluZyIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcc2VyZ2VcXGJhbmthLWFwaVxcc3JjXFx1dGlsc1xcIiwic291cmNlcyI6WyJhY2NvdW50SGVscGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBnZW5lcmF0ZUFjY291bnROdW1iZXIgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gXCJCQVwiICsgTWF0aC5mbG9vcigxMDAwMDAwMDAwICsgTWF0aC5yYW5kb20oKSAqIDkwMDAwMDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgfTtcclxuICAiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFPLE1BQU1BLHFCQUFxQixHQUFHQSxDQUFBLEtBQU07RUFDdkMsT0FBTyxJQUFJLEdBQUdDLElBQUksQ0FBQ0MsS0FBSyxDQUFDLFVBQVUsR0FBR0QsSUFBSSxDQUFDRSxNQUFNLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDQyxRQUFRLENBQUMsQ0FBQztBQUM5RSxDQUFDO0FBQUNDLE9BQUEsQ0FBQUwscUJBQUEsR0FBQUEscUJBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["generateAccountNumber","Math","floor","random","toString","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\utils\\","sources":["accountHelper.js"],"sourcesContent":["export const generateAccountNumber = () => {\r\n    return \"BA\" + Math.floor(1000000000 + Math.random() * 9000000000).toString();\r\n  };\r\n  "],"mappings":";;;;;;AAAO,MAAMA,qBAAqB,GAAGA,CAAA,KAAM;EACvC,OAAO,IAAI,GAAGC,IAAI,CAACC,KAAK,CAAC,UAAU,GAAGD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,UAAU,CAAC,CAACC,QAAQ,CAAC,CAAC;AAC9E,CAAC;AAACC,OAAA,CAAAL,qBAAA,GAAAA,qBAAA","ignoreList":[]}},"mtime":1742464439676},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\routes\\\\transactionRoutes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _transactionController = require(\"../controllers/transactionController.js\");\nvar _authMiddleware = require(\"../middleware/authMiddleware.js\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\n\nconst router = _express.default.Router();\nrouter.post(\"/:accountId/credit\", _authMiddleware.verifyToken, _authMiddleware.isStaff, _transactionController.creditAccount);\nrouter.post(\"/:accountId/debit\", _authMiddleware.verifyToken, _authMiddleware.isStaff, _transactionController.debitAccount);\nrouter.get(\"/:accountId/transactions\", _authMiddleware.verifyToken, _transactionController.getTransactions);\nrouter.get(\"/:transactionId\", _authMiddleware.verifyToken, _transactionController.getTransactionById);\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3RyYW5zYWN0aW9uQ29udHJvbGxlciIsIl9hdXRoTWlkZGxld2FyZSIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJwb3N0IiwidmVyaWZ5VG9rZW4iLCJpc1N0YWZmIiwiY3JlZGl0QWNjb3VudCIsImRlYml0QWNjb3VudCIsImdldCIsImdldFRyYW5zYWN0aW9ucyIsImdldFRyYW5zYWN0aW9uQnlJZCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxzZXJnZVxcYmFua2EtYXBpXFxzcmNcXHJvdXRlc1xcIiwic291cmNlcyI6WyJ0cmFuc2FjdGlvblJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG5EZXZlbG9wZXJzOlxyXG4tIDIwMjQ4LzIwMjIgIFNFUkdFIE1VTkVaQVxyXG4tIDIxOTM5LzIwMjMgIE5FRU1BIFpBTklOS0FcclxuKi9cclxuXHJcbmltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCB7XHJcbiAgY3JlZGl0QWNjb3VudCxcclxuICBkZWJpdEFjY291bnQsXHJcbiAgZ2V0VHJhbnNhY3Rpb25zLFxyXG4gIGdldFRyYW5zYWN0aW9uQnlJZCxcclxufSBmcm9tIFwiLi4vY29udHJvbGxlcnMvdHJhbnNhY3Rpb25Db250cm9sbGVyLmpzXCI7XHJcbmltcG9ydCB7IGlzU3RhZmYsIHZlcmlmeVRva2VuIH0gZnJvbSBcIi4uL21pZGRsZXdhcmUvYXV0aE1pZGRsZXdhcmUuanNcIjtcclxuXHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5cclxucm91dGVyLnBvc3QoXCIvOmFjY291bnRJZC9jcmVkaXRcIiwgdmVyaWZ5VG9rZW4saXNTdGFmZiwgY3JlZGl0QWNjb3VudCk7XHJcbnJvdXRlci5wb3N0KFwiLzphY2NvdW50SWQvZGViaXRcIiwgdmVyaWZ5VG9rZW4saXNTdGFmZiwgZGViaXRBY2NvdW50KTtcclxucm91dGVyLmdldChcIi86YWNjb3VudElkL3RyYW5zYWN0aW9uc1wiLCB2ZXJpZnlUb2tlbiwgZ2V0VHJhbnNhY3Rpb25zKTtcclxucm91dGVyLmdldChcIi86dHJhbnNhY3Rpb25JZFwiLCB2ZXJpZnlUb2tlbiwgZ2V0VHJhbnNhY3Rpb25CeUlkKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFNQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxzQkFBQSxHQUFBRCxPQUFBO0FBTUEsSUFBQUUsZUFBQSxHQUFBRixPQUFBO0FBQXVFLFNBQUFELHVCQUFBSSxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBYnZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBV0EsTUFBTUcsTUFBTSxHQUFHQyxnQkFBTyxDQUFDQyxNQUFNLENBQUMsQ0FBQztBQUcvQkYsTUFBTSxDQUFDRyxJQUFJLENBQUMsb0JBQW9CLEVBQUVDLDJCQUFXLEVBQUNDLHVCQUFPLEVBQUVDLG9DQUFhLENBQUM7QUFDckVOLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLG1CQUFtQixFQUFFQywyQkFBVyxFQUFDQyx1QkFBTyxFQUFFRSxtQ0FBWSxDQUFDO0FBQ25FUCxNQUFNLENBQUNRLEdBQUcsQ0FBQywwQkFBMEIsRUFBRUosMkJBQVcsRUFBRUssc0NBQWUsQ0FBQztBQUNwRVQsTUFBTSxDQUFDUSxHQUFHLENBQUMsaUJBQWlCLEVBQUVKLDJCQUFXLEVBQUVNLHlDQUFrQixDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFiLE9BQUEsR0FFaERDLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","_transactionController","_authMiddleware","e","__esModule","default","router","express","Router","post","verifyToken","isStaff","creditAccount","debitAccount","get","getTransactions","getTransactionById","_default","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\routes\\","sources":["transactionRoutes.js"],"sourcesContent":["/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\r\n\r\nimport express from \"express\";\r\nimport {\r\n  creditAccount,\r\n  debitAccount,\r\n  getTransactions,\r\n  getTransactionById,\r\n} from \"../controllers/transactionController.js\";\r\nimport { isStaff, verifyToken } from \"../middleware/authMiddleware.js\";\r\n\r\nconst router = express.Router();\r\n\r\n\r\nrouter.post(\"/:accountId/credit\", verifyToken,isStaff, creditAccount);\r\nrouter.post(\"/:accountId/debit\", verifyToken,isStaff, debitAccount);\r\nrouter.get(\"/:accountId/transactions\", verifyToken, getTransactions);\r\nrouter.get(\"/:transactionId\", verifyToken, getTransactionById);\r\n\r\nexport default router;\r\n"],"mappings":";;;;;;AAMA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,sBAAA,GAAAD,OAAA;AAMA,IAAAE,eAAA,GAAAF,OAAA;AAAuE,SAAAD,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAbvE;AACA;AACA;AACA;AACA;;AAWA,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,CAAC,CAAC;AAG/BF,MAAM,CAACG,IAAI,CAAC,oBAAoB,EAAEC,2BAAW,EAACC,uBAAO,EAAEC,oCAAa,CAAC;AACrEN,MAAM,CAACG,IAAI,CAAC,mBAAmB,EAAEC,2BAAW,EAACC,uBAAO,EAAEE,mCAAY,CAAC;AACnEP,MAAM,CAACQ,GAAG,CAAC,0BAA0B,EAAEJ,2BAAW,EAAEK,sCAAe,CAAC;AACpET,MAAM,CAACQ,GAAG,CAAC,iBAAiB,EAAEJ,2BAAW,EAAEM,yCAAkB,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAb,OAAA,GAEhDC,MAAM","ignoreList":[]}},"mtime":1742644842405},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\controllers\\\\transactionController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getTransactions = exports.getTransactionById = exports.debitAccount = exports.creditAccount = void 0;\nvar _Transaction = _interopRequireDefault(require(\"../models/Transaction.js\"));\nvar _account = _interopRequireDefault(require(\"../models/account.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\n\n// Deposit Money (Credit) - Staff Only\nconst creditAccount = async (req, res) => {\n  try {\n    if (!req.user?.id) {\n      console.error(\"Missing User ID in Token:\", req.user);\n      return res.status(403).json({\n        error: \"Invalid token: User ID missing\"\n      });\n    }\n    console.log(\"🔍 Token Decoded:\", req.user);\n    const {\n      accountId\n    } = req.params;\n    const {\n      amount\n    } = req.body;\n    if (req.user.role !== \"staff\") {\n      return res.status(403).json({\n        error: \"Access denied. Only staff can process transactions\"\n      });\n    }\n    if (!amount || amount <= 0) {\n      return res.status(400).json({\n        error: \"Invalid amount. Must be greater than zero.\"\n      });\n    }\n    const account = await _account.default.findById(accountId);\n    if (!account) return res.status(404).json({\n      error: \"Account not found\"\n    });\n    account.balance += amount;\n    await account.save();\n    const transaction = await _Transaction.default.create({\n      accountId,\n      cashierId: req.user.id,\n      type: \"credit\",\n      amount,\n      newBalance: account.balance\n    });\n    res.status(201).json({\n      message: \"Account credited successfully\",\n      data: transaction\n    });\n  } catch (error) {\n    console.error(\"Credit Transaction Error:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n// Withdraw Money (Debit) - Staff Only\nexports.creditAccount = creditAccount;\nconst debitAccount = async (req, res) => {\n  try {\n    if (!req.user?.id) {\n      console.error(\"Missing User ID in Token:\", req.user);\n      return res.status(403).json({\n        error: \"Invalid token: User ID missing\"\n      });\n    }\n    console.log(\"Token Decoded:\", req.user);\n    const {\n      accountId\n    } = req.params;\n    const {\n      amount\n    } = req.body;\n    if (req.user.role !== \"staff\") {\n      return res.status(403).json({\n        error: \"Access denied. Only staff can process transactions\"\n      });\n    }\n    if (!amount || amount <= 0) {\n      return res.status(400).json({\n        error: \"Invalid amount. Must be greater than zero.\"\n      });\n    }\n    const account = await _account.default.findById(accountId);\n    if (!account) return res.status(404).json({\n      error: \"Account not found\"\n    });\n    if (account.balance < amount) {\n      return res.status(400).json({\n        error: \"Insufficient funds\"\n      });\n    }\n    account.balance -= amount;\n    await account.save();\n    const transaction = await _Transaction.default.create({\n      accountId,\n      cashierId: req.user.id,\n      type: \"debit\",\n      amount,\n      newBalance: account.balance\n    });\n    res.status(201).json({\n      message: \"Account debited successfully\",\n      data: transaction\n    });\n  } catch (error) {\n    console.error(\"Debit Transaction Error:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n// Get Transaction History (User only)\nexports.debitAccount = debitAccount;\nconst getTransactions = async (req, res) => {\n  try {\n    if (!req.user?.id) {\n      console.error(\"Missing User ID in Token:\", req.user);\n      return res.status(403).json({\n        error: \"Invalid token: User ID missing\"\n      });\n    }\n    console.log(\"Token Decoded:\", req.user);\n    const {\n      accountId\n    } = req.params;\n    const account = await _account.default.findOne({\n      _id: accountId,\n      owner: req.user.id\n    });\n    if (!account) return res.status(404).json({\n      error: \"Account not found or unauthorized\"\n    });\n    const transactions = await _Transaction.default.find({\n      accountId\n    });\n    console.log(\"Retrieved Transactions:\", transactions); // Debug log\n\n    if (!transactions || !Array.isArray(transactions)) {\n      throw new Error(\"Transactions not found or invalid format\");\n    }\n    const sortedTransactions = transactions.sort((a, b) => b.createdAt - a.createdAt); // Sorting locally\n\n    res.status(200).json({\n      data: sortedTransactions\n    });\n  } catch (error) {\n    console.error(\"Get Transactions Error:\", error.message);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n// Get a Specific Transaction (User only)\nexports.getTransactions = getTransactions;\nconst getTransactionById = async (req, res) => {\n  try {\n    if (!req.user?.id) {\n      console.error(\"Missing User ID in Token:\", req.user);\n      return res.status(403).json({\n        error: \"Invalid token: User ID missing\"\n      });\n    }\n    console.log(\"Token Decoded:\", req.user);\n    const {\n      transactionId\n    } = req.params;\n    const transaction = await _Transaction.default.findById(transactionId);\n    if (!transaction) return res.status(404).json({\n      error: \"Transaction not found\"\n    });\n    const account = await _account.default.findOne({\n      _id: transaction.accountId,\n      owner: req.user.id\n    });\n    if (!account) return res.status(403).json({\n      error: \"Unauthorized access to transaction\"\n    });\n    res.status(200).json({\n      data: transaction\n    });\n  } catch (error) {\n    console.error(\"Get Transaction Error:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\nexports.getTransactionById = getTransactionById;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfVHJhbnNhY3Rpb24iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9hY2NvdW50IiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY3JlZGl0QWNjb3VudCIsInJlcSIsInJlcyIsInVzZXIiLCJpZCIsImNvbnNvbGUiLCJlcnJvciIsInN0YXR1cyIsImpzb24iLCJsb2ciLCJhY2NvdW50SWQiLCJwYXJhbXMiLCJhbW91bnQiLCJib2R5Iiwicm9sZSIsImFjY291bnQiLCJBY2NvdW50IiwiZmluZEJ5SWQiLCJiYWxhbmNlIiwic2F2ZSIsInRyYW5zYWN0aW9uIiwiVHJhbnNhY3Rpb24iLCJjcmVhdGUiLCJjYXNoaWVySWQiLCJ0eXBlIiwibmV3QmFsYW5jZSIsIm1lc3NhZ2UiLCJkYXRhIiwiZXhwb3J0cyIsImRlYml0QWNjb3VudCIsImdldFRyYW5zYWN0aW9ucyIsImZpbmRPbmUiLCJfaWQiLCJvd25lciIsInRyYW5zYWN0aW9ucyIsImZpbmQiLCJBcnJheSIsImlzQXJyYXkiLCJFcnJvciIsInNvcnRlZFRyYW5zYWN0aW9ucyIsInNvcnQiLCJhIiwiYiIsImNyZWF0ZWRBdCIsImdldFRyYW5zYWN0aW9uQnlJZCIsInRyYW5zYWN0aW9uSWQiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcc2VyZ2VcXGJhbmthLWFwaVxcc3JjXFxjb250cm9sbGVyc1xcIiwic291cmNlcyI6WyJ0cmFuc2FjdGlvbkNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcclxuRGV2ZWxvcGVyczpcclxuLSAyMDI0OC8yMDIyICBTRVJHRSBNVU5FWkFcclxuLSAyMTkzOS8yMDIzICBORUVNQSBaQU5JTktBXHJcbiovXHJcbmltcG9ydCBUcmFuc2FjdGlvbiBmcm9tIFwiLi4vbW9kZWxzL1RyYW5zYWN0aW9uLmpzXCI7XHJcbmltcG9ydCBBY2NvdW50IGZyb20gXCIuLi9tb2RlbHMvYWNjb3VudC5qc1wiO1xyXG5cclxuLy8gRGVwb3NpdCBNb25leSAoQ3JlZGl0KSAtIFN0YWZmIE9ubHlcclxuZXhwb3J0IGNvbnN0IGNyZWRpdEFjY291bnQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFyZXEudXNlcj8uaWQpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIk1pc3NpbmcgVXNlciBJRCBpbiBUb2tlbjpcIiwgcmVxLnVzZXIpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIHRva2VuOiBVc2VyIElEIG1pc3NpbmdcIiB9KTtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKFwi8J+UjSBUb2tlbiBEZWNvZGVkOlwiLCByZXEudXNlcik7XHJcblxyXG4gICAgY29uc3QgeyBhY2NvdW50SWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IGFtb3VudCB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgaWYgKHJlcS51c2VyLnJvbGUgIT09IFwic3RhZmZcIikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJBY2Nlc3MgZGVuaWVkLiBPbmx5IHN0YWZmIGNhbiBwcm9jZXNzIHRyYW5zYWN0aW9uc1wiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghYW1vdW50IHx8IGFtb3VudCA8PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkludmFsaWQgYW1vdW50LiBNdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBBY2NvdW50LmZpbmRCeUlkKGFjY291bnRJZCk7XHJcbiAgICBpZiAoIWFjY291bnQpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIkFjY291bnQgbm90IGZvdW5kXCIgfSk7XHJcblxyXG4gICAgYWNjb3VudC5iYWxhbmNlICs9IGFtb3VudDtcclxuICAgIGF3YWl0IGFjY291bnQuc2F2ZSgpO1xyXG5cclxuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgYWNjb3VudElkLFxyXG4gICAgICBjYXNoaWVySWQ6IHJlcS51c2VyLmlkLFxyXG4gICAgICB0eXBlOiBcImNyZWRpdFwiLFxyXG4gICAgICBhbW91bnQsXHJcbiAgICAgIG5ld0JhbGFuY2U6IGFjY291bnQuYmFsYW5jZSxcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuICAgICAgbWVzc2FnZTogXCJBY2NvdW50IGNyZWRpdGVkIHN1Y2Nlc3NmdWxseVwiLFxyXG4gICAgICBkYXRhOiB0cmFuc2FjdGlvbixcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiQ3JlZGl0IFRyYW5zYWN0aW9uIEVycm9yOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFdpdGhkcmF3IE1vbmV5IChEZWJpdCkgLSBTdGFmZiBPbmx5XHJcbmV4cG9ydCBjb25zdCBkZWJpdEFjY291bnQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFyZXEudXNlcj8uaWQpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIk1pc3NpbmcgVXNlciBJRCBpbiBUb2tlbjpcIiwgcmVxLnVzZXIpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIHRva2VuOiBVc2VyIElEIG1pc3NpbmdcIiB9KTtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKFwiVG9rZW4gRGVjb2RlZDpcIiwgcmVxLnVzZXIpO1xyXG5cclxuICAgIGNvbnN0IHsgYWNjb3VudElkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBhbW91bnQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmIChyZXEudXNlci5yb2xlICE9PSBcInN0YWZmXCIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6IFwiQWNjZXNzIGRlbmllZC4gT25seSBzdGFmZiBjYW4gcHJvY2VzcyB0cmFuc2FjdGlvbnNcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWFtb3VudCB8fCBhbW91bnQgPD0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIGFtb3VudC4gTXVzdCBiZSBncmVhdGVyIHRoYW4gemVyby5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgQWNjb3VudC5maW5kQnlJZChhY2NvdW50SWQpO1xyXG4gICAgaWYgKCFhY2NvdW50KSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJBY2NvdW50IG5vdCBmb3VuZFwiIH0pO1xyXG5cclxuICAgIGlmIChhY2NvdW50LmJhbGFuY2UgPCBhbW91bnQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiSW5zdWZmaWNpZW50IGZ1bmRzXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWNjb3VudC5iYWxhbmNlIC09IGFtb3VudDtcclxuICAgIGF3YWl0IGFjY291bnQuc2F2ZSgpO1xyXG5cclxuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuICAgICAgYWNjb3VudElkLFxyXG4gICAgICBjYXNoaWVySWQ6IHJlcS51c2VyLmlkLFxyXG4gICAgICB0eXBlOiBcImRlYml0XCIsXHJcbiAgICAgIGFtb3VudCxcclxuICAgICAgbmV3QmFsYW5jZTogYWNjb3VudC5iYWxhbmNlLFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiBcIkFjY291bnQgZGViaXRlZCBzdWNjZXNzZnVsbHlcIixcclxuICAgICAgZGF0YTogdHJhbnNhY3Rpb24sXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkRlYml0IFRyYW5zYWN0aW9uIEVycm9yOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEdldCBUcmFuc2FjdGlvbiBIaXN0b3J5IChVc2VyIG9ubHkpXHJcbmV4cG9ydCBjb25zdCBnZXRUcmFuc2FjdGlvbnMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFyZXEudXNlcj8uaWQpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIk1pc3NpbmcgVXNlciBJRCBpbiBUb2tlbjpcIiwgcmVxLnVzZXIpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIHRva2VuOiBVc2VyIElEIG1pc3NpbmdcIiB9KTtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKFwiVG9rZW4gRGVjb2RlZDpcIiwgcmVxLnVzZXIpO1xyXG5cclxuICAgIGNvbnN0IHsgYWNjb3VudElkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBBY2NvdW50LmZpbmRPbmUoeyBfaWQ6IGFjY291bnRJZCwgb3duZXI6IHJlcS51c2VyLmlkIH0pO1xyXG4gICAgaWYgKCFhY2NvdW50KSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJBY2NvdW50IG5vdCBmb3VuZCBvciB1bmF1dGhvcml6ZWRcIiB9KTtcclxuXHJcbiAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBhd2FpdCBUcmFuc2FjdGlvbi5maW5kKHsgYWNjb3VudElkIH0pO1xyXG4gICAgY29uc29sZS5sb2coXCJSZXRyaWV2ZWQgVHJhbnNhY3Rpb25zOlwiLCB0cmFuc2FjdGlvbnMpOyAvLyBEZWJ1ZyBsb2dcclxuXHJcbiAgICBpZiAoIXRyYW5zYWN0aW9ucyB8fCAhQXJyYXkuaXNBcnJheSh0cmFuc2FjdGlvbnMpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRyYW5zYWN0aW9ucyBub3QgZm91bmQgb3IgaW52YWxpZCBmb3JtYXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc29ydGVkVHJhbnNhY3Rpb25zID0gdHJhbnNhY3Rpb25zLnNvcnQoKGEsIGIpID0+IGIuY3JlYXRlZEF0IC0gYS5jcmVhdGVkQXQpOyAvLyBTb3J0aW5nIGxvY2FsbHlcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHNvcnRlZFRyYW5zYWN0aW9ucyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkdldCBUcmFuc2FjdGlvbnMgRXJyb3I6XCIsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBHZXQgYSBTcGVjaWZpYyBUcmFuc2FjdGlvbiAoVXNlciBvbmx5KVxyXG5leHBvcnQgY29uc3QgZ2V0VHJhbnNhY3Rpb25CeUlkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGlmICghcmVxLnVzZXI/LmlkKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJNaXNzaW5nIFVzZXIgSUQgaW4gVG9rZW46XCIsIHJlcS51c2VyKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCB0b2tlbjogVXNlciBJRCBtaXNzaW5nXCIgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyhcIlRva2VuIERlY29kZWQ6XCIsIHJlcS51c2VyKTtcclxuXHJcbiAgICBjb25zdCB7IHRyYW5zYWN0aW9uSWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBUcmFuc2FjdGlvbi5maW5kQnlJZCh0cmFuc2FjdGlvbklkKTtcclxuICAgIGlmICghdHJhbnNhY3Rpb24pIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIlRyYW5zYWN0aW9uIG5vdCBmb3VuZFwiIH0pO1xyXG5cclxuICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBBY2NvdW50LmZpbmRPbmUoeyBfaWQ6IHRyYW5zYWN0aW9uLmFjY291bnRJZCwgb3duZXI6IHJlcS51c2VyLmlkIH0pO1xyXG4gICAgaWYgKCFhY2NvdW50KSByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWQgYWNjZXNzIHRvIHRyYW5zYWN0aW9uXCIgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBkYXRhOiB0cmFuc2FjdGlvbiB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkdldCBUcmFuc2FjdGlvbiBFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9KTtcclxuICB9XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBS0EsSUFBQUEsWUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsUUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQTJDLFNBQUFELHVCQUFBRyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBTjND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RyxNQUFBQSxDQUFPM0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDcEQsSUFBSTtJQUNGLElBQUksQ0FBQ0QsR0FBRyxDQUFDRSxJQUFJLEVBQUVDLEVBQUUsRUFBRTtNQUNqQkMsT0FBTyxDQUFDQyxLQUFLLENBQUMsMkJBQTJCLEVBQUVMLEdBQUcsQ0FBQ0UsSUFBSSxDQUFDO01BQ3BELE9BQU9ELEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUYsS0FBSyxFQUFFO01BQWlDLENBQUMsQ0FBQztJQUMxRTtJQUNBRCxPQUFPLENBQUNJLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRVIsR0FBRyxDQUFDRSxJQUFJLENBQUM7SUFFdkMsTUFBTTtNQUFFMEM7SUFBYyxDQUFDLEdBQUc1QyxHQUFHLENBQUNVLE1BQU07SUFFcEMsTUFBTVMsV0FBVyxHQUFHLE1BQU1DLG9CQUFXLENBQUNKLFFBQVEsQ0FBQzRCLGFBQWEsQ0FBQztJQUM3RCxJQUFJLENBQUN6QixXQUFXLEVBQUUsT0FBT2xCLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUYsS0FBSyxFQUFFO0lBQXdCLENBQUMsQ0FBQztJQUVqRixNQUFNUyxPQUFPLEdBQUcsTUFBTUMsZ0JBQU8sQ0FBQ2UsT0FBTyxDQUFDO01BQUVDLEdBQUcsRUFBRVosV0FBVyxDQUFDVixTQUFTO01BQUV1QixLQUFLLEVBQUVoQyxHQUFHLENBQUNFLElBQUksQ0FBQ0M7SUFBRyxDQUFDLENBQUM7SUFDekYsSUFBSSxDQUFDVyxPQUFPLEVBQUUsT0FBT2IsR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFRixLQUFLLEVBQUU7SUFBcUMsQ0FBQyxDQUFDO0lBRTFGSixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVtQixJQUFJLEVBQUVQO0lBQVksQ0FBQyxDQUFDO0VBQzdDLENBQUMsQ0FBQyxPQUFPZCxLQUFLLEVBQUU7SUFDZEQsT0FBTyxDQUFDQyxLQUFLLENBQUMsd0JBQXdCLEVBQUVBLEtBQUssQ0FBQztJQUM5Q0osR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFRixLQUFLLEVBQUU7SUFBd0IsQ0FBQyxDQUFDO0VBQzFEO0FBQ0YsQ0FBQztBQUFDc0IsT0FBQSxDQUFBZ0Isa0JBQUEsR0FBQUEsa0JBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_Transaction","_interopRequireDefault","require","_account","e","__esModule","default","creditAccount","req","res","user","id","console","error","status","json","log","accountId","params","amount","body","role","account","Account","findById","balance","save","transaction","Transaction","create","cashierId","type","newBalance","message","data","exports","debitAccount","getTransactions","findOne","_id","owner","transactions","find","Array","isArray","Error","sortedTransactions","sort","a","b","createdAt","getTransactionById","transactionId"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\controllers\\","sources":["transactionController.js"],"sourcesContent":["/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\r\nimport Transaction from \"../models/Transaction.js\";\r\nimport Account from \"../models/account.js\";\r\n\r\n// Deposit Money (Credit) - Staff Only\r\nexport const creditAccount = async (req, res) => {\r\n  try {\r\n    if (!req.user?.id) {\r\n      console.error(\"Missing User ID in Token:\", req.user);\r\n      return res.status(403).json({ error: \"Invalid token: User ID missing\" });\r\n    }\r\n    console.log(\"🔍 Token Decoded:\", req.user);\r\n\r\n    const { accountId } = req.params;\r\n    const { amount } = req.body;\r\n\r\n    if (req.user.role !== \"staff\") {\r\n      return res.status(403).json({ error: \"Access denied. Only staff can process transactions\" });\r\n    }\r\n\r\n    if (!amount || amount <= 0) {\r\n      return res.status(400).json({ error: \"Invalid amount. Must be greater than zero.\" });\r\n    }\r\n\r\n    const account = await Account.findById(accountId);\r\n    if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n    account.balance += amount;\r\n    await account.save();\r\n\r\n    const transaction = await Transaction.create({\r\n      accountId,\r\n      cashierId: req.user.id,\r\n      type: \"credit\",\r\n      amount,\r\n      newBalance: account.balance,\r\n    });\r\n\r\n    res.status(201).json({\r\n      message: \"Account credited successfully\",\r\n      data: transaction,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Credit Transaction Error:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n\r\n// Withdraw Money (Debit) - Staff Only\r\nexport const debitAccount = async (req, res) => {\r\n  try {\r\n    if (!req.user?.id) {\r\n      console.error(\"Missing User ID in Token:\", req.user);\r\n      return res.status(403).json({ error: \"Invalid token: User ID missing\" });\r\n    }\r\n    console.log(\"Token Decoded:\", req.user);\r\n\r\n    const { accountId } = req.params;\r\n    const { amount } = req.body;\r\n\r\n    if (req.user.role !== \"staff\") {\r\n      return res.status(403).json({ error: \"Access denied. Only staff can process transactions\" });\r\n    }\r\n\r\n    if (!amount || amount <= 0) {\r\n      return res.status(400).json({ error: \"Invalid amount. Must be greater than zero.\" });\r\n    }\r\n\r\n    const account = await Account.findById(accountId);\r\n    if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n    if (account.balance < amount) {\r\n      return res.status(400).json({ error: \"Insufficient funds\" });\r\n    }\r\n\r\n    account.balance -= amount;\r\n    await account.save();\r\n\r\n    const transaction = await Transaction.create({\r\n      accountId,\r\n      cashierId: req.user.id,\r\n      type: \"debit\",\r\n      amount,\r\n      newBalance: account.balance,\r\n    });\r\n\r\n    res.status(201).json({\r\n      message: \"Account debited successfully\",\r\n      data: transaction,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Debit Transaction Error:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n\r\n// Get Transaction History (User only)\r\nexport const getTransactions = async (req, res) => {\r\n  try {\r\n    if (!req.user?.id) {\r\n      console.error(\"Missing User ID in Token:\", req.user);\r\n      return res.status(403).json({ error: \"Invalid token: User ID missing\" });\r\n    }\r\n    console.log(\"Token Decoded:\", req.user);\r\n\r\n    const { accountId } = req.params;\r\n\r\n    const account = await Account.findOne({ _id: accountId, owner: req.user.id });\r\n    if (!account) return res.status(404).json({ error: \"Account not found or unauthorized\" });\r\n\r\n    const transactions = await Transaction.find({ accountId });\r\n    console.log(\"Retrieved Transactions:\", transactions); // Debug log\r\n\r\n    if (!transactions || !Array.isArray(transactions)) {\r\n      throw new Error(\"Transactions not found or invalid format\");\r\n    }\r\n\r\n    const sortedTransactions = transactions.sort((a, b) => b.createdAt - a.createdAt); // Sorting locally\r\n\r\n    res.status(200).json({ data: sortedTransactions });\r\n  } catch (error) {\r\n    console.error(\"Get Transactions Error:\", error.message);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n\r\n// Get a Specific Transaction (User only)\r\nexport const getTransactionById = async (req, res) => {\r\n  try {\r\n    if (!req.user?.id) {\r\n      console.error(\"Missing User ID in Token:\", req.user);\r\n      return res.status(403).json({ error: \"Invalid token: User ID missing\" });\r\n    }\r\n    console.log(\"Token Decoded:\", req.user);\r\n\r\n    const { transactionId } = req.params;\r\n\r\n    const transaction = await Transaction.findById(transactionId);\r\n    if (!transaction) return res.status(404).json({ error: \"Transaction not found\" });\r\n\r\n    const account = await Account.findOne({ _id: transaction.accountId, owner: req.user.id });\r\n    if (!account) return res.status(403).json({ error: \"Unauthorized access to transaction\" });\r\n\r\n    res.status(200).json({ data: transaction });\r\n  } catch (error) {\r\n    console.error(\"Get Transaction Error:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1742644560389},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\models\\\\Transaction.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\n\nconst transactionSchema = new _mongoose.default.Schema({\n  accountId: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: \"Account\",\n    required: true\n  },\n  cashierId: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: \"User\",\n    required: true\n  },\n  type: {\n    type: String,\n    enum: [\"debit\", \"credit\"],\n    required: true\n  },\n  amount: {\n    type: Number,\n    required: true,\n    min: 1 // Ensure amount is positive\n  },\n  newBalance: {\n    type: Number,\n    required: true\n  },\n  timestamp: {\n    type: Date,\n    default: Date.now\n  }\n}, {\n  timestamps: true\n});\nconst Transaction = _mongoose.default.model(\"Transaction\", transactionSchema);\nvar _default = exports.default = Transaction;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInRyYW5zYWN0aW9uU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJhY2NvdW50SWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwiY2FzaGllcklkIiwiU3RyaW5nIiwiZW51bSIsImFtb3VudCIsIk51bWJlciIsIm1pbiIsIm5ld0JhbGFuY2UiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwidGltZXN0YW1wcyIsIlRyYW5zYWN0aW9uIiwibW9kZWwiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcc2VyZ2VcXGJhbmthLWFwaVxcc3JjXFxtb2RlbHNcXCIsInNvdXJjZXMiOlsiVHJhbnNhY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcclxuRGV2ZWxvcGVyczpcclxuLSAyMDI0OC8yMDIyICBTRVJHRSBNVU5FWkFcclxuLSAyMTkzOS8yMDIzICBORUVNQSBaQU5JTktBXHJcbiovXHJcblxyXG5pbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XHJcblxyXG5jb25zdCB0cmFuc2FjdGlvblNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXHJcbiAge1xyXG4gICAgYWNjb3VudElkOiB7XHJcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuICAgICAgcmVmOiBcIkFjY291bnRcIixcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICB9LFxyXG4gICAgY2FzaGllcklkOiB7XHJcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuICAgICAgcmVmOiBcIlVzZXJcIixcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICB9LFxyXG4gICAgdHlwZToge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIGVudW06IFtcImRlYml0XCIsIFwiY3JlZGl0XCJdLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBhbW91bnQ6IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgbWluOiAxLCAvLyBFbnN1cmUgYW1vdW50IGlzIHBvc2l0aXZlXHJcbiAgICB9LFxyXG4gICAgbmV3QmFsYW5jZToge1xyXG4gICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIHRpbWVzdGFtcDoge1xyXG4gICAgICB0eXBlOiBEYXRlLFxyXG4gICAgICBkZWZhdWx0OiBEYXRlLm5vdyxcclxuICAgIH0sXHJcbiAgfSxcclxuICB7IHRpbWVzdGFtcHM6IHRydWUgfVxyXG4pO1xyXG5cclxuY29uc3QgVHJhbnNhY3Rpb24gPSBtb25nb29zZS5tb2RlbChcIlRyYW5zYWN0aW9uXCIsIHRyYW5zYWN0aW9uU2NoZW1hKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRyYW5zYWN0aW9uO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQU1BLElBQUFBLFNBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUFnQyxTQUFBRCx1QkFBQUUsQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQU5oQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlBLE1BQU1HLGlCQUFpQixHQUFHLElBQUlDLGlCQUFRLENBQUNDLE1BQU0sQ0FDM0M7RUFDRUMsU0FBUyxFQUFFO0lBQ1RDLElBQUksRUFBRUgsaUJBQVEsQ0FBQ0MsTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7SUFDcENDLEdBQUcsRUFBRSxTQUFTO0lBQ2RDLFFBQVEsRUFBRTtFQUNaLENBQUM7RUFDREMsU0FBUyxFQUFFO0lBQ1RMLElBQUksRUFBRUgsaUJBQVEsQ0FBQ0MsTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7SUFDcENDLEdBQUcsRUFBRSxNQUFNO0lBQ1hDLFFBQVEsRUFBRTtFQUNaLENBQUM7RUFDREosSUFBSSxFQUFFO0lBQ0pBLElBQUksRUFBRU0sTUFBTTtJQUNaQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFDO0lBQ3pCSCxRQUFRLEVBQUU7RUFDWixDQUFDO0VBQ0RJLE1BQU0sRUFBRTtJQUNOUixJQUFJLEVBQUVTLE1BQU07SUFDWkwsUUFBUSxFQUFFLElBQUk7SUFDZE0sR0FBRyxFQUFFLENBQUMsQ0FBRTtFQUNWLENBQUM7RUFDREMsVUFBVSxFQUFFO0lBQ1ZYLElBQUksRUFBRVMsTUFBTTtJQUNaTCxRQUFRLEVBQUU7RUFDWixDQUFDO0VBQ0RRLFNBQVMsRUFBRTtJQUNUWixJQUFJLEVBQUVhLElBQUk7SUFDVmxCLE9BQU8sRUFBRWtCLElBQUksQ0FBQ0M7RUFDaEI7QUFDRixDQUFDLEVBQ0Q7RUFBRUMsVUFBVSxFQUFFO0FBQUssQ0FDckIsQ0FBQztBQUVELE1BQU1DLFdBQVcsR0FBR25CLGlCQUFRLENBQUNvQixLQUFLLENBQUMsYUFBYSxFQUFFckIsaUJBQWlCLENBQUM7QUFBQyxJQUFBc0IsUUFBQSxHQUFBQyxPQUFBLENBQUF4QixPQUFBLEdBRXREcUIsV0FBVyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","e","__esModule","default","transactionSchema","mongoose","Schema","accountId","type","Types","ObjectId","ref","required","cashierId","String","enum","amount","Number","min","newBalance","timestamp","Date","now","timestamps","Transaction","model","_default","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\models\\","sources":["Transaction.js"],"sourcesContent":["/*\r\nDevelopers:\r\n- 20248/2022  SERGE MUNEZA\r\n- 21939/2023  NEEMA ZANINKA\r\n*/\r\n\r\nimport mongoose from \"mongoose\";\r\n\r\nconst transactionSchema = new mongoose.Schema(\r\n  {\r\n    accountId: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      ref: \"Account\",\r\n      required: true,\r\n    },\r\n    cashierId: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      ref: \"User\",\r\n      required: true,\r\n    },\r\n    type: {\r\n      type: String,\r\n      enum: [\"debit\", \"credit\"],\r\n      required: true,\r\n    },\r\n    amount: {\r\n      type: Number,\r\n      required: true,\r\n      min: 1, // Ensure amount is positive\r\n    },\r\n    newBalance: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    timestamp: {\r\n      type: Date,\r\n      default: Date.now,\r\n    },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nconst Transaction = mongoose.model(\"Transaction\", transactionSchema);\r\n\r\nexport default Transaction;\r\n"],"mappings":";;;;;;AAMA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAgC,SAAAD,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AANhC;AACA;AACA;AACA;AACA;;AAIA,MAAMG,iBAAiB,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAC3C;EACEC,SAAS,EAAE;IACTC,IAAI,EAAEH,iBAAQ,CAACC,MAAM,CAACG,KAAK,CAACC,QAAQ;IACpCC,GAAG,EAAE,SAAS;IACdC,QAAQ,EAAE;EACZ,CAAC;EACDC,SAAS,EAAE;IACTL,IAAI,EAAEH,iBAAQ,CAACC,MAAM,CAACG,KAAK,CAACC,QAAQ;IACpCC,GAAG,EAAE,MAAM;IACXC,QAAQ,EAAE;EACZ,CAAC;EACDJ,IAAI,EAAE;IACJA,IAAI,EAAEM,MAAM;IACZC,IAAI,EAAE,CAAC,OAAO,EAAE,QAAQ,CAAC;IACzBH,QAAQ,EAAE;EACZ,CAAC;EACDI,MAAM,EAAE;IACNR,IAAI,EAAES,MAAM;IACZL,QAAQ,EAAE,IAAI;IACdM,GAAG,EAAE,CAAC,CAAE;EACV,CAAC;EACDC,UAAU,EAAE;IACVX,IAAI,EAAES,MAAM;IACZL,QAAQ,EAAE;EACZ,CAAC;EACDQ,SAAS,EAAE;IACTZ,IAAI,EAAEa,IAAI;IACVlB,OAAO,EAAEkB,IAAI,CAACC;EAChB;AACF,CAAC,EACD;EAAEC,UAAU,EAAE;AAAK,CACrB,CAAC;AAED,MAAMC,WAAW,GAAGnB,iBAAQ,CAACoB,KAAK,CAAC,aAAa,EAAErB,iBAAiB,CAAC;AAAC,IAAAsB,QAAA,GAAAC,OAAA,CAAAxB,OAAA,GAEtDqB,WAAW","ignoreList":[]}},"mtime":1742644724236},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\routes\\\\transactionRoutes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _transactionController = require(\"../controllers/transactionController.js\");\nvar _authMiddleware = require(\"../middleware/authMiddleware.js\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// import express from \"express\";\n// import {\n//   creditAccount,\n//   debitAccount,\n//   getTransactions,\n//   getTransactionById,\n// } from \"../controllers/transactionController.js\";\n// import { verifyToken } from \"../middleware/authMiddleware.js\";\n\n// const router = express.Router();\n\n// // ✅ Credit (Deposit) Money - Staff Only\n// router.post(\"/:accountId/credit\", verifyToken, creditAccount);\n\n// // ✅ Debit (Withdraw) Money - Staff Only\n// router.post(\"/:accountId/debit\", verifyToken, debitAccount);\n\n// // ✅ Get Transaction History\n// router.get(\"/:accountId\", verifyToken, getTransactions);\n\n// // ✅ Get Specific Transaction\n// router.get(\"/details/:transactionId\", verifyToken, getTransactionById);\n\n// export default router;\n\nconst router = _express.default.Router();\n\n// ✅ Staff can credit an account\nrouter.post(\"/:accountId/credit\", _authMiddleware.verifyToken, _authMiddleware.isStaff, _transactionController.creditAccount);\n\n// ✅ Staff can debit an account\nrouter.post(\"/:accountId/debit\", _authMiddleware.verifyToken, _authMiddleware.isStaff, _transactionController.debitAccount);\n\n// ✅ Users can view their transaction history\nrouter.get(\"/:accountId/transactions\", _authMiddleware.verifyToken, _transactionController.getTransactions);\n\n// ✅ Users can view a specific transaction\nrouter.get(\"/:transactionId\", _authMiddleware.verifyToken, _transactionController.getTransactionById);\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3RyYW5zYWN0aW9uQ29udHJvbGxlciIsIl9hdXRoTWlkZGxld2FyZSIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJwb3N0IiwidmVyaWZ5VG9rZW4iLCJpc1N0YWZmIiwiY3JlZGl0QWNjb3VudCIsImRlYml0QWNjb3VudCIsImdldCIsImdldFRyYW5zYWN0aW9ucyIsImdldFRyYW5zYWN0aW9uQnlJZCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxzZXJnZVxcYmFua2EtYXBpXFxzcmNcXHJvdXRlc1xcIiwic291cmNlcyI6WyJ0cmFuc2FjdGlvblJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xyXG4vLyBpbXBvcnQge1xyXG4vLyAgIGNyZWRpdEFjY291bnQsXHJcbi8vICAgZGViaXRBY2NvdW50LFxyXG4vLyAgIGdldFRyYW5zYWN0aW9ucyxcclxuLy8gICBnZXRUcmFuc2FjdGlvbkJ5SWQsXHJcbi8vIH0gZnJvbSBcIi4uL2NvbnRyb2xsZXJzL3RyYW5zYWN0aW9uQ29udHJvbGxlci5qc1wiO1xyXG4vLyBpbXBvcnQgeyB2ZXJpZnlUb2tlbiB9IGZyb20gXCIuLi9taWRkbGV3YXJlL2F1dGhNaWRkbGV3YXJlLmpzXCI7XHJcblxyXG4vLyBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxuLy8gLy8g4pyFIENyZWRpdCAoRGVwb3NpdCkgTW9uZXkgLSBTdGFmZiBPbmx5XHJcbi8vIHJvdXRlci5wb3N0KFwiLzphY2NvdW50SWQvY3JlZGl0XCIsIHZlcmlmeVRva2VuLCBjcmVkaXRBY2NvdW50KTtcclxuXHJcbi8vIC8vIOKchSBEZWJpdCAoV2l0aGRyYXcpIE1vbmV5IC0gU3RhZmYgT25seVxyXG4vLyByb3V0ZXIucG9zdChcIi86YWNjb3VudElkL2RlYml0XCIsIHZlcmlmeVRva2VuLCBkZWJpdEFjY291bnQpO1xyXG5cclxuLy8gLy8g4pyFIEdldCBUcmFuc2FjdGlvbiBIaXN0b3J5XHJcbi8vIHJvdXRlci5nZXQoXCIvOmFjY291bnRJZFwiLCB2ZXJpZnlUb2tlbiwgZ2V0VHJhbnNhY3Rpb25zKTtcclxuXHJcbi8vIC8vIOKchSBHZXQgU3BlY2lmaWMgVHJhbnNhY3Rpb25cclxuLy8gcm91dGVyLmdldChcIi9kZXRhaWxzLzp0cmFuc2FjdGlvbklkXCIsIHZlcmlmeVRva2VuLCBnZXRUcmFuc2FjdGlvbkJ5SWQpO1xyXG5cclxuLy8gZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xyXG5pbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQge1xyXG4gIGNyZWRpdEFjY291bnQsXHJcbiAgZGViaXRBY2NvdW50LFxyXG4gIGdldFRyYW5zYWN0aW9ucyxcclxuICBnZXRUcmFuc2FjdGlvbkJ5SWQsXHJcbn0gZnJvbSBcIi4uL2NvbnRyb2xsZXJzL3RyYW5zYWN0aW9uQ29udHJvbGxlci5qc1wiO1xyXG5pbXBvcnQgeyBpc1N0YWZmLCB2ZXJpZnlUb2tlbiB9IGZyb20gXCIuLi9taWRkbGV3YXJlL2F1dGhNaWRkbGV3YXJlLmpzXCI7XHJcblxyXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxuLy8g4pyFIFN0YWZmIGNhbiBjcmVkaXQgYW4gYWNjb3VudFxyXG5yb3V0ZXIucG9zdChcIi86YWNjb3VudElkL2NyZWRpdFwiLCB2ZXJpZnlUb2tlbixpc1N0YWZmLCBjcmVkaXRBY2NvdW50KTtcclxuXHJcbi8vIOKchSBTdGFmZiBjYW4gZGViaXQgYW4gYWNjb3VudFxyXG5yb3V0ZXIucG9zdChcIi86YWNjb3VudElkL2RlYml0XCIsIHZlcmlmeVRva2VuLGlzU3RhZmYsIGRlYml0QWNjb3VudCk7XHJcblxyXG4vLyDinIUgVXNlcnMgY2FuIHZpZXcgdGhlaXIgdHJhbnNhY3Rpb24gaGlzdG9yeVxyXG5yb3V0ZXIuZ2V0KFwiLzphY2NvdW50SWQvdHJhbnNhY3Rpb25zXCIsIHZlcmlmeVRva2VuLCBnZXRUcmFuc2FjdGlvbnMpO1xyXG5cclxuLy8g4pyFIFVzZXJzIGNhbiB2aWV3IGEgc3BlY2lmaWMgdHJhbnNhY3Rpb25cclxucm91dGVyLmdldChcIi86dHJhbnNhY3Rpb25JZFwiLCB2ZXJpZnlUb2tlbiwgZ2V0VHJhbnNhY3Rpb25CeUlkKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUF3QkEsSUFBQUEsUUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsc0JBQUEsR0FBQUQsT0FBQTtBQU1BLElBQUFFLGVBQUEsR0FBQUYsT0FBQTtBQUF1RSxTQUFBRCx1QkFBQUksQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQS9CdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQVVBLE1BQU1HLE1BQU0sR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxDQUFDLENBQUM7O0FBRS9CO0FBQ0FGLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLG9CQUFvQixFQUFFQywyQkFBVyxFQUFDQyx1QkFBTyxFQUFFQyxvQ0FBYSxDQUFDOztBQUVyRTtBQUNBTixNQUFNLENBQUNHLElBQUksQ0FBQyxtQkFBbUIsRUFBRUMsMkJBQVcsRUFBQ0MsdUJBQU8sRUFBRUUsbUNBQVksQ0FBQzs7QUFFbkU7QUFDQVAsTUFBTSxDQUFDUSxHQUFHLENBQUMsMEJBQTBCLEVBQUVKLDJCQUFXLEVBQUVLLHNDQUFlLENBQUM7O0FBRXBFO0FBQ0FULE1BQU0sQ0FBQ1EsR0FBRyxDQUFDLGlCQUFpQixFQUFFSiwyQkFBVyxFQUFFTSx5Q0FBa0IsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FBQUMsT0FBQSxDQUFBYixPQUFBLEdBRWhEQyxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_express","_interopRequireDefault","require","_transactionController","_authMiddleware","e","__esModule","default","router","express","Router","post","verifyToken","isStaff","creditAccount","debitAccount","get","getTransactions","getTransactionById","_default","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\routes\\","sources":["transactionRoutes.js"],"sourcesContent":["// import express from \"express\";\r\n// import {\r\n//   creditAccount,\r\n//   debitAccount,\r\n//   getTransactions,\r\n//   getTransactionById,\r\n// } from \"../controllers/transactionController.js\";\r\n// import { verifyToken } from \"../middleware/authMiddleware.js\";\r\n\r\n// const router = express.Router();\r\n\r\n// // ✅ Credit (Deposit) Money - Staff Only\r\n// router.post(\"/:accountId/credit\", verifyToken, creditAccount);\r\n\r\n// // ✅ Debit (Withdraw) Money - Staff Only\r\n// router.post(\"/:accountId/debit\", verifyToken, debitAccount);\r\n\r\n// // ✅ Get Transaction History\r\n// router.get(\"/:accountId\", verifyToken, getTransactions);\r\n\r\n// // ✅ Get Specific Transaction\r\n// router.get(\"/details/:transactionId\", verifyToken, getTransactionById);\r\n\r\n// export default router;\r\nimport express from \"express\";\r\nimport {\r\n  creditAccount,\r\n  debitAccount,\r\n  getTransactions,\r\n  getTransactionById,\r\n} from \"../controllers/transactionController.js\";\r\nimport { isStaff, verifyToken } from \"../middleware/authMiddleware.js\";\r\n\r\nconst router = express.Router();\r\n\r\n// ✅ Staff can credit an account\r\nrouter.post(\"/:accountId/credit\", verifyToken,isStaff, creditAccount);\r\n\r\n// ✅ Staff can debit an account\r\nrouter.post(\"/:accountId/debit\", verifyToken,isStaff, debitAccount);\r\n\r\n// ✅ Users can view their transaction history\r\nrouter.get(\"/:accountId/transactions\", verifyToken, getTransactions);\r\n\r\n// ✅ Users can view a specific transaction\r\nrouter.get(\"/:transactionId\", verifyToken, getTransactionById);\r\n\r\nexport default router;\r\n"],"mappings":";;;;;;AAwBA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,sBAAA,GAAAD,OAAA;AAMA,IAAAE,eAAA,GAAAF,OAAA;AAAuE,SAAAD,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AA/BvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAUA,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,CAAC,CAAC;;AAE/B;AACAF,MAAM,CAACG,IAAI,CAAC,oBAAoB,EAAEC,2BAAW,EAACC,uBAAO,EAAEC,oCAAa,CAAC;;AAErE;AACAN,MAAM,CAACG,IAAI,CAAC,mBAAmB,EAAEC,2BAAW,EAACC,uBAAO,EAAEE,mCAAY,CAAC;;AAEnE;AACAP,MAAM,CAACQ,GAAG,CAAC,0BAA0B,EAAEJ,2BAAW,EAAEK,sCAAe,CAAC;;AAEpE;AACAT,MAAM,CAACQ,GAAG,CAAC,iBAAiB,EAAEJ,2BAAW,EAAEM,yCAAkB,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAb,OAAA,GAEhDC,MAAM","ignoreList":[]}},"mtime":1742584020426},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\controllers\\\\transactionController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getTransactions = exports.getTransactionById = exports.debitAccount = exports.creditAccount = void 0;\nvar _Transaction = _interopRequireDefault(require(\"../models/Transaction.js\"));\nvar _account = _interopRequireDefault(require(\"../models/account.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// // // // import Transaction from \"../models/Transaction.js\";\n// // // // import Account from \"../models/account.js\";\n// // // // import User from \"../models/user.js\";\n\n// // // // // ✅ Deposit Money (Credit)\n// // // // export const creditAccount = async (req, res) => {\n// // // //   try {\n// // // //     const { accountId } = req.params;\n// // // //     const { amount } = req.body;\n// // // //     const cashierId = req.user.id; // Logged-in staff (cashier)\n\n// // // //     // ✅ Validate account existence\n// // // //     const account = await Account.findById(accountId);\n// // // //     if (!account) return res.status(404).json({ error: \"Account not found\" });\n\n// // // //     // ✅ Update balance\n// // // //     account.balance += amount;\n// // // //     await account.save();\n\n// // // //     // ✅ Create transaction record\n// // // //     const transaction = await Transaction.create({\n// // // //       accountId,\n// // // //       cashierId,\n// // // //       type: \"credit\",\n// // // //       amount,\n// // // //       newBalance: account.balance,\n// // // //     });\n\n// // // //     res.status(201).json({\n// // // //       message: \"Account credited successfully\",\n// // // //       data: transaction,\n// // // //     });\n// // // //   } catch (error) {\n// // // //     console.error(\"❌ Credit Transaction Error:\", error);\n// // // //     res.status(500).json({ error: \"Internal server error\" });\n// // // //   }\n// // // // };\n\n// // // // // ✅ Withdraw Money (Debit)\n// // // // export const debitAccount = async (req, res) => {\n// // // //   try {\n// // // //     const { accountId } = req.params;\n// // // //     const { amount } = req.body;\n// // // //     const cashierId = req.user.id;\n\n// // // //     // ✅ Validate account existence\n// // // //     const account = await Account.findById(accountId);\n// // // //     if (!account) return res.status(404).json({ error: \"Account not found\" });\n\n// // // //     // ✅ Check sufficient funds\n// // // //     if (account.balance < amount) {\n// // // //       return res.status(400).json({ error: \"Insufficient funds\" });\n// // // //     }\n\n// // // //     // ✅ Update balance\n// // // //     account.balance -= amount;\n// // // //     await account.save();\n\n// // // //     // ✅ Create transaction record\n// // // //     const transaction = await Transaction.create({\n// // // //       accountId,\n// // // //       cashierId,\n// // // //       type: \"debit\",\n// // // //       amount,\n// // // //       newBalance: account.balance,\n// // // //     });\n\n// // // //     res.status(201).json({\n// // // //       message: \"Account debited successfully\",\n// // // //       data: transaction,\n// // // //     });\n// // // //   } catch (error) {\n// // // //     console.error(\"❌ Debit Transaction Error:\", error);\n// // // //     res.status(500).json({ error: \"Internal server error\" });\n// // // //   }\n// // // // };\n\n// // // // // ✅ Get Transaction History\n// // // // export const getTransactions = async (req, res) => {\n// // // //   try {\n// // // //     const { accountId } = req.params;\n\n// // // //     // ✅ Validate account existence\n// // // //     const account = await Account.findById(accountId);\n// // // //     if (!account) return res.status(404).json({ error: \"Account not found\" });\n\n// // // //     // ✅ Fetch transactions\n// // // //     const transactions = await Transaction.find({ accountId }).sort({ createdAt: -1 });\n\n// // // //     res.status(200).json({ data: transactions });\n// // // //   } catch (error) {\n// // // //     console.error(\"❌ Get Transactions Error:\", error);\n// // // //     res.status(500).json({ error: \"Internal server error\" });\n// // // //   }\n// // // // };\n\n// // // // // ✅ Get a Specific Transaction\n// // // // export const getTransactionById = async (req, res) => {\n// // // //   try {\n// // // //     const { transactionId } = req.params;\n\n// // // //     // ✅ Validate transaction existence\n// // // //     const transaction = await Transaction.findById(transactionId);\n// // // //     if (!transaction) return res.status(404).json({ error: \"Transaction not found\" });\n\n// // // //     res.status(200).json({ data: transaction });\n// // // //   } catch (error) {\n// // // //     console.error(\"❌ Get Transaction Error:\", error);\n// // // //     res.status(500).json({ error: \"Internal server error\" });\n// // // //   }\n// // // // };\n// // import Transaction from \"../models/Transaction.js\";\n// // import Account from \"../models/account.js\";\n// // import User from \"../models/user.js\";\n\n// // // ✅ Deposit Money (Credit) - Staff Only\n// // export const creditAccount = async (req, res) => {\n// //   try {\n// //     const { accountId } = req.params;\n// //     const { amount } = req.body;\n\n// //     // ✅ Ensure only staff can credit accounts\n// //     if (req.user.role !== \"staff\") {\n// //       return res.status(403).json({ error: \"Access denied. Only staff can process transactions\" });\n// //     }\n\n// //     // ✅ Validate account existence\n// //     const account = await Account.findById(accountId);\n// //     if (!account) return res.status(404).json({ error: \"Account not found\" });\n\n// //     // ✅ Update balance\n// //     account.balance += amount;\n// //     await account.save();\n\n// //     // ✅ Create transaction record\n// //     const transaction = await Transaction.create({\n// //       accountId,\n// //       cashierId: req.user.id,\n// //       type: \"credit\",\n// //       amount,\n// //       newBalance: account.balance,\n// //     });\n\n// //     res.status(201).json({\n// //       message: \"Account credited successfully\",\n// //       data: transaction,\n// //     });\n// //   } catch (error) {\n// //     console.error(\"❌ Credit Transaction Error:\", error);\n// //     res.status(500).json({ error: \"Internal server error\" });\n// //   }\n// // };\n\n// // // ✅ Withdraw Money (Debit) - Staff Only\n// // export const debitAccount = async (req, res) => {\n// //   try {\n// //     const { accountId } = req.params;\n// //     const { amount } = req.body;\n\n// //     // ✅ Ensure only staff can debit accounts\n// //     if (req.user.role !== \"staff\") {\n// //       return res.status(403).json({ error: \"Access denied. Only staff can process transactions\" });\n// //     }\n\n// //     // ✅ Validate account existence\n// //     const account = await Account.findById(accountId);\n// //     if (!account) return res.status(404).json({ error: \"Account not found\" });\n\n// //     // ✅ Check sufficient funds\n// //     if (account.balance < amount) {\n// //       return res.status(400).json({ error: \"Insufficient funds\" });\n// //     }\n\n// //     // ✅ Update balance\n// //     account.balance -= amount;\n// //     await account.save();\n\n// //     // ✅ Create transaction record\n// //     const transaction = await Transaction.create({\n// //       accountId,\n// //       cashierId: req.user.id,\n// //       type: \"debit\",\n// //       amount,\n// //       newBalance: account.balance,\n// //     });\n\n// //     res.status(201).json({\n// //       message: \"Account debited successfully\",\n// //       data: transaction,\n// //     });\n// //   } catch (error) {\n// //     console.error(\"❌ Debit Transaction Error:\", error);\n// //     res.status(500).json({ error: \"Internal server error\" });\n// //   }\n// // };\n\n// // // ✅ Get Transaction History (User only)\n// // export const getTransactions = async (req, res) => {\n// //   try {\n// //     const { accountId } = req.params;\n\n// //     // ✅ Ensure the user owns the account\n// //     const account = await Account.findOne({ _id: accountId, owner: req.user.id });\n// //     if (!account) return res.status(404).json({ error: \"Account not found or unauthorized\" });\n\n// //     // ✅ Fetch transactions\n// //     const transactions = await Transaction.find({ accountId }).sort({ createdAt: -1 });\n\n// //     res.status(200).json({ data: transactions });\n// //   } catch (error) {\n// //     console.error(\"❌ Get Transactions Error:\", error);\n// //     res.status(500).json({ error: \"Internal server error\" });\n// //   }\n// // };\n\n// // // ✅ Get a Specific Transaction (User only)\n// // export const getTransactionById = async (req, res) => {\n// //   try {\n// //     const { transactionId } = req.params;\n\n// //     // ✅ Validate transaction existence\n// //     const transaction = await Transaction.findById(transactionId);\n// //     if (!transaction) return res.status(404).json({ error: \"Transaction not found\" });\n\n// //     // ✅ Ensure the user owns the account related to this transaction\n// //     const account = await Account.findOne({ _id: transaction.accountId, owner: req.user.id });\n// //     if (!account) return res.status(403).json({ error: \"Unauthorized access to transaction\" });\n\n// //     res.status(200).json({ data: transaction });\n// //   } catch (error) {\n// //     console.error(\"❌ Get Transaction Error:\", error);\n// //     res.status(500).json({ error: \"Internal server error\" });\n// //   }\n// // };\n// // // import Transaction from \"../models/Transaction.js\";\n// // // import Account from \"../models/account.js\";\n// // // import User from \"../models/user.js\";\n// // // import mongoose from \"mongoose\";\n\n// // // // ✅ Deposit Money (Credit) - Staff Only\n// // // export const creditAccount = async (req, res) => {\n// // //   try {\n// // //     const { accountId } = req.params;\n// // //     const { amount } = req.body;\n\n// // //     // ✅ Ensure only staff can credit accounts\n// // //     if (!req.user || req.user.role !== \"staff\") {\n// // //       return res.status(403).json({ error: \"Access denied. Only staff can process transactions\" });\n// // //     }\n\n// // //     // ✅ Validate amount\n// // //     if (!amount || amount <= 0) {\n// // //       return res.status(400).json({ error: \"Invalid amount. Must be greater than 0\" });\n// // //     }\n\n// // //     // ✅ Validate account existence\n// // //     if (!mongoose.Types.ObjectId.isValid(accountId)) {\n// // //       return res.status(400).json({ error: \"Invalid account ID format\" });\n// // //     }\n\n// // //     const account = await Account.findById(accountId);\n// // //     if (!account) return res.status(404).json({ error: \"Account not found\" });\n\n// // //     // ✅ Update balance\n// // //     account.balance += amount;\n// // //     await account.save();\n\n// // //     // ✅ Create transaction record\n// // //     const transaction = await Transaction.create({\n// // //       accountId,\n// // //       cashierId: req.user.id,\n// // //       type: \"credit\",\n// // //       amount,\n// // //       newBalance: account.balance,\n// // //     });\n\n// // //     res.status(201).json({\n// // //       message: \"Account credited successfully\",\n// // //       data: transaction,\n// // //     });\n// // //   } catch (error) {\n// // //     console.error(\"❌ Credit Transaction Error:\", error);\n// // //     res.status(500).json({ error: \"Internal server error\" });\n// // //   }\n// // // };\n\n// // // // ✅ Withdraw Money (Debit) - Staff Only\n// // // export const debitAccount = async (req, res) => {\n// // //   try {\n// // //     const { accountId } = req.params;\n// // //     const { amount } = req.body;\n\n// // //     // ✅ Ensure only staff can debit accounts\n// // //     if (!req.user || req.user.role !== \"staff\") {\n// // //       return res.status(403).json({ error: \"Access denied. Only staff can process transactions\" });\n// // //     }\n\n// // //     // ✅ Validate amount\n// // //     if (!amount || amount <= 0) {\n// // //       return res.status(400).json({ error: \"Invalid amount. Must be greater than 0\" });\n// // //     }\n\n// // //     // ✅ Validate account existence\n// // //     if (!mongoose.Types.ObjectId.isValid(accountId)) {\n// // //       return res.status(400).json({ error: \"Invalid account ID format\" });\n// // //     }\n\n// // //     const account = await Account.findById(accountId);\n// // //     if (!account) return res.status(404).json({ error: \"Account not found\" });\n\n// // //     // ✅ Check sufficient funds\n// // //     if (account.balance < amount) {\n// // //       return res.status(400).json({ error: \"Insufficient funds\" });\n// // //     }\n\n// // //     // ✅ Update balance\n// // //     account.balance -= amount;\n// // //     await account.save();\n\n// // //     // ✅ Create transaction record\n// // //     const transaction = await Transaction.create({\n// // //       accountId,\n// // //       cashierId: req.user.id,\n// // //       type: \"debit\",\n// // //       amount,\n// // //       newBalance: account.balance,\n// // //     });\n\n// // //     res.status(201).json({\n// // //       message: \"Account debited successfully\",\n// // //       data: transaction,\n// // //     });\n// // //   } catch (error) {\n// // //     console.error(\"❌ Debit Transaction Error:\", error);\n// // //     res.status(500).json({ error: \"Internal server error\" });\n// // //   }\n// // // };\n\n// // // // ✅ Get Transaction History (User Only)\n// // // export const getTransactions = async (req, res) => {\n// // //   try {\n// // //     const { accountId } = req.params;\n\n// // //     // ✅ Validate account ID format\n// // //     if (!mongoose.Types.ObjectId.isValid(accountId)) {\n// // //       return res.status(400).json({ error: \"Invalid account ID format\" });\n// // //     }\n\n// // //     // ✅ Ensure the user owns the account\n// // //     const account = await Account.findOne({ _id: accountId, owner: req.user.id });\n// // //     if (!account) return res.status(404).json({ error: \"Account not found or unauthorized\" });\n\n// // //     // ✅ Fetch transactions\n// // //     const transactions = await Transaction.find({ accountId }).sort({ createdAt: -1 });\n\n// // //     res.status(200).json({ data: transactions });\n// // //   } catch (error) {\n// // //     console.error(\"❌ Get Transactions Error:\", error);\n// // //     res.status(500).json({ error: \"Internal server error\" });\n// // //   }\n// // // };\n\n// // // // ✅ Get a Specific Transaction (User Only)\n// // // export const getTransactionById = async (req, res) => {\n// // //   try {\n// // //     const { transactionId } = req.params;\n\n// // //     // ✅ Validate transaction ID format\n// // //     if (!mongoose.Types.ObjectId.isValid(transactionId)) {\n// // //       return res.status(400).json({ error: \"Invalid transaction ID format\" });\n// // //     }\n\n// // //     // ✅ Validate transaction existence\n// // //     const transaction = await Transaction.findById(transactionId);\n// // //     if (!transaction) return res.status(404).json({ error: \"Transaction not found\" });\n\n// // //     // ✅ Ensure the user owns the account related to this transaction\n// // //     const account = await Account.findOne({ _id: transaction.accountId, owner: req.user.id });\n// // //     if (!account) return res.status(403).json({ error: \"Unauthorized access to transaction\" });\n\n// // //     res.status(200).json({ data: transaction });\n// // //   } catch (error) {\n// // //     console.error(\"❌ Get Transaction Error:\", error);\n// // //     res.status(500).json({ error: \"Internal server error\" });\n// // //   }\n// // // };\n// import Transaction from \"../models/Transaction.js\";\n// import Account from \"../models/account.js\";\n\n// // ✅ Deposit Money (Credit) - Staff Only\n// export const creditAccount = async (req, res) => {\n//   try {\n//     const { accountId } = req.params;\n//     const { amount } = req.body;\n\n//     if (req.user.role !== \"staff\") {\n//       return res.status(403).json({ error: \"Access denied. Only staff can process transactions\" });\n//     }\n\n//     if (!amount || amount <= 0) {\n//       return res.status(400).json({ error: \"Invalid amount. Must be greater than zero.\" });\n//     }\n\n//     const account = await Account.findById(accountId);\n//     if (!account) return res.status(404).json({ error: \"Account not found\" });\n\n//     account.balance += amount;\n//     await account.save();\n\n//     const transaction = await Transaction.create({\n//       accountId,\n//       cashierId: req.user.id,\n//       type: \"credit\",\n//       amount,\n//       newBalance: account.balance,\n//     });\n\n//     res.status(201).json({\n//       message: \"Account credited successfully\",\n//       data: transaction,\n//     });\n//   } catch (error) {\n//     console.error(\"❌ Credit Transaction Error:\", error);\n//     res.status(500).json({ error: \"Internal server error\" });\n//   }\n// };\n\n// // ✅ Withdraw Money (Debit) - Staff Only\n// export const debitAccount = async (req, res) => {\n//   try {\n//     const { accountId } = req.params;\n//     const { amount } = req.body;\n\n//     if (req.user.role !== \"staff\") {\n//       return res.status(403).json({ error: \"Access denied. Only staff can process transactions\" });\n//     }\n\n//     if (!amount || amount <= 0) {\n//       return res.status(400).json({ error: \"Invalid amount. Must be greater than zero.\" });\n//     }\n\n//     const account = await Account.findById(accountId);\n//     if (!account) return res.status(404).json({ error: \"Account not found\" });\n\n//     if (account.balance < amount) {\n//       return res.status(400).json({ error: \"Insufficient funds\" });\n//     }\n\n//     account.balance -= amount;\n//     await account.save();\n\n//     const transaction = await Transaction.create({\n//       accountId,\n//       cashierId: req.user.id,\n//       type: \"debit\",\n//       amount,\n//       newBalance: account.balance,\n//     });\n\n//     res.status(201).json({\n//       message: \"Account debited successfully\",\n//       data: transaction,\n//     });\n//   } catch (error) {\n//     console.error(\"❌ Debit Transaction Error:\", error);\n//     res.status(500).json({ error: \"Internal server error\" });\n//   }\n// };\n\n// // ✅ Get Transaction History (User only)\n// export const getTransactions = async (req, res) => {\n//   try {\n//     const { accountId } = req.params;\n\n//     const account = await Account.findOne({ _id: accountId, owner: req.user.id });\n//     if (!account) return res.status(404).json({ error: \"Account not found or unauthorized\" });\n\n//     const transactions = await Transaction.find({ accountId }).sort({ createdAt: -1 });\n\n//     res.status(200).json({ data: transactions });\n//   } catch (error) {\n//     console.error(\"❌ Get Transactions Error:\", error);\n//     res.status(500).json({ error: \"Internal server error\" });\n//   }\n// };\n\n// // ✅ Get a Specific Transaction (User only)\n// export const getTransactionById = async (req, res) => {\n//   try {\n//     const { transactionId } = req.params;\n\n//     const transaction = await Transaction.findById(transactionId);\n//     if (!transaction) return res.status(404).json({ error: \"Transaction not found\" });\n\n//     const account = await Account.findOne({ _id: transaction.accountId, owner: req.user.id });\n//     if (!account) return res.status(403).json({ error: \"Unauthorized access to transaction\" });\n\n//     res.status(200).json({ data: transaction });\n//   } catch (error) {\n//     console.error(\"❌ Get Transaction Error:\", error);\n//     res.status(500).json({ error: \"Internal server error\" });\n//   }\n// };\n\n// ✅ Deposit Money (Credit) - Staff Only\nconst creditAccount = async (req, res) => {\n  try {\n    if (!req.user?.id) {\n      console.error(\"❌ Missing User ID in Token:\", req.user);\n      return res.status(403).json({\n        error: \"Invalid token: User ID missing\"\n      });\n    }\n    console.log(\"🔍 Token Decoded:\", req.user);\n    const {\n      accountId\n    } = req.params;\n    const {\n      amount\n    } = req.body;\n    if (req.user.role !== \"staff\") {\n      return res.status(403).json({\n        error: \"Access denied. Only staff can process transactions\"\n      });\n    }\n    if (!amount || amount <= 0) {\n      return res.status(400).json({\n        error: \"Invalid amount. Must be greater than zero.\"\n      });\n    }\n    const account = await _account.default.findById(accountId);\n    if (!account) return res.status(404).json({\n      error: \"Account not found\"\n    });\n    account.balance += amount;\n    await account.save();\n    const transaction = await _Transaction.default.create({\n      accountId,\n      cashierId: req.user.id,\n      type: \"credit\",\n      amount,\n      newBalance: account.balance\n    });\n    res.status(201).json({\n      message: \"Account credited successfully\",\n      data: transaction\n    });\n  } catch (error) {\n    console.error(\"❌ Credit Transaction Error:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n// ✅ Withdraw Money (Debit) - Staff Only\nexports.creditAccount = creditAccount;\nconst debitAccount = async (req, res) => {\n  try {\n    if (!req.user?.id) {\n      console.error(\"❌ Missing User ID in Token:\", req.user);\n      return res.status(403).json({\n        error: \"Invalid token: User ID missing\"\n      });\n    }\n    console.log(\"🔍 Token Decoded:\", req.user);\n    const {\n      accountId\n    } = req.params;\n    const {\n      amount\n    } = req.body;\n    if (req.user.role !== \"staff\") {\n      return res.status(403).json({\n        error: \"Access denied. Only staff can process transactions\"\n      });\n    }\n    if (!amount || amount <= 0) {\n      return res.status(400).json({\n        error: \"Invalid amount. Must be greater than zero.\"\n      });\n    }\n    const account = await _account.default.findById(accountId);\n    if (!account) return res.status(404).json({\n      error: \"Account not found\"\n    });\n    if (account.balance < amount) {\n      return res.status(400).json({\n        error: \"Insufficient funds\"\n      });\n    }\n    account.balance -= amount;\n    await account.save();\n    const transaction = await _Transaction.default.create({\n      accountId,\n      cashierId: req.user.id,\n      type: \"debit\",\n      amount,\n      newBalance: account.balance\n    });\n    res.status(201).json({\n      message: \"Account debited successfully\",\n      data: transaction\n    });\n  } catch (error) {\n    console.error(\"❌ Debit Transaction Error:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n// ✅ Get Transaction History (User only)\n// export const getTransactions = async (req, res) => {\n//   try {\n//     if (!req.user?.id) {\n//       console.error(\"❌ Missing User ID in Token:\", req.user);\n//       return res.status(403).json({ error: \"Invalid token: User ID missing\" });\n//     }\n//     console.log(\"🔍 Token Decoded:\", req.user);\n\n//     const { accountId } = req.params;\n\n//     const account = await Account.findOne({ _id: accountId, owner: req.user.id });\n//     if (!account) return res.status(404).json({ error: \"Account not found or unauthorized\" });\n\n//     const transactions = await Transaction.find({ accountId }).sort({ createdAt: -1 });\n\n//     res.status(200).json({ data: transactions });\n//   } catch (error) {\n//     console.error(\"❌ Get Transactions Error:\", error);\n//     res.status(500).json({ error: \"Internal server error\" });\n//   }\n// };\nexports.debitAccount = debitAccount;\nconst getTransactions = async (req, res) => {\n  try {\n    if (!req.user?.id) {\n      console.error(\"❌ Missing User ID in Token:\", req.user);\n      return res.status(403).json({\n        error: \"Invalid token: User ID missing\"\n      });\n    }\n    console.log(\"🔍 Token Decoded:\", req.user);\n    const {\n      accountId\n    } = req.params;\n    const account = await _account.default.findOne({\n      _id: accountId,\n      owner: req.user.id\n    });\n    if (!account) return res.status(404).json({\n      error: \"Account not found or unauthorized\"\n    });\n    const transactions = await _Transaction.default.find({\n      accountId\n    });\n    console.log(\"🚀 Retrieved Transactions:\", transactions); // Debug log\n\n    if (!transactions || !Array.isArray(transactions)) {\n      throw new Error(\"Transactions not found or invalid format\");\n    }\n    const sortedTransactions = transactions.sort((a, b) => b.createdAt - a.createdAt); // Sorting locally\n\n    res.status(200).json({\n      data: sortedTransactions\n    });\n  } catch (error) {\n    console.error(\"❌ Get Transactions Error:\", error.message);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\n\n// ✅ Get a Specific Transaction (User only)\nexports.getTransactions = getTransactions;\nconst getTransactionById = async (req, res) => {\n  try {\n    if (!req.user?.id) {\n      console.error(\"❌ Missing User ID in Token:\", req.user);\n      return res.status(403).json({\n        error: \"Invalid token: User ID missing\"\n      });\n    }\n    console.log(\"🔍 Token Decoded:\", req.user);\n    const {\n      transactionId\n    } = req.params;\n    const transaction = await _Transaction.default.findById(transactionId);\n    if (!transaction) return res.status(404).json({\n      error: \"Transaction not found\"\n    });\n    const account = await _account.default.findOne({\n      _id: transaction.accountId,\n      owner: req.user.id\n    });\n    if (!account) return res.status(403).json({\n      error: \"Unauthorized access to transaction\"\n    });\n    res.status(200).json({\n      data: transaction\n    });\n  } catch (error) {\n    console.error(\"❌ Get Transaction Error:\", error);\n    res.status(500).json({\n      error: \"Internal server error\"\n    });\n  }\n};\nexports.getTransactionById = getTransactionById;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfVHJhbnNhY3Rpb24iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9hY2NvdW50IiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY3JlZGl0QWNjb3VudCIsInJlcSIsInJlcyIsInVzZXIiLCJpZCIsImNvbnNvbGUiLCJlcnJvciIsInN0YXR1cyIsImpzb24iLCJsb2ciLCJhY2NvdW50SWQiLCJwYXJhbXMiLCJhbW91bnQiLCJib2R5Iiwicm9sZSIsImFjY291bnQiLCJBY2NvdW50IiwiZmluZEJ5SWQiLCJiYWxhbmNlIiwic2F2ZSIsInRyYW5zYWN0aW9uIiwiVHJhbnNhY3Rpb24iLCJjcmVhdGUiLCJjYXNoaWVySWQiLCJ0eXBlIiwibmV3QmFsYW5jZSIsIm1lc3NhZ2UiLCJkYXRhIiwiZXhwb3J0cyIsImRlYml0QWNjb3VudCIsImdldFRyYW5zYWN0aW9ucyIsImZpbmRPbmUiLCJfaWQiLCJvd25lciIsInRyYW5zYWN0aW9ucyIsImZpbmQiLCJBcnJheSIsImlzQXJyYXkiLCJFcnJvciIsInNvcnRlZFRyYW5zYWN0aW9ucyIsInNvcnQiLCJhIiwiYiIsImNyZWF0ZWRBdCIsImdldFRyYW5zYWN0aW9uQnlJZCIsInRyYW5zYWN0aW9uSWQiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcc2VyZ2VcXGJhbmthLWFwaVxcc3JjXFxjb250cm9sbGVyc1xcIiwic291cmNlcyI6WyJ0cmFuc2FjdGlvbkNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gLy8gLy8gLy8gaW1wb3J0IFRyYW5zYWN0aW9uIGZyb20gXCIuLi9tb2RlbHMvVHJhbnNhY3Rpb24uanNcIjtcclxuLy8gLy8gLy8gLy8gaW1wb3J0IEFjY291bnQgZnJvbSBcIi4uL21vZGVscy9hY2NvdW50LmpzXCI7XHJcbi8vIC8vIC8vIC8vIGltcG9ydCBVc2VyIGZyb20gXCIuLi9tb2RlbHMvdXNlci5qc1wiO1xyXG5cclxuLy8gLy8gLy8gLy8gLy8g4pyFIERlcG9zaXQgTW9uZXkgKENyZWRpdClcclxuLy8gLy8gLy8gLy8gZXhwb3J0IGNvbnN0IGNyZWRpdEFjY291bnQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuLy8gLy8gLy8gLy8gICB0cnkge1xyXG4vLyAvLyAvLyAvLyAgICAgY29uc3QgeyBhY2NvdW50SWQgfSA9IHJlcS5wYXJhbXM7XHJcbi8vIC8vIC8vIC8vICAgICBjb25zdCB7IGFtb3VudCB9ID0gcmVxLmJvZHk7XHJcbi8vIC8vIC8vIC8vICAgICBjb25zdCBjYXNoaWVySWQgPSByZXEudXNlci5pZDsgLy8gTG9nZ2VkLWluIHN0YWZmIChjYXNoaWVyKVxyXG5cclxuLy8gLy8gLy8gLy8gICAgIC8vIOKchSBWYWxpZGF0ZSBhY2NvdW50IGV4aXN0ZW5jZVxyXG4vLyAvLyAvLyAvLyAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IEFjY291bnQuZmluZEJ5SWQoYWNjb3VudElkKTtcclxuLy8gLy8gLy8gLy8gICAgIGlmICghYWNjb3VudCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiQWNjb3VudCBub3QgZm91bmRcIiB9KTtcclxuXHJcbi8vIC8vIC8vIC8vICAgICAvLyDinIUgVXBkYXRlIGJhbGFuY2VcclxuLy8gLy8gLy8gLy8gICAgIGFjY291bnQuYmFsYW5jZSArPSBhbW91bnQ7XHJcbi8vIC8vIC8vIC8vICAgICBhd2FpdCBhY2NvdW50LnNhdmUoKTtcclxuXHJcbi8vIC8vIC8vIC8vICAgICAvLyDinIUgQ3JlYXRlIHRyYW5zYWN0aW9uIHJlY29yZFxyXG4vLyAvLyAvLyAvLyAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4vLyAvLyAvLyAvLyAgICAgICBhY2NvdW50SWQsXHJcbi8vIC8vIC8vIC8vICAgICAgIGNhc2hpZXJJZCxcclxuLy8gLy8gLy8gLy8gICAgICAgdHlwZTogXCJjcmVkaXRcIixcclxuLy8gLy8gLy8gLy8gICAgICAgYW1vdW50LFxyXG4vLyAvLyAvLyAvLyAgICAgICBuZXdCYWxhbmNlOiBhY2NvdW50LmJhbGFuY2UsXHJcbi8vIC8vIC8vIC8vICAgICB9KTtcclxuXHJcbi8vIC8vIC8vIC8vICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XHJcbi8vIC8vIC8vIC8vICAgICAgIG1lc3NhZ2U6IFwiQWNjb3VudCBjcmVkaXRlZCBzdWNjZXNzZnVsbHlcIixcclxuLy8gLy8gLy8gLy8gICAgICAgZGF0YTogdHJhbnNhY3Rpb24sXHJcbi8vIC8vIC8vIC8vICAgICB9KTtcclxuLy8gLy8gLy8gLy8gICB9IGNhdGNoIChlcnJvcikge1xyXG4vLyAvLyAvLyAvLyAgICAgY29uc29sZS5lcnJvcihcIuKdjCBDcmVkaXQgVHJhbnNhY3Rpb24gRXJyb3I6XCIsIGVycm9yKTtcclxuLy8gLy8gLy8gLy8gICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbi8vIC8vIC8vIC8vICAgfVxyXG4vLyAvLyAvLyAvLyB9O1xyXG5cclxuLy8gLy8gLy8gLy8gLy8g4pyFIFdpdGhkcmF3IE1vbmV5IChEZWJpdClcclxuLy8gLy8gLy8gLy8gZXhwb3J0IGNvbnN0IGRlYml0QWNjb3VudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4vLyAvLyAvLyAvLyAgIHRyeSB7XHJcbi8vIC8vIC8vIC8vICAgICBjb25zdCB7IGFjY291bnRJZCB9ID0gcmVxLnBhcmFtcztcclxuLy8gLy8gLy8gLy8gICAgIGNvbnN0IHsgYW1vdW50IH0gPSByZXEuYm9keTtcclxuLy8gLy8gLy8gLy8gICAgIGNvbnN0IGNhc2hpZXJJZCA9IHJlcS51c2VyLmlkO1xyXG5cclxuLy8gLy8gLy8gLy8gICAgIC8vIOKchSBWYWxpZGF0ZSBhY2NvdW50IGV4aXN0ZW5jZVxyXG4vLyAvLyAvLyAvLyAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IEFjY291bnQuZmluZEJ5SWQoYWNjb3VudElkKTtcclxuLy8gLy8gLy8gLy8gICAgIGlmICghYWNjb3VudCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiQWNjb3VudCBub3QgZm91bmRcIiB9KTtcclxuXHJcbi8vIC8vIC8vIC8vICAgICAvLyDinIUgQ2hlY2sgc3VmZmljaWVudCBmdW5kc1xyXG4vLyAvLyAvLyAvLyAgICAgaWYgKGFjY291bnQuYmFsYW5jZSA8IGFtb3VudCkge1xyXG4vLyAvLyAvLyAvLyAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJJbnN1ZmZpY2llbnQgZnVuZHNcIiB9KTtcclxuLy8gLy8gLy8gLy8gICAgIH1cclxuXHJcbi8vIC8vIC8vIC8vICAgICAvLyDinIUgVXBkYXRlIGJhbGFuY2VcclxuLy8gLy8gLy8gLy8gICAgIGFjY291bnQuYmFsYW5jZSAtPSBhbW91bnQ7XHJcbi8vIC8vIC8vIC8vICAgICBhd2FpdCBhY2NvdW50LnNhdmUoKTtcclxuXHJcbi8vIC8vIC8vIC8vICAgICAvLyDinIUgQ3JlYXRlIHRyYW5zYWN0aW9uIHJlY29yZFxyXG4vLyAvLyAvLyAvLyAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4vLyAvLyAvLyAvLyAgICAgICBhY2NvdW50SWQsXHJcbi8vIC8vIC8vIC8vICAgICAgIGNhc2hpZXJJZCxcclxuLy8gLy8gLy8gLy8gICAgICAgdHlwZTogXCJkZWJpdFwiLFxyXG4vLyAvLyAvLyAvLyAgICAgICBhbW91bnQsXHJcbi8vIC8vIC8vIC8vICAgICAgIG5ld0JhbGFuY2U6IGFjY291bnQuYmFsYW5jZSxcclxuLy8gLy8gLy8gLy8gICAgIH0pO1xyXG5cclxuLy8gLy8gLy8gLy8gICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuLy8gLy8gLy8gLy8gICAgICAgbWVzc2FnZTogXCJBY2NvdW50IGRlYml0ZWQgc3VjY2Vzc2Z1bGx5XCIsXHJcbi8vIC8vIC8vIC8vICAgICAgIGRhdGE6IHRyYW5zYWN0aW9uLFxyXG4vLyAvLyAvLyAvLyAgICAgfSk7XHJcbi8vIC8vIC8vIC8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gLy8gLy8gLy8gICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRGViaXQgVHJhbnNhY3Rpb24gRXJyb3I6XCIsIGVycm9yKTtcclxuLy8gLy8gLy8gLy8gICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbi8vIC8vIC8vIC8vICAgfVxyXG4vLyAvLyAvLyAvLyB9O1xyXG5cclxuLy8gLy8gLy8gLy8gLy8g4pyFIEdldCBUcmFuc2FjdGlvbiBIaXN0b3J5XHJcbi8vIC8vIC8vIC8vIGV4cG9ydCBjb25zdCBnZXRUcmFuc2FjdGlvbnMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuLy8gLy8gLy8gLy8gICB0cnkge1xyXG4vLyAvLyAvLyAvLyAgICAgY29uc3QgeyBhY2NvdW50SWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4vLyAvLyAvLyAvLyAgICAgLy8g4pyFIFZhbGlkYXRlIGFjY291bnQgZXhpc3RlbmNlXHJcbi8vIC8vIC8vIC8vICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgQWNjb3VudC5maW5kQnlJZChhY2NvdW50SWQpO1xyXG4vLyAvLyAvLyAvLyAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJBY2NvdW50IG5vdCBmb3VuZFwiIH0pO1xyXG5cclxuLy8gLy8gLy8gLy8gICAgIC8vIOKchSBGZXRjaCB0cmFuc2FjdGlvbnNcclxuLy8gLy8gLy8gLy8gICAgIGNvbnN0IHRyYW5zYWN0aW9ucyA9IGF3YWl0IFRyYW5zYWN0aW9uLmZpbmQoeyBhY2NvdW50SWQgfSkuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSk7XHJcblxyXG4vLyAvLyAvLyAvLyAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBkYXRhOiB0cmFuc2FjdGlvbnMgfSk7XHJcbi8vIC8vIC8vIC8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gLy8gLy8gLy8gICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgR2V0IFRyYW5zYWN0aW9ucyBFcnJvcjpcIiwgZXJyb3IpO1xyXG4vLyAvLyAvLyAvLyAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9KTtcclxuLy8gLy8gLy8gLy8gICB9XHJcbi8vIC8vIC8vIC8vIH07XHJcblxyXG4vLyAvLyAvLyAvLyAvLyDinIUgR2V0IGEgU3BlY2lmaWMgVHJhbnNhY3Rpb25cclxuLy8gLy8gLy8gLy8gZXhwb3J0IGNvbnN0IGdldFRyYW5zYWN0aW9uQnlJZCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4vLyAvLyAvLyAvLyAgIHRyeSB7XHJcbi8vIC8vIC8vIC8vICAgICBjb25zdCB7IHRyYW5zYWN0aW9uSWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4vLyAvLyAvLyAvLyAgICAgLy8g4pyFIFZhbGlkYXRlIHRyYW5zYWN0aW9uIGV4aXN0ZW5jZVxyXG4vLyAvLyAvLyAvLyAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBUcmFuc2FjdGlvbi5maW5kQnlJZCh0cmFuc2FjdGlvbklkKTtcclxuLy8gLy8gLy8gLy8gICAgIGlmICghdHJhbnNhY3Rpb24pIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIlRyYW5zYWN0aW9uIG5vdCBmb3VuZFwiIH0pO1xyXG5cclxuLy8gLy8gLy8gLy8gICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgZGF0YTogdHJhbnNhY3Rpb24gfSk7XHJcbi8vIC8vIC8vIC8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gLy8gLy8gLy8gICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgR2V0IFRyYW5zYWN0aW9uIEVycm9yOlwiLCBlcnJvcik7XHJcbi8vIC8vIC8vIC8vICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0pO1xyXG4vLyAvLyAvLyAvLyAgIH1cclxuLy8gLy8gLy8gLy8gfTtcclxuLy8gLy8gaW1wb3J0IFRyYW5zYWN0aW9uIGZyb20gXCIuLi9tb2RlbHMvVHJhbnNhY3Rpb24uanNcIjtcclxuLy8gLy8gaW1wb3J0IEFjY291bnQgZnJvbSBcIi4uL21vZGVscy9hY2NvdW50LmpzXCI7XHJcbi8vIC8vIGltcG9ydCBVc2VyIGZyb20gXCIuLi9tb2RlbHMvdXNlci5qc1wiO1xyXG5cclxuLy8gLy8gLy8g4pyFIERlcG9zaXQgTW9uZXkgKENyZWRpdCkgLSBTdGFmZiBPbmx5XHJcbi8vIC8vIGV4cG9ydCBjb25zdCBjcmVkaXRBY2NvdW50ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbi8vIC8vICAgdHJ5IHtcclxuLy8gLy8gICAgIGNvbnN0IHsgYWNjb3VudElkIH0gPSByZXEucGFyYW1zO1xyXG4vLyAvLyAgICAgY29uc3QgeyBhbW91bnQgfSA9IHJlcS5ib2R5O1xyXG5cclxuLy8gLy8gICAgIC8vIOKchSBFbnN1cmUgb25seSBzdGFmZiBjYW4gY3JlZGl0IGFjY291bnRzXHJcbi8vIC8vICAgICBpZiAocmVxLnVzZXIucm9sZSAhPT0gXCJzdGFmZlwiKSB7XHJcbi8vIC8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIkFjY2VzcyBkZW5pZWQuIE9ubHkgc3RhZmYgY2FuIHByb2Nlc3MgdHJhbnNhY3Rpb25zXCIgfSk7XHJcbi8vIC8vICAgICB9XHJcblxyXG4vLyAvLyAgICAgLy8g4pyFIFZhbGlkYXRlIGFjY291bnQgZXhpc3RlbmNlXHJcbi8vIC8vICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgQWNjb3VudC5maW5kQnlJZChhY2NvdW50SWQpO1xyXG4vLyAvLyAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJBY2NvdW50IG5vdCBmb3VuZFwiIH0pO1xyXG5cclxuLy8gLy8gICAgIC8vIOKchSBVcGRhdGUgYmFsYW5jZVxyXG4vLyAvLyAgICAgYWNjb3VudC5iYWxhbmNlICs9IGFtb3VudDtcclxuLy8gLy8gICAgIGF3YWl0IGFjY291bnQuc2F2ZSgpO1xyXG5cclxuLy8gLy8gICAgIC8vIOKchSBDcmVhdGUgdHJhbnNhY3Rpb24gcmVjb3JkXHJcbi8vIC8vICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbi8vIC8vICAgICAgIGFjY291bnRJZCxcclxuLy8gLy8gICAgICAgY2FzaGllcklkOiByZXEudXNlci5pZCxcclxuLy8gLy8gICAgICAgdHlwZTogXCJjcmVkaXRcIixcclxuLy8gLy8gICAgICAgYW1vdW50LFxyXG4vLyAvLyAgICAgICBuZXdCYWxhbmNlOiBhY2NvdW50LmJhbGFuY2UsXHJcbi8vIC8vICAgICB9KTtcclxuXHJcbi8vIC8vICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XHJcbi8vIC8vICAgICAgIG1lc3NhZ2U6IFwiQWNjb3VudCBjcmVkaXRlZCBzdWNjZXNzZnVsbHlcIixcclxuLy8gLy8gICAgICAgZGF0YTogdHJhbnNhY3Rpb24sXHJcbi8vIC8vICAgICB9KTtcclxuLy8gLy8gICB9IGNhdGNoIChlcnJvcikge1xyXG4vLyAvLyAgICAgY29uc29sZS5lcnJvcihcIuKdjCBDcmVkaXQgVHJhbnNhY3Rpb24gRXJyb3I6XCIsIGVycm9yKTtcclxuLy8gLy8gICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbi8vIC8vICAgfVxyXG4vLyAvLyB9O1xyXG5cclxuLy8gLy8gLy8g4pyFIFdpdGhkcmF3IE1vbmV5IChEZWJpdCkgLSBTdGFmZiBPbmx5XHJcbi8vIC8vIGV4cG9ydCBjb25zdCBkZWJpdEFjY291bnQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuLy8gLy8gICB0cnkge1xyXG4vLyAvLyAgICAgY29uc3QgeyBhY2NvdW50SWQgfSA9IHJlcS5wYXJhbXM7XHJcbi8vIC8vICAgICBjb25zdCB7IGFtb3VudCB9ID0gcmVxLmJvZHk7XHJcblxyXG4vLyAvLyAgICAgLy8g4pyFIEVuc3VyZSBvbmx5IHN0YWZmIGNhbiBkZWJpdCBhY2NvdW50c1xyXG4vLyAvLyAgICAgaWYgKHJlcS51c2VyLnJvbGUgIT09IFwic3RhZmZcIikge1xyXG4vLyAvLyAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJBY2Nlc3MgZGVuaWVkLiBPbmx5IHN0YWZmIGNhbiBwcm9jZXNzIHRyYW5zYWN0aW9uc1wiIH0pO1xyXG4vLyAvLyAgICAgfVxyXG5cclxuLy8gLy8gICAgIC8vIOKchSBWYWxpZGF0ZSBhY2NvdW50IGV4aXN0ZW5jZVxyXG4vLyAvLyAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IEFjY291bnQuZmluZEJ5SWQoYWNjb3VudElkKTtcclxuLy8gLy8gICAgIGlmICghYWNjb3VudCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiQWNjb3VudCBub3QgZm91bmRcIiB9KTtcclxuXHJcbi8vIC8vICAgICAvLyDinIUgQ2hlY2sgc3VmZmljaWVudCBmdW5kc1xyXG4vLyAvLyAgICAgaWYgKGFjY291bnQuYmFsYW5jZSA8IGFtb3VudCkge1xyXG4vLyAvLyAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJJbnN1ZmZpY2llbnQgZnVuZHNcIiB9KTtcclxuLy8gLy8gICAgIH1cclxuXHJcbi8vIC8vICAgICAvLyDinIUgVXBkYXRlIGJhbGFuY2VcclxuLy8gLy8gICAgIGFjY291bnQuYmFsYW5jZSAtPSBhbW91bnQ7XHJcbi8vIC8vICAgICBhd2FpdCBhY2NvdW50LnNhdmUoKTtcclxuXHJcbi8vIC8vICAgICAvLyDinIUgQ3JlYXRlIHRyYW5zYWN0aW9uIHJlY29yZFxyXG4vLyAvLyAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4vLyAvLyAgICAgICBhY2NvdW50SWQsXHJcbi8vIC8vICAgICAgIGNhc2hpZXJJZDogcmVxLnVzZXIuaWQsXHJcbi8vIC8vICAgICAgIHR5cGU6IFwiZGViaXRcIixcclxuLy8gLy8gICAgICAgYW1vdW50LFxyXG4vLyAvLyAgICAgICBuZXdCYWxhbmNlOiBhY2NvdW50LmJhbGFuY2UsXHJcbi8vIC8vICAgICB9KTtcclxuXHJcbi8vIC8vICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XHJcbi8vIC8vICAgICAgIG1lc3NhZ2U6IFwiQWNjb3VudCBkZWJpdGVkIHN1Y2Nlc3NmdWxseVwiLFxyXG4vLyAvLyAgICAgICBkYXRhOiB0cmFuc2FjdGlvbixcclxuLy8gLy8gICAgIH0pO1xyXG4vLyAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vIC8vICAgICBjb25zb2xlLmVycm9yKFwi4p2MIERlYml0IFRyYW5zYWN0aW9uIEVycm9yOlwiLCBlcnJvcik7XHJcbi8vIC8vICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0pO1xyXG4vLyAvLyAgIH1cclxuLy8gLy8gfTtcclxuXHJcbi8vIC8vIC8vIOKchSBHZXQgVHJhbnNhY3Rpb24gSGlzdG9yeSAoVXNlciBvbmx5KVxyXG4vLyAvLyBleHBvcnQgY29uc3QgZ2V0VHJhbnNhY3Rpb25zID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbi8vIC8vICAgdHJ5IHtcclxuLy8gLy8gICAgIGNvbnN0IHsgYWNjb3VudElkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuLy8gLy8gICAgIC8vIOKchSBFbnN1cmUgdGhlIHVzZXIgb3ducyB0aGUgYWNjb3VudFxyXG4vLyAvLyAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IEFjY291bnQuZmluZE9uZSh7IF9pZDogYWNjb3VudElkLCBvd25lcjogcmVxLnVzZXIuaWQgfSk7XHJcbi8vIC8vICAgICBpZiAoIWFjY291bnQpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIkFjY291bnQgbm90IGZvdW5kIG9yIHVuYXV0aG9yaXplZFwiIH0pO1xyXG5cclxuLy8gLy8gICAgIC8vIOKchSBGZXRjaCB0cmFuc2FjdGlvbnNcclxuLy8gLy8gICAgIGNvbnN0IHRyYW5zYWN0aW9ucyA9IGF3YWl0IFRyYW5zYWN0aW9uLmZpbmQoeyBhY2NvdW50SWQgfSkuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSk7XHJcblxyXG4vLyAvLyAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBkYXRhOiB0cmFuc2FjdGlvbnMgfSk7XHJcbi8vIC8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gLy8gICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgR2V0IFRyYW5zYWN0aW9ucyBFcnJvcjpcIiwgZXJyb3IpO1xyXG4vLyAvLyAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9KTtcclxuLy8gLy8gICB9XHJcbi8vIC8vIH07XHJcblxyXG4vLyAvLyAvLyDinIUgR2V0IGEgU3BlY2lmaWMgVHJhbnNhY3Rpb24gKFVzZXIgb25seSlcclxuLy8gLy8gZXhwb3J0IGNvbnN0IGdldFRyYW5zYWN0aW9uQnlJZCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4vLyAvLyAgIHRyeSB7XHJcbi8vIC8vICAgICBjb25zdCB7IHRyYW5zYWN0aW9uSWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4vLyAvLyAgICAgLy8g4pyFIFZhbGlkYXRlIHRyYW5zYWN0aW9uIGV4aXN0ZW5jZVxyXG4vLyAvLyAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBUcmFuc2FjdGlvbi5maW5kQnlJZCh0cmFuc2FjdGlvbklkKTtcclxuLy8gLy8gICAgIGlmICghdHJhbnNhY3Rpb24pIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIlRyYW5zYWN0aW9uIG5vdCBmb3VuZFwiIH0pO1xyXG5cclxuLy8gLy8gICAgIC8vIOKchSBFbnN1cmUgdGhlIHVzZXIgb3ducyB0aGUgYWNjb3VudCByZWxhdGVkIHRvIHRoaXMgdHJhbnNhY3Rpb25cclxuLy8gLy8gICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBBY2NvdW50LmZpbmRPbmUoeyBfaWQ6IHRyYW5zYWN0aW9uLmFjY291bnRJZCwgb3duZXI6IHJlcS51c2VyLmlkIH0pO1xyXG4vLyAvLyAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWQgYWNjZXNzIHRvIHRyYW5zYWN0aW9uXCIgfSk7XHJcblxyXG4vLyAvLyAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBkYXRhOiB0cmFuc2FjdGlvbiB9KTtcclxuLy8gLy8gICB9IGNhdGNoIChlcnJvcikge1xyXG4vLyAvLyAgICAgY29uc29sZS5lcnJvcihcIuKdjCBHZXQgVHJhbnNhY3Rpb24gRXJyb3I6XCIsIGVycm9yKTtcclxuLy8gLy8gICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbi8vIC8vICAgfVxyXG4vLyAvLyB9O1xyXG4vLyAvLyAvLyBpbXBvcnQgVHJhbnNhY3Rpb24gZnJvbSBcIi4uL21vZGVscy9UcmFuc2FjdGlvbi5qc1wiO1xyXG4vLyAvLyAvLyBpbXBvcnQgQWNjb3VudCBmcm9tIFwiLi4vbW9kZWxzL2FjY291bnQuanNcIjtcclxuLy8gLy8gLy8gaW1wb3J0IFVzZXIgZnJvbSBcIi4uL21vZGVscy91c2VyLmpzXCI7XHJcbi8vIC8vIC8vIGltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcclxuXHJcbi8vIC8vIC8vIC8vIOKchSBEZXBvc2l0IE1vbmV5IChDcmVkaXQpIC0gU3RhZmYgT25seVxyXG4vLyAvLyAvLyBleHBvcnQgY29uc3QgY3JlZGl0QWNjb3VudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4vLyAvLyAvLyAgIHRyeSB7XHJcbi8vIC8vIC8vICAgICBjb25zdCB7IGFjY291bnRJZCB9ID0gcmVxLnBhcmFtcztcclxuLy8gLy8gLy8gICAgIGNvbnN0IHsgYW1vdW50IH0gPSByZXEuYm9keTtcclxuXHJcbi8vIC8vIC8vICAgICAvLyDinIUgRW5zdXJlIG9ubHkgc3RhZmYgY2FuIGNyZWRpdCBhY2NvdW50c1xyXG4vLyAvLyAvLyAgICAgaWYgKCFyZXEudXNlciB8fCByZXEudXNlci5yb2xlICE9PSBcInN0YWZmXCIpIHtcclxuLy8gLy8gLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6IFwiQWNjZXNzIGRlbmllZC4gT25seSBzdGFmZiBjYW4gcHJvY2VzcyB0cmFuc2FjdGlvbnNcIiB9KTtcclxuLy8gLy8gLy8gICAgIH1cclxuXHJcbi8vIC8vIC8vICAgICAvLyDinIUgVmFsaWRhdGUgYW1vdW50XHJcbi8vIC8vIC8vICAgICBpZiAoIWFtb3VudCB8fCBhbW91bnQgPD0gMCkge1xyXG4vLyAvLyAvLyAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIGFtb3VudC4gTXVzdCBiZSBncmVhdGVyIHRoYW4gMFwiIH0pO1xyXG4vLyAvLyAvLyAgICAgfVxyXG5cclxuLy8gLy8gLy8gICAgIC8vIOKchSBWYWxpZGF0ZSBhY2NvdW50IGV4aXN0ZW5jZVxyXG4vLyAvLyAvLyAgICAgaWYgKCFtb25nb29zZS5UeXBlcy5PYmplY3RJZC5pc1ZhbGlkKGFjY291bnRJZCkpIHtcclxuLy8gLy8gLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCBhY2NvdW50IElEIGZvcm1hdFwiIH0pO1xyXG4vLyAvLyAvLyAgICAgfVxyXG5cclxuLy8gLy8gLy8gICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBBY2NvdW50LmZpbmRCeUlkKGFjY291bnRJZCk7XHJcbi8vIC8vIC8vICAgICBpZiAoIWFjY291bnQpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIkFjY291bnQgbm90IGZvdW5kXCIgfSk7XHJcblxyXG4vLyAvLyAvLyAgICAgLy8g4pyFIFVwZGF0ZSBiYWxhbmNlXHJcbi8vIC8vIC8vICAgICBhY2NvdW50LmJhbGFuY2UgKz0gYW1vdW50O1xyXG4vLyAvLyAvLyAgICAgYXdhaXQgYWNjb3VudC5zYXZlKCk7XHJcblxyXG4vLyAvLyAvLyAgICAgLy8g4pyFIENyZWF0ZSB0cmFuc2FjdGlvbiByZWNvcmRcclxuLy8gLy8gLy8gICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuLy8gLy8gLy8gICAgICAgYWNjb3VudElkLFxyXG4vLyAvLyAvLyAgICAgICBjYXNoaWVySWQ6IHJlcS51c2VyLmlkLFxyXG4vLyAvLyAvLyAgICAgICB0eXBlOiBcImNyZWRpdFwiLFxyXG4vLyAvLyAvLyAgICAgICBhbW91bnQsXHJcbi8vIC8vIC8vICAgICAgIG5ld0JhbGFuY2U6IGFjY291bnQuYmFsYW5jZSxcclxuLy8gLy8gLy8gICAgIH0pO1xyXG5cclxuLy8gLy8gLy8gICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuLy8gLy8gLy8gICAgICAgbWVzc2FnZTogXCJBY2NvdW50IGNyZWRpdGVkIHN1Y2Nlc3NmdWxseVwiLFxyXG4vLyAvLyAvLyAgICAgICBkYXRhOiB0cmFuc2FjdGlvbixcclxuLy8gLy8gLy8gICAgIH0pO1xyXG4vLyAvLyAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vIC8vIC8vICAgICBjb25zb2xlLmVycm9yKFwi4p2MIENyZWRpdCBUcmFuc2FjdGlvbiBFcnJvcjpcIiwgZXJyb3IpO1xyXG4vLyAvLyAvLyAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9KTtcclxuLy8gLy8gLy8gICB9XHJcbi8vIC8vIC8vIH07XHJcblxyXG4vLyAvLyAvLyAvLyDinIUgV2l0aGRyYXcgTW9uZXkgKERlYml0KSAtIFN0YWZmIE9ubHlcclxuLy8gLy8gLy8gZXhwb3J0IGNvbnN0IGRlYml0QWNjb3VudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4vLyAvLyAvLyAgIHRyeSB7XHJcbi8vIC8vIC8vICAgICBjb25zdCB7IGFjY291bnRJZCB9ID0gcmVxLnBhcmFtcztcclxuLy8gLy8gLy8gICAgIGNvbnN0IHsgYW1vdW50IH0gPSByZXEuYm9keTtcclxuXHJcbi8vIC8vIC8vICAgICAvLyDinIUgRW5zdXJlIG9ubHkgc3RhZmYgY2FuIGRlYml0IGFjY291bnRzXHJcbi8vIC8vIC8vICAgICBpZiAoIXJlcS51c2VyIHx8IHJlcS51c2VyLnJvbGUgIT09IFwic3RhZmZcIikge1xyXG4vLyAvLyAvLyAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJBY2Nlc3MgZGVuaWVkLiBPbmx5IHN0YWZmIGNhbiBwcm9jZXNzIHRyYW5zYWN0aW9uc1wiIH0pO1xyXG4vLyAvLyAvLyAgICAgfVxyXG5cclxuLy8gLy8gLy8gICAgIC8vIOKchSBWYWxpZGF0ZSBhbW91bnRcclxuLy8gLy8gLy8gICAgIGlmICghYW1vdW50IHx8IGFtb3VudCA8PSAwKSB7XHJcbi8vIC8vIC8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkludmFsaWQgYW1vdW50LiBNdXN0IGJlIGdyZWF0ZXIgdGhhbiAwXCIgfSk7XHJcbi8vIC8vIC8vICAgICB9XHJcblxyXG4vLyAvLyAvLyAgICAgLy8g4pyFIFZhbGlkYXRlIGFjY291bnQgZXhpc3RlbmNlXHJcbi8vIC8vIC8vICAgICBpZiAoIW1vbmdvb3NlLlR5cGVzLk9iamVjdElkLmlzVmFsaWQoYWNjb3VudElkKSkge1xyXG4vLyAvLyAvLyAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIGFjY291bnQgSUQgZm9ybWF0XCIgfSk7XHJcbi8vIC8vIC8vICAgICB9XHJcblxyXG4vLyAvLyAvLyAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IEFjY291bnQuZmluZEJ5SWQoYWNjb3VudElkKTtcclxuLy8gLy8gLy8gICAgIGlmICghYWNjb3VudCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiQWNjb3VudCBub3QgZm91bmRcIiB9KTtcclxuXHJcbi8vIC8vIC8vICAgICAvLyDinIUgQ2hlY2sgc3VmZmljaWVudCBmdW5kc1xyXG4vLyAvLyAvLyAgICAgaWYgKGFjY291bnQuYmFsYW5jZSA8IGFtb3VudCkge1xyXG4vLyAvLyAvLyAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJJbnN1ZmZpY2llbnQgZnVuZHNcIiB9KTtcclxuLy8gLy8gLy8gICAgIH1cclxuXHJcbi8vIC8vIC8vICAgICAvLyDinIUgVXBkYXRlIGJhbGFuY2VcclxuLy8gLy8gLy8gICAgIGFjY291bnQuYmFsYW5jZSAtPSBhbW91bnQ7XHJcbi8vIC8vIC8vICAgICBhd2FpdCBhY2NvdW50LnNhdmUoKTtcclxuXHJcbi8vIC8vIC8vICAgICAvLyDinIUgQ3JlYXRlIHRyYW5zYWN0aW9uIHJlY29yZFxyXG4vLyAvLyAvLyAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4vLyAvLyAvLyAgICAgICBhY2NvdW50SWQsXHJcbi8vIC8vIC8vICAgICAgIGNhc2hpZXJJZDogcmVxLnVzZXIuaWQsXHJcbi8vIC8vIC8vICAgICAgIHR5cGU6IFwiZGViaXRcIixcclxuLy8gLy8gLy8gICAgICAgYW1vdW50LFxyXG4vLyAvLyAvLyAgICAgICBuZXdCYWxhbmNlOiBhY2NvdW50LmJhbGFuY2UsXHJcbi8vIC8vIC8vICAgICB9KTtcclxuXHJcbi8vIC8vIC8vICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XHJcbi8vIC8vIC8vICAgICAgIG1lc3NhZ2U6IFwiQWNjb3VudCBkZWJpdGVkIHN1Y2Nlc3NmdWxseVwiLFxyXG4vLyAvLyAvLyAgICAgICBkYXRhOiB0cmFuc2FjdGlvbixcclxuLy8gLy8gLy8gICAgIH0pO1xyXG4vLyAvLyAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vIC8vIC8vICAgICBjb25zb2xlLmVycm9yKFwi4p2MIERlYml0IFRyYW5zYWN0aW9uIEVycm9yOlwiLCBlcnJvcik7XHJcbi8vIC8vIC8vICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0pO1xyXG4vLyAvLyAvLyAgIH1cclxuLy8gLy8gLy8gfTtcclxuXHJcbi8vIC8vIC8vIC8vIOKchSBHZXQgVHJhbnNhY3Rpb24gSGlzdG9yeSAoVXNlciBPbmx5KVxyXG4vLyAvLyAvLyBleHBvcnQgY29uc3QgZ2V0VHJhbnNhY3Rpb25zID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbi8vIC8vIC8vICAgdHJ5IHtcclxuLy8gLy8gLy8gICAgIGNvbnN0IHsgYWNjb3VudElkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuLy8gLy8gLy8gICAgIC8vIOKchSBWYWxpZGF0ZSBhY2NvdW50IElEIGZvcm1hdFxyXG4vLyAvLyAvLyAgICAgaWYgKCFtb25nb29zZS5UeXBlcy5PYmplY3RJZC5pc1ZhbGlkKGFjY291bnRJZCkpIHtcclxuLy8gLy8gLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCBhY2NvdW50IElEIGZvcm1hdFwiIH0pO1xyXG4vLyAvLyAvLyAgICAgfVxyXG5cclxuLy8gLy8gLy8gICAgIC8vIOKchSBFbnN1cmUgdGhlIHVzZXIgb3ducyB0aGUgYWNjb3VudFxyXG4vLyAvLyAvLyAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IEFjY291bnQuZmluZE9uZSh7IF9pZDogYWNjb3VudElkLCBvd25lcjogcmVxLnVzZXIuaWQgfSk7XHJcbi8vIC8vIC8vICAgICBpZiAoIWFjY291bnQpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIkFjY291bnQgbm90IGZvdW5kIG9yIHVuYXV0aG9yaXplZFwiIH0pO1xyXG5cclxuLy8gLy8gLy8gICAgIC8vIOKchSBGZXRjaCB0cmFuc2FjdGlvbnNcclxuLy8gLy8gLy8gICAgIGNvbnN0IHRyYW5zYWN0aW9ucyA9IGF3YWl0IFRyYW5zYWN0aW9uLmZpbmQoeyBhY2NvdW50SWQgfSkuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSk7XHJcblxyXG4vLyAvLyAvLyAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBkYXRhOiB0cmFuc2FjdGlvbnMgfSk7XHJcbi8vIC8vIC8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gLy8gLy8gICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgR2V0IFRyYW5zYWN0aW9ucyBFcnJvcjpcIiwgZXJyb3IpO1xyXG4vLyAvLyAvLyAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9KTtcclxuLy8gLy8gLy8gICB9XHJcbi8vIC8vIC8vIH07XHJcblxyXG4vLyAvLyAvLyAvLyDinIUgR2V0IGEgU3BlY2lmaWMgVHJhbnNhY3Rpb24gKFVzZXIgT25seSlcclxuLy8gLy8gLy8gZXhwb3J0IGNvbnN0IGdldFRyYW5zYWN0aW9uQnlJZCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4vLyAvLyAvLyAgIHRyeSB7XHJcbi8vIC8vIC8vICAgICBjb25zdCB7IHRyYW5zYWN0aW9uSWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4vLyAvLyAvLyAgICAgLy8g4pyFIFZhbGlkYXRlIHRyYW5zYWN0aW9uIElEIGZvcm1hdFxyXG4vLyAvLyAvLyAgICAgaWYgKCFtb25nb29zZS5UeXBlcy5PYmplY3RJZC5pc1ZhbGlkKHRyYW5zYWN0aW9uSWQpKSB7XHJcbi8vIC8vIC8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkludmFsaWQgdHJhbnNhY3Rpb24gSUQgZm9ybWF0XCIgfSk7XHJcbi8vIC8vIC8vICAgICB9XHJcblxyXG4vLyAvLyAvLyAgICAgLy8g4pyFIFZhbGlkYXRlIHRyYW5zYWN0aW9uIGV4aXN0ZW5jZVxyXG4vLyAvLyAvLyAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBUcmFuc2FjdGlvbi5maW5kQnlJZCh0cmFuc2FjdGlvbklkKTtcclxuLy8gLy8gLy8gICAgIGlmICghdHJhbnNhY3Rpb24pIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIlRyYW5zYWN0aW9uIG5vdCBmb3VuZFwiIH0pO1xyXG5cclxuLy8gLy8gLy8gICAgIC8vIOKchSBFbnN1cmUgdGhlIHVzZXIgb3ducyB0aGUgYWNjb3VudCByZWxhdGVkIHRvIHRoaXMgdHJhbnNhY3Rpb25cclxuLy8gLy8gLy8gICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBBY2NvdW50LmZpbmRPbmUoeyBfaWQ6IHRyYW5zYWN0aW9uLmFjY291bnRJZCwgb3duZXI6IHJlcS51c2VyLmlkIH0pO1xyXG4vLyAvLyAvLyAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWQgYWNjZXNzIHRvIHRyYW5zYWN0aW9uXCIgfSk7XHJcblxyXG4vLyAvLyAvLyAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBkYXRhOiB0cmFuc2FjdGlvbiB9KTtcclxuLy8gLy8gLy8gICB9IGNhdGNoIChlcnJvcikge1xyXG4vLyAvLyAvLyAgICAgY29uc29sZS5lcnJvcihcIuKdjCBHZXQgVHJhbnNhY3Rpb24gRXJyb3I6XCIsIGVycm9yKTtcclxuLy8gLy8gLy8gICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbi8vIC8vIC8vICAgfVxyXG4vLyAvLyAvLyB9O1xyXG4vLyBpbXBvcnQgVHJhbnNhY3Rpb24gZnJvbSBcIi4uL21vZGVscy9UcmFuc2FjdGlvbi5qc1wiO1xyXG4vLyBpbXBvcnQgQWNjb3VudCBmcm9tIFwiLi4vbW9kZWxzL2FjY291bnQuanNcIjtcclxuXHJcbi8vIC8vIOKchSBEZXBvc2l0IE1vbmV5IChDcmVkaXQpIC0gU3RhZmYgT25seVxyXG4vLyBleHBvcnQgY29uc3QgY3JlZGl0QWNjb3VudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCB7IGFjY291bnRJZCB9ID0gcmVxLnBhcmFtcztcclxuLy8gICAgIGNvbnN0IHsgYW1vdW50IH0gPSByZXEuYm9keTtcclxuXHJcbi8vICAgICBpZiAocmVxLnVzZXIucm9sZSAhPT0gXCJzdGFmZlwiKSB7XHJcbi8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIkFjY2VzcyBkZW5pZWQuIE9ubHkgc3RhZmYgY2FuIHByb2Nlc3MgdHJhbnNhY3Rpb25zXCIgfSk7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgaWYgKCFhbW91bnQgfHwgYW1vdW50IDw9IDApIHtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCBhbW91bnQuIE11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8uXCIgfSk7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IEFjY291bnQuZmluZEJ5SWQoYWNjb3VudElkKTtcclxuLy8gICAgIGlmICghYWNjb3VudCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiQWNjb3VudCBub3QgZm91bmRcIiB9KTtcclxuXHJcbi8vICAgICBhY2NvdW50LmJhbGFuY2UgKz0gYW1vdW50O1xyXG4vLyAgICAgYXdhaXQgYWNjb3VudC5zYXZlKCk7XHJcblxyXG4vLyAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4vLyAgICAgICBhY2NvdW50SWQsXHJcbi8vICAgICAgIGNhc2hpZXJJZDogcmVxLnVzZXIuaWQsXHJcbi8vICAgICAgIHR5cGU6IFwiY3JlZGl0XCIsXHJcbi8vICAgICAgIGFtb3VudCxcclxuLy8gICAgICAgbmV3QmFsYW5jZTogYWNjb3VudC5iYWxhbmNlLFxyXG4vLyAgICAgfSk7XHJcblxyXG4vLyAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xyXG4vLyAgICAgICBtZXNzYWdlOiBcIkFjY291bnQgY3JlZGl0ZWQgc3VjY2Vzc2Z1bGx5XCIsXHJcbi8vICAgICAgIGRhdGE6IHRyYW5zYWN0aW9uLFxyXG4vLyAgICAgfSk7XHJcbi8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgQ3JlZGl0IFRyYW5zYWN0aW9uIEVycm9yOlwiLCBlcnJvcik7XHJcbi8vICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0pO1xyXG4vLyAgIH1cclxuLy8gfTtcclxuXHJcbi8vIC8vIOKchSBXaXRoZHJhdyBNb25leSAoRGViaXQpIC0gU3RhZmYgT25seVxyXG4vLyBleHBvcnQgY29uc3QgZGViaXRBY2NvdW50ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbi8vICAgdHJ5IHtcclxuLy8gICAgIGNvbnN0IHsgYWNjb3VudElkIH0gPSByZXEucGFyYW1zO1xyXG4vLyAgICAgY29uc3QgeyBhbW91bnQgfSA9IHJlcS5ib2R5O1xyXG5cclxuLy8gICAgIGlmIChyZXEudXNlci5yb2xlICE9PSBcInN0YWZmXCIpIHtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6IFwiQWNjZXNzIGRlbmllZC4gT25seSBzdGFmZiBjYW4gcHJvY2VzcyB0cmFuc2FjdGlvbnNcIiB9KTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBpZiAoIWFtb3VudCB8fCBhbW91bnQgPD0gMCkge1xyXG4vLyAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIGFtb3VudC4gTXVzdCBiZSBncmVhdGVyIHRoYW4gemVyby5cIiB9KTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgQWNjb3VudC5maW5kQnlJZChhY2NvdW50SWQpO1xyXG4vLyAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJBY2NvdW50IG5vdCBmb3VuZFwiIH0pO1xyXG5cclxuLy8gICAgIGlmIChhY2NvdW50LmJhbGFuY2UgPCBhbW91bnQpIHtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiSW5zdWZmaWNpZW50IGZ1bmRzXCIgfSk7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgYWNjb3VudC5iYWxhbmNlIC09IGFtb3VudDtcclxuLy8gICAgIGF3YWl0IGFjY291bnQuc2F2ZSgpO1xyXG5cclxuLy8gICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgVHJhbnNhY3Rpb24uY3JlYXRlKHtcclxuLy8gICAgICAgYWNjb3VudElkLFxyXG4vLyAgICAgICBjYXNoaWVySWQ6IHJlcS51c2VyLmlkLFxyXG4vLyAgICAgICB0eXBlOiBcImRlYml0XCIsXHJcbi8vICAgICAgIGFtb3VudCxcclxuLy8gICAgICAgbmV3QmFsYW5jZTogYWNjb3VudC5iYWxhbmNlLFxyXG4vLyAgICAgfSk7XHJcblxyXG4vLyAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xyXG4vLyAgICAgICBtZXNzYWdlOiBcIkFjY291bnQgZGViaXRlZCBzdWNjZXNzZnVsbHlcIixcclxuLy8gICAgICAgZGF0YTogdHJhbnNhY3Rpb24sXHJcbi8vICAgICB9KTtcclxuLy8gICB9IGNhdGNoIChlcnJvcikge1xyXG4vLyAgICAgY29uc29sZS5lcnJvcihcIuKdjCBEZWJpdCBUcmFuc2FjdGlvbiBFcnJvcjpcIiwgZXJyb3IpO1xyXG4vLyAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9KTtcclxuLy8gICB9XHJcbi8vIH07XHJcblxyXG4vLyAvLyDinIUgR2V0IFRyYW5zYWN0aW9uIEhpc3RvcnkgKFVzZXIgb25seSlcclxuLy8gZXhwb3J0IGNvbnN0IGdldFRyYW5zYWN0aW9ucyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCB7IGFjY291bnRJZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbi8vICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgQWNjb3VudC5maW5kT25lKHsgX2lkOiBhY2NvdW50SWQsIG93bmVyOiByZXEudXNlci5pZCB9KTtcclxuLy8gICAgIGlmICghYWNjb3VudCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiQWNjb3VudCBub3QgZm91bmQgb3IgdW5hdXRob3JpemVkXCIgfSk7XHJcblxyXG4vLyAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgVHJhbnNhY3Rpb24uZmluZCh7IGFjY291bnRJZCB9KS5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KTtcclxuXHJcbi8vICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHRyYW5zYWN0aW9ucyB9KTtcclxuLy8gICB9IGNhdGNoIChlcnJvcikge1xyXG4vLyAgICAgY29uc29sZS5lcnJvcihcIuKdjCBHZXQgVHJhbnNhY3Rpb25zIEVycm9yOlwiLCBlcnJvcik7XHJcbi8vICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0pO1xyXG4vLyAgIH1cclxuLy8gfTtcclxuXHJcbi8vIC8vIOKchSBHZXQgYSBTcGVjaWZpYyBUcmFuc2FjdGlvbiAoVXNlciBvbmx5KVxyXG4vLyBleHBvcnQgY29uc3QgZ2V0VHJhbnNhY3Rpb25CeUlkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbi8vICAgdHJ5IHtcclxuLy8gICAgIGNvbnN0IHsgdHJhbnNhY3Rpb25JZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbi8vICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IFRyYW5zYWN0aW9uLmZpbmRCeUlkKHRyYW5zYWN0aW9uSWQpO1xyXG4vLyAgICAgaWYgKCF0cmFuc2FjdGlvbikgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiVHJhbnNhY3Rpb24gbm90IGZvdW5kXCIgfSk7XHJcblxyXG4vLyAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IEFjY291bnQuZmluZE9uZSh7IF9pZDogdHJhbnNhY3Rpb24uYWNjb3VudElkLCBvd25lcjogcmVxLnVzZXIuaWQgfSk7XHJcbi8vICAgICBpZiAoIWFjY291bnQpIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIlVuYXV0aG9yaXplZCBhY2Nlc3MgdG8gdHJhbnNhY3Rpb25cIiB9KTtcclxuXHJcbi8vICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHRyYW5zYWN0aW9uIH0pO1xyXG4vLyAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vICAgICBjb25zb2xlLmVycm9yKFwi4p2MIEdldCBUcmFuc2FjdGlvbiBFcnJvcjpcIiwgZXJyb3IpO1xyXG4vLyAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9KTtcclxuLy8gICB9XHJcbi8vIH07XHJcbmltcG9ydCBUcmFuc2FjdGlvbiBmcm9tIFwiLi4vbW9kZWxzL1RyYW5zYWN0aW9uLmpzXCI7XHJcbmltcG9ydCBBY2NvdW50IGZyb20gXCIuLi9tb2RlbHMvYWNjb3VudC5qc1wiO1xyXG5cclxuLy8g4pyFIERlcG9zaXQgTW9uZXkgKENyZWRpdCkgLSBTdGFmZiBPbmx5XHJcbmV4cG9ydCBjb25zdCBjcmVkaXRBY2NvdW50ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGlmICghcmVxLnVzZXI/LmlkKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgTWlzc2luZyBVc2VyIElEIGluIFRva2VuOlwiLCByZXEudXNlcik7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIkludmFsaWQgdG9rZW46IFVzZXIgSUQgbWlzc2luZ1wiIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coXCLwn5SNIFRva2VuIERlY29kZWQ6XCIsIHJlcS51c2VyKTtcclxuXHJcbiAgICBjb25zdCB7IGFjY291bnRJZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHsgYW1vdW50IH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiAocmVxLnVzZXIucm9sZSAhPT0gXCJzdGFmZlwiKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIkFjY2VzcyBkZW5pZWQuIE9ubHkgc3RhZmYgY2FuIHByb2Nlc3MgdHJhbnNhY3Rpb25zXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFhbW91bnQgfHwgYW1vdW50IDw9IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCBhbW91bnQuIE11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8uXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IEFjY291bnQuZmluZEJ5SWQoYWNjb3VudElkKTtcclxuICAgIGlmICghYWNjb3VudCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiQWNjb3VudCBub3QgZm91bmRcIiB9KTtcclxuXHJcbiAgICBhY2NvdW50LmJhbGFuY2UgKz0gYW1vdW50O1xyXG4gICAgYXdhaXQgYWNjb3VudC5zYXZlKCk7XHJcblxyXG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBUcmFuc2FjdGlvbi5jcmVhdGUoe1xyXG4gICAgICBhY2NvdW50SWQsXHJcbiAgICAgIGNhc2hpZXJJZDogcmVxLnVzZXIuaWQsXHJcbiAgICAgIHR5cGU6IFwiY3JlZGl0XCIsXHJcbiAgICAgIGFtb3VudCxcclxuICAgICAgbmV3QmFsYW5jZTogYWNjb3VudC5iYWxhbmNlLFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiBcIkFjY291bnQgY3JlZGl0ZWQgc3VjY2Vzc2Z1bGx5XCIsXHJcbiAgICAgIGRhdGE6IHRyYW5zYWN0aW9uLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgQ3JlZGl0IFRyYW5zYWN0aW9uIEVycm9yOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIOKchSBXaXRoZHJhdyBNb25leSAoRGViaXQpIC0gU3RhZmYgT25seVxyXG5leHBvcnQgY29uc3QgZGViaXRBY2NvdW50ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGlmICghcmVxLnVzZXI/LmlkKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgTWlzc2luZyBVc2VyIElEIGluIFRva2VuOlwiLCByZXEudXNlcik7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIkludmFsaWQgdG9rZW46IFVzZXIgSUQgbWlzc2luZ1wiIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coXCLwn5SNIFRva2VuIERlY29kZWQ6XCIsIHJlcS51c2VyKTtcclxuXHJcbiAgICBjb25zdCB7IGFjY291bnRJZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHsgYW1vdW50IH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiAocmVxLnVzZXIucm9sZSAhPT0gXCJzdGFmZlwiKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIkFjY2VzcyBkZW5pZWQuIE9ubHkgc3RhZmYgY2FuIHByb2Nlc3MgdHJhbnNhY3Rpb25zXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFhbW91bnQgfHwgYW1vdW50IDw9IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCBhbW91bnQuIE11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8uXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IEFjY291bnQuZmluZEJ5SWQoYWNjb3VudElkKTtcclxuICAgIGlmICghYWNjb3VudCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiQWNjb3VudCBub3QgZm91bmRcIiB9KTtcclxuXHJcbiAgICBpZiAoYWNjb3VudC5iYWxhbmNlIDwgYW1vdW50KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkluc3VmZmljaWVudCBmdW5kc1wiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFjY291bnQuYmFsYW5jZSAtPSBhbW91bnQ7XHJcbiAgICBhd2FpdCBhY2NvdW50LnNhdmUoKTtcclxuXHJcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgIGFjY291bnRJZCxcclxuICAgICAgY2FzaGllcklkOiByZXEudXNlci5pZCxcclxuICAgICAgdHlwZTogXCJkZWJpdFwiLFxyXG4gICAgICBhbW91bnQsXHJcbiAgICAgIG5ld0JhbGFuY2U6IGFjY291bnQuYmFsYW5jZSxcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuICAgICAgbWVzc2FnZTogXCJBY2NvdW50IGRlYml0ZWQgc3VjY2Vzc2Z1bGx5XCIsXHJcbiAgICAgIGRhdGE6IHRyYW5zYWN0aW9uLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRGViaXQgVHJhbnNhY3Rpb24gRXJyb3I6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8g4pyFIEdldCBUcmFuc2FjdGlvbiBIaXN0b3J5IChVc2VyIG9ubHkpXHJcbi8vIGV4cG9ydCBjb25zdCBnZXRUcmFuc2FjdGlvbnMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuLy8gICB0cnkge1xyXG4vLyAgICAgaWYgKCFyZXEudXNlcj8uaWQpIHtcclxuLy8gICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBNaXNzaW5nIFVzZXIgSUQgaW4gVG9rZW46XCIsIHJlcS51c2VyKTtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCB0b2tlbjogVXNlciBJRCBtaXNzaW5nXCIgfSk7XHJcbi8vICAgICB9XHJcbi8vICAgICBjb25zb2xlLmxvZyhcIvCflI0gVG9rZW4gRGVjb2RlZDpcIiwgcmVxLnVzZXIpO1xyXG5cclxuLy8gICAgIGNvbnN0IHsgYWNjb3VudElkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuLy8gICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBBY2NvdW50LmZpbmRPbmUoeyBfaWQ6IGFjY291bnRJZCwgb3duZXI6IHJlcS51c2VyLmlkIH0pO1xyXG4vLyAgICAgaWYgKCFhY2NvdW50KSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJBY2NvdW50IG5vdCBmb3VuZCBvciB1bmF1dGhvcml6ZWRcIiB9KTtcclxuXHJcbi8vICAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBhd2FpdCBUcmFuc2FjdGlvbi5maW5kKHsgYWNjb3VudElkIH0pLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pO1xyXG5cclxuLy8gICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgZGF0YTogdHJhbnNhY3Rpb25zIH0pO1xyXG4vLyAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vICAgICBjb25zb2xlLmVycm9yKFwi4p2MIEdldCBUcmFuc2FjdGlvbnMgRXJyb3I6XCIsIGVycm9yKTtcclxuLy8gICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbi8vICAgfVxyXG4vLyB9O1xyXG5leHBvcnQgY29uc3QgZ2V0VHJhbnNhY3Rpb25zID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGlmICghcmVxLnVzZXI/LmlkKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgTWlzc2luZyBVc2VyIElEIGluIFRva2VuOlwiLCByZXEudXNlcik7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIkludmFsaWQgdG9rZW46IFVzZXIgSUQgbWlzc2luZ1wiIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coXCLwn5SNIFRva2VuIERlY29kZWQ6XCIsIHJlcS51c2VyKTtcclxuXHJcbiAgICBjb25zdCB7IGFjY291bnRJZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgQWNjb3VudC5maW5kT25lKHsgX2lkOiBhY2NvdW50SWQsIG93bmVyOiByZXEudXNlci5pZCB9KTtcclxuICAgIGlmICghYWNjb3VudCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiQWNjb3VudCBub3QgZm91bmQgb3IgdW5hdXRob3JpemVkXCIgfSk7XHJcblxyXG4gICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgVHJhbnNhY3Rpb24uZmluZCh7IGFjY291bnRJZCB9KTtcclxuICAgIGNvbnNvbGUubG9nKFwi8J+agCBSZXRyaWV2ZWQgVHJhbnNhY3Rpb25zOlwiLCB0cmFuc2FjdGlvbnMpOyAvLyBEZWJ1ZyBsb2dcclxuXHJcbiAgICBpZiAoIXRyYW5zYWN0aW9ucyB8fCAhQXJyYXkuaXNBcnJheSh0cmFuc2FjdGlvbnMpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRyYW5zYWN0aW9ucyBub3QgZm91bmQgb3IgaW52YWxpZCBmb3JtYXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc29ydGVkVHJhbnNhY3Rpb25zID0gdHJhbnNhY3Rpb25zLnNvcnQoKGEsIGIpID0+IGIuY3JlYXRlZEF0IC0gYS5jcmVhdGVkQXQpOyAvLyBTb3J0aW5nIGxvY2FsbHlcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHNvcnRlZFRyYW5zYWN0aW9ucyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBHZXQgVHJhbnNhY3Rpb25zIEVycm9yOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8g4pyFIEdldCBhIFNwZWNpZmljIFRyYW5zYWN0aW9uIChVc2VyIG9ubHkpXHJcbmV4cG9ydCBjb25zdCBnZXRUcmFuc2FjdGlvbkJ5SWQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFyZXEudXNlcj8uaWQpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBNaXNzaW5nIFVzZXIgSUQgaW4gVG9rZW46XCIsIHJlcS51c2VyKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCB0b2tlbjogVXNlciBJRCBtaXNzaW5nXCIgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyhcIvCflI0gVG9rZW4gRGVjb2RlZDpcIiwgcmVxLnVzZXIpO1xyXG5cclxuICAgIGNvbnN0IHsgdHJhbnNhY3Rpb25JZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IFRyYW5zYWN0aW9uLmZpbmRCeUlkKHRyYW5zYWN0aW9uSWQpO1xyXG4gICAgaWYgKCF0cmFuc2FjdGlvbikgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiVHJhbnNhY3Rpb24gbm90IGZvdW5kXCIgfSk7XHJcblxyXG4gICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IEFjY291bnQuZmluZE9uZSh7IF9pZDogdHJhbnNhY3Rpb24uYWNjb3VudElkLCBvd25lcjogcmVxLnVzZXIuaWQgfSk7XHJcbiAgICBpZiAoIWFjY291bnQpIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIlVuYXV0aG9yaXplZCBhY2Nlc3MgdG8gdHJhbnNhY3Rpb25cIiB9KTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHRyYW5zYWN0aW9uIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEdldCBUcmFuc2FjdGlvbiBFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiB9KTtcclxuICB9XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBdWZBLElBQUFBLFlBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFFBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUEyQyxTQUFBRCx1QkFBQUcsQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQXhmM0M7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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","map":{"version":3,"names":["_Transaction","_interopRequireDefault","require","_account","e","__esModule","default","creditAccount","req","res","user","id","console","error","status","json","log","accountId","params","amount","body","role","account","Account","findById","balance","save","transaction","Transaction","create","cashierId","type","newBalance","message","data","exports","debitAccount","getTransactions","findOne","_id","owner","transactions","find","Array","isArray","Error","sortedTransactions","sort","a","b","createdAt","getTransactionById","transactionId"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\controllers\\","sources":["transactionController.js"],"sourcesContent":["// // // // import Transaction from \"../models/Transaction.js\";\r\n// // // // import Account from \"../models/account.js\";\r\n// // // // import User from \"../models/user.js\";\r\n\r\n// // // // // ✅ Deposit Money (Credit)\r\n// // // // export const creditAccount = async (req, res) => {\r\n// // // //   try {\r\n// // // //     const { accountId } = req.params;\r\n// // // //     const { amount } = req.body;\r\n// // // //     const cashierId = req.user.id; // Logged-in staff (cashier)\r\n\r\n// // // //     // ✅ Validate account existence\r\n// // // //     const account = await Account.findById(accountId);\r\n// // // //     if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n// // // //     // ✅ Update balance\r\n// // // //     account.balance += amount;\r\n// // // //     await account.save();\r\n\r\n// // // //     // ✅ Create transaction record\r\n// // // //     const transaction = await Transaction.create({\r\n// // // //       accountId,\r\n// // // //       cashierId,\r\n// // // //       type: \"credit\",\r\n// // // //       amount,\r\n// // // //       newBalance: account.balance,\r\n// // // //     });\r\n\r\n// // // //     res.status(201).json({\r\n// // // //       message: \"Account credited successfully\",\r\n// // // //       data: transaction,\r\n// // // //     });\r\n// // // //   } catch (error) {\r\n// // // //     console.error(\"❌ Credit Transaction Error:\", error);\r\n// // // //     res.status(500).json({ error: \"Internal server error\" });\r\n// // // //   }\r\n// // // // };\r\n\r\n// // // // // ✅ Withdraw Money (Debit)\r\n// // // // export const debitAccount = async (req, res) => {\r\n// // // //   try {\r\n// // // //     const { accountId } = req.params;\r\n// // // //     const { amount } = req.body;\r\n// // // //     const cashierId = req.user.id;\r\n\r\n// // // //     // ✅ Validate account existence\r\n// // // //     const account = await Account.findById(accountId);\r\n// // // //     if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n// // // //     // ✅ Check sufficient funds\r\n// // // //     if (account.balance < amount) {\r\n// // // //       return res.status(400).json({ error: \"Insufficient funds\" });\r\n// // // //     }\r\n\r\n// // // //     // ✅ Update balance\r\n// // // //     account.balance -= amount;\r\n// // // //     await account.save();\r\n\r\n// // // //     // ✅ Create transaction record\r\n// // // //     const transaction = await Transaction.create({\r\n// // // //       accountId,\r\n// // // //       cashierId,\r\n// // // //       type: \"debit\",\r\n// // // //       amount,\r\n// // // //       newBalance: account.balance,\r\n// // // //     });\r\n\r\n// // // //     res.status(201).json({\r\n// // // //       message: \"Account debited successfully\",\r\n// // // //       data: transaction,\r\n// // // //     });\r\n// // // //   } catch (error) {\r\n// // // //     console.error(\"❌ Debit Transaction Error:\", error);\r\n// // // //     res.status(500).json({ error: \"Internal server error\" });\r\n// // // //   }\r\n// // // // };\r\n\r\n// // // // // ✅ Get Transaction History\r\n// // // // export const getTransactions = async (req, res) => {\r\n// // // //   try {\r\n// // // //     const { accountId } = req.params;\r\n\r\n// // // //     // ✅ Validate account existence\r\n// // // //     const account = await Account.findById(accountId);\r\n// // // //     if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n// // // //     // ✅ Fetch transactions\r\n// // // //     const transactions = await Transaction.find({ accountId }).sort({ createdAt: -1 });\r\n\r\n// // // //     res.status(200).json({ data: transactions });\r\n// // // //   } catch (error) {\r\n// // // //     console.error(\"❌ Get Transactions Error:\", error);\r\n// // // //     res.status(500).json({ error: \"Internal server error\" });\r\n// // // //   }\r\n// // // // };\r\n\r\n// // // // // ✅ Get a Specific Transaction\r\n// // // // export const getTransactionById = async (req, res) => {\r\n// // // //   try {\r\n// // // //     const { transactionId } = req.params;\r\n\r\n// // // //     // ✅ Validate transaction existence\r\n// // // //     const transaction = await Transaction.findById(transactionId);\r\n// // // //     if (!transaction) return res.status(404).json({ error: \"Transaction not found\" });\r\n\r\n// // // //     res.status(200).json({ data: transaction });\r\n// // // //   } catch (error) {\r\n// // // //     console.error(\"❌ Get Transaction Error:\", error);\r\n// // // //     res.status(500).json({ error: \"Internal server error\" });\r\n// // // //   }\r\n// // // // };\r\n// // import Transaction from \"../models/Transaction.js\";\r\n// // import Account from \"../models/account.js\";\r\n// // import User from \"../models/user.js\";\r\n\r\n// // // ✅ Deposit Money (Credit) - Staff Only\r\n// // export const creditAccount = async (req, res) => {\r\n// //   try {\r\n// //     const { accountId } = req.params;\r\n// //     const { amount } = req.body;\r\n\r\n// //     // ✅ Ensure only staff can credit accounts\r\n// //     if (req.user.role !== \"staff\") {\r\n// //       return res.status(403).json({ error: \"Access denied. Only staff can process transactions\" });\r\n// //     }\r\n\r\n// //     // ✅ Validate account existence\r\n// //     const account = await Account.findById(accountId);\r\n// //     if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n// //     // ✅ Update balance\r\n// //     account.balance += amount;\r\n// //     await account.save();\r\n\r\n// //     // ✅ Create transaction record\r\n// //     const transaction = await Transaction.create({\r\n// //       accountId,\r\n// //       cashierId: req.user.id,\r\n// //       type: \"credit\",\r\n// //       amount,\r\n// //       newBalance: account.balance,\r\n// //     });\r\n\r\n// //     res.status(201).json({\r\n// //       message: \"Account credited successfully\",\r\n// //       data: transaction,\r\n// //     });\r\n// //   } catch (error) {\r\n// //     console.error(\"❌ Credit Transaction Error:\", error);\r\n// //     res.status(500).json({ error: \"Internal server error\" });\r\n// //   }\r\n// // };\r\n\r\n// // // ✅ Withdraw Money (Debit) - Staff Only\r\n// // export const debitAccount = async (req, res) => {\r\n// //   try {\r\n// //     const { accountId } = req.params;\r\n// //     const { amount } = req.body;\r\n\r\n// //     // ✅ Ensure only staff can debit accounts\r\n// //     if (req.user.role !== \"staff\") {\r\n// //       return res.status(403).json({ error: \"Access denied. Only staff can process transactions\" });\r\n// //     }\r\n\r\n// //     // ✅ Validate account existence\r\n// //     const account = await Account.findById(accountId);\r\n// //     if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n// //     // ✅ Check sufficient funds\r\n// //     if (account.balance < amount) {\r\n// //       return res.status(400).json({ error: \"Insufficient funds\" });\r\n// //     }\r\n\r\n// //     // ✅ Update balance\r\n// //     account.balance -= amount;\r\n// //     await account.save();\r\n\r\n// //     // ✅ Create transaction record\r\n// //     const transaction = await Transaction.create({\r\n// //       accountId,\r\n// //       cashierId: req.user.id,\r\n// //       type: \"debit\",\r\n// //       amount,\r\n// //       newBalance: account.balance,\r\n// //     });\r\n\r\n// //     res.status(201).json({\r\n// //       message: \"Account debited successfully\",\r\n// //       data: transaction,\r\n// //     });\r\n// //   } catch (error) {\r\n// //     console.error(\"❌ Debit Transaction Error:\", error);\r\n// //     res.status(500).json({ error: \"Internal server error\" });\r\n// //   }\r\n// // };\r\n\r\n// // // ✅ Get Transaction History (User only)\r\n// // export const getTransactions = async (req, res) => {\r\n// //   try {\r\n// //     const { accountId } = req.params;\r\n\r\n// //     // ✅ Ensure the user owns the account\r\n// //     const account = await Account.findOne({ _id: accountId, owner: req.user.id });\r\n// //     if (!account) return res.status(404).json({ error: \"Account not found or unauthorized\" });\r\n\r\n// //     // ✅ Fetch transactions\r\n// //     const transactions = await Transaction.find({ accountId }).sort({ createdAt: -1 });\r\n\r\n// //     res.status(200).json({ data: transactions });\r\n// //   } catch (error) {\r\n// //     console.error(\"❌ Get Transactions Error:\", error);\r\n// //     res.status(500).json({ error: \"Internal server error\" });\r\n// //   }\r\n// // };\r\n\r\n// // // ✅ Get a Specific Transaction (User only)\r\n// // export const getTransactionById = async (req, res) => {\r\n// //   try {\r\n// //     const { transactionId } = req.params;\r\n\r\n// //     // ✅ Validate transaction existence\r\n// //     const transaction = await Transaction.findById(transactionId);\r\n// //     if (!transaction) return res.status(404).json({ error: \"Transaction not found\" });\r\n\r\n// //     // ✅ Ensure the user owns the account related to this transaction\r\n// //     const account = await Account.findOne({ _id: transaction.accountId, owner: req.user.id });\r\n// //     if (!account) return res.status(403).json({ error: \"Unauthorized access to transaction\" });\r\n\r\n// //     res.status(200).json({ data: transaction });\r\n// //   } catch (error) {\r\n// //     console.error(\"❌ Get Transaction Error:\", error);\r\n// //     res.status(500).json({ error: \"Internal server error\" });\r\n// //   }\r\n// // };\r\n// // // import Transaction from \"../models/Transaction.js\";\r\n// // // import Account from \"../models/account.js\";\r\n// // // import User from \"../models/user.js\";\r\n// // // import mongoose from \"mongoose\";\r\n\r\n// // // // ✅ Deposit Money (Credit) - Staff Only\r\n// // // export const creditAccount = async (req, res) => {\r\n// // //   try {\r\n// // //     const { accountId } = req.params;\r\n// // //     const { amount } = req.body;\r\n\r\n// // //     // ✅ Ensure only staff can credit accounts\r\n// // //     if (!req.user || req.user.role !== \"staff\") {\r\n// // //       return res.status(403).json({ error: \"Access denied. Only staff can process transactions\" });\r\n// // //     }\r\n\r\n// // //     // ✅ Validate amount\r\n// // //     if (!amount || amount <= 0) {\r\n// // //       return res.status(400).json({ error: \"Invalid amount. Must be greater than 0\" });\r\n// // //     }\r\n\r\n// // //     // ✅ Validate account existence\r\n// // //     if (!mongoose.Types.ObjectId.isValid(accountId)) {\r\n// // //       return res.status(400).json({ error: \"Invalid account ID format\" });\r\n// // //     }\r\n\r\n// // //     const account = await Account.findById(accountId);\r\n// // //     if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n// // //     // ✅ Update balance\r\n// // //     account.balance += amount;\r\n// // //     await account.save();\r\n\r\n// // //     // ✅ Create transaction record\r\n// // //     const transaction = await Transaction.create({\r\n// // //       accountId,\r\n// // //       cashierId: req.user.id,\r\n// // //       type: \"credit\",\r\n// // //       amount,\r\n// // //       newBalance: account.balance,\r\n// // //     });\r\n\r\n// // //     res.status(201).json({\r\n// // //       message: \"Account credited successfully\",\r\n// // //       data: transaction,\r\n// // //     });\r\n// // //   } catch (error) {\r\n// // //     console.error(\"❌ Credit Transaction Error:\", error);\r\n// // //     res.status(500).json({ error: \"Internal server error\" });\r\n// // //   }\r\n// // // };\r\n\r\n// // // // ✅ Withdraw Money (Debit) - Staff Only\r\n// // // export const debitAccount = async (req, res) => {\r\n// // //   try {\r\n// // //     const { accountId } = req.params;\r\n// // //     const { amount } = req.body;\r\n\r\n// // //     // ✅ Ensure only staff can debit accounts\r\n// // //     if (!req.user || req.user.role !== \"staff\") {\r\n// // //       return res.status(403).json({ error: \"Access denied. Only staff can process transactions\" });\r\n// // //     }\r\n\r\n// // //     // ✅ Validate amount\r\n// // //     if (!amount || amount <= 0) {\r\n// // //       return res.status(400).json({ error: \"Invalid amount. Must be greater than 0\" });\r\n// // //     }\r\n\r\n// // //     // ✅ Validate account existence\r\n// // //     if (!mongoose.Types.ObjectId.isValid(accountId)) {\r\n// // //       return res.status(400).json({ error: \"Invalid account ID format\" });\r\n// // //     }\r\n\r\n// // //     const account = await Account.findById(accountId);\r\n// // //     if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n// // //     // ✅ Check sufficient funds\r\n// // //     if (account.balance < amount) {\r\n// // //       return res.status(400).json({ error: \"Insufficient funds\" });\r\n// // //     }\r\n\r\n// // //     // ✅ Update balance\r\n// // //     account.balance -= amount;\r\n// // //     await account.save();\r\n\r\n// // //     // ✅ Create transaction record\r\n// // //     const transaction = await Transaction.create({\r\n// // //       accountId,\r\n// // //       cashierId: req.user.id,\r\n// // //       type: \"debit\",\r\n// // //       amount,\r\n// // //       newBalance: account.balance,\r\n// // //     });\r\n\r\n// // //     res.status(201).json({\r\n// // //       message: \"Account debited successfully\",\r\n// // //       data: transaction,\r\n// // //     });\r\n// // //   } catch (error) {\r\n// // //     console.error(\"❌ Debit Transaction Error:\", error);\r\n// // //     res.status(500).json({ error: \"Internal server error\" });\r\n// // //   }\r\n// // // };\r\n\r\n// // // // ✅ Get Transaction History (User Only)\r\n// // // export const getTransactions = async (req, res) => {\r\n// // //   try {\r\n// // //     const { accountId } = req.params;\r\n\r\n// // //     // ✅ Validate account ID format\r\n// // //     if (!mongoose.Types.ObjectId.isValid(accountId)) {\r\n// // //       return res.status(400).json({ error: \"Invalid account ID format\" });\r\n// // //     }\r\n\r\n// // //     // ✅ Ensure the user owns the account\r\n// // //     const account = await Account.findOne({ _id: accountId, owner: req.user.id });\r\n// // //     if (!account) return res.status(404).json({ error: \"Account not found or unauthorized\" });\r\n\r\n// // //     // ✅ Fetch transactions\r\n// // //     const transactions = await Transaction.find({ accountId }).sort({ createdAt: -1 });\r\n\r\n// // //     res.status(200).json({ data: transactions });\r\n// // //   } catch (error) {\r\n// // //     console.error(\"❌ Get Transactions Error:\", error);\r\n// // //     res.status(500).json({ error: \"Internal server error\" });\r\n// // //   }\r\n// // // };\r\n\r\n// // // // ✅ Get a Specific Transaction (User Only)\r\n// // // export const getTransactionById = async (req, res) => {\r\n// // //   try {\r\n// // //     const { transactionId } = req.params;\r\n\r\n// // //     // ✅ Validate transaction ID format\r\n// // //     if (!mongoose.Types.ObjectId.isValid(transactionId)) {\r\n// // //       return res.status(400).json({ error: \"Invalid transaction ID format\" });\r\n// // //     }\r\n\r\n// // //     // ✅ Validate transaction existence\r\n// // //     const transaction = await Transaction.findById(transactionId);\r\n// // //     if (!transaction) return res.status(404).json({ error: \"Transaction not found\" });\r\n\r\n// // //     // ✅ Ensure the user owns the account related to this transaction\r\n// // //     const account = await Account.findOne({ _id: transaction.accountId, owner: req.user.id });\r\n// // //     if (!account) return res.status(403).json({ error: \"Unauthorized access to transaction\" });\r\n\r\n// // //     res.status(200).json({ data: transaction });\r\n// // //   } catch (error) {\r\n// // //     console.error(\"❌ Get Transaction Error:\", error);\r\n// // //     res.status(500).json({ error: \"Internal server error\" });\r\n// // //   }\r\n// // // };\r\n// import Transaction from \"../models/Transaction.js\";\r\n// import Account from \"../models/account.js\";\r\n\r\n// // ✅ Deposit Money (Credit) - Staff Only\r\n// export const creditAccount = async (req, res) => {\r\n//   try {\r\n//     const { accountId } = req.params;\r\n//     const { amount } = req.body;\r\n\r\n//     if (req.user.role !== \"staff\") {\r\n//       return res.status(403).json({ error: \"Access denied. Only staff can process transactions\" });\r\n//     }\r\n\r\n//     if (!amount || amount <= 0) {\r\n//       return res.status(400).json({ error: \"Invalid amount. Must be greater than zero.\" });\r\n//     }\r\n\r\n//     const account = await Account.findById(accountId);\r\n//     if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n//     account.balance += amount;\r\n//     await account.save();\r\n\r\n//     const transaction = await Transaction.create({\r\n//       accountId,\r\n//       cashierId: req.user.id,\r\n//       type: \"credit\",\r\n//       amount,\r\n//       newBalance: account.balance,\r\n//     });\r\n\r\n//     res.status(201).json({\r\n//       message: \"Account credited successfully\",\r\n//       data: transaction,\r\n//     });\r\n//   } catch (error) {\r\n//     console.error(\"❌ Credit Transaction Error:\", error);\r\n//     res.status(500).json({ error: \"Internal server error\" });\r\n//   }\r\n// };\r\n\r\n// // ✅ Withdraw Money (Debit) - Staff Only\r\n// export const debitAccount = async (req, res) => {\r\n//   try {\r\n//     const { accountId } = req.params;\r\n//     const { amount } = req.body;\r\n\r\n//     if (req.user.role !== \"staff\") {\r\n//       return res.status(403).json({ error: \"Access denied. Only staff can process transactions\" });\r\n//     }\r\n\r\n//     if (!amount || amount <= 0) {\r\n//       return res.status(400).json({ error: \"Invalid amount. Must be greater than zero.\" });\r\n//     }\r\n\r\n//     const account = await Account.findById(accountId);\r\n//     if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n//     if (account.balance < amount) {\r\n//       return res.status(400).json({ error: \"Insufficient funds\" });\r\n//     }\r\n\r\n//     account.balance -= amount;\r\n//     await account.save();\r\n\r\n//     const transaction = await Transaction.create({\r\n//       accountId,\r\n//       cashierId: req.user.id,\r\n//       type: \"debit\",\r\n//       amount,\r\n//       newBalance: account.balance,\r\n//     });\r\n\r\n//     res.status(201).json({\r\n//       message: \"Account debited successfully\",\r\n//       data: transaction,\r\n//     });\r\n//   } catch (error) {\r\n//     console.error(\"❌ Debit Transaction Error:\", error);\r\n//     res.status(500).json({ error: \"Internal server error\" });\r\n//   }\r\n// };\r\n\r\n// // ✅ Get Transaction History (User only)\r\n// export const getTransactions = async (req, res) => {\r\n//   try {\r\n//     const { accountId } = req.params;\r\n\r\n//     const account = await Account.findOne({ _id: accountId, owner: req.user.id });\r\n//     if (!account) return res.status(404).json({ error: \"Account not found or unauthorized\" });\r\n\r\n//     const transactions = await Transaction.find({ accountId }).sort({ createdAt: -1 });\r\n\r\n//     res.status(200).json({ data: transactions });\r\n//   } catch (error) {\r\n//     console.error(\"❌ Get Transactions Error:\", error);\r\n//     res.status(500).json({ error: \"Internal server error\" });\r\n//   }\r\n// };\r\n\r\n// // ✅ Get a Specific Transaction (User only)\r\n// export const getTransactionById = async (req, res) => {\r\n//   try {\r\n//     const { transactionId } = req.params;\r\n\r\n//     const transaction = await Transaction.findById(transactionId);\r\n//     if (!transaction) return res.status(404).json({ error: \"Transaction not found\" });\r\n\r\n//     const account = await Account.findOne({ _id: transaction.accountId, owner: req.user.id });\r\n//     if (!account) return res.status(403).json({ error: \"Unauthorized access to transaction\" });\r\n\r\n//     res.status(200).json({ data: transaction });\r\n//   } catch (error) {\r\n//     console.error(\"❌ Get Transaction Error:\", error);\r\n//     res.status(500).json({ error: \"Internal server error\" });\r\n//   }\r\n// };\r\nimport Transaction from \"../models/Transaction.js\";\r\nimport Account from \"../models/account.js\";\r\n\r\n// ✅ Deposit Money (Credit) - Staff Only\r\nexport const creditAccount = async (req, res) => {\r\n  try {\r\n    if (!req.user?.id) {\r\n      console.error(\"❌ Missing User ID in Token:\", req.user);\r\n      return res.status(403).json({ error: \"Invalid token: User ID missing\" });\r\n    }\r\n    console.log(\"🔍 Token Decoded:\", req.user);\r\n\r\n    const { accountId } = req.params;\r\n    const { amount } = req.body;\r\n\r\n    if (req.user.role !== \"staff\") {\r\n      return res.status(403).json({ error: \"Access denied. Only staff can process transactions\" });\r\n    }\r\n\r\n    if (!amount || amount <= 0) {\r\n      return res.status(400).json({ error: \"Invalid amount. Must be greater than zero.\" });\r\n    }\r\n\r\n    const account = await Account.findById(accountId);\r\n    if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n    account.balance += amount;\r\n    await account.save();\r\n\r\n    const transaction = await Transaction.create({\r\n      accountId,\r\n      cashierId: req.user.id,\r\n      type: \"credit\",\r\n      amount,\r\n      newBalance: account.balance,\r\n    });\r\n\r\n    res.status(201).json({\r\n      message: \"Account credited successfully\",\r\n      data: transaction,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"❌ Credit Transaction Error:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n\r\n// ✅ Withdraw Money (Debit) - Staff Only\r\nexport const debitAccount = async (req, res) => {\r\n  try {\r\n    if (!req.user?.id) {\r\n      console.error(\"❌ Missing User ID in Token:\", req.user);\r\n      return res.status(403).json({ error: \"Invalid token: User ID missing\" });\r\n    }\r\n    console.log(\"🔍 Token Decoded:\", req.user);\r\n\r\n    const { accountId } = req.params;\r\n    const { amount } = req.body;\r\n\r\n    if (req.user.role !== \"staff\") {\r\n      return res.status(403).json({ error: \"Access denied. Only staff can process transactions\" });\r\n    }\r\n\r\n    if (!amount || amount <= 0) {\r\n      return res.status(400).json({ error: \"Invalid amount. Must be greater than zero.\" });\r\n    }\r\n\r\n    const account = await Account.findById(accountId);\r\n    if (!account) return res.status(404).json({ error: \"Account not found\" });\r\n\r\n    if (account.balance < amount) {\r\n      return res.status(400).json({ error: \"Insufficient funds\" });\r\n    }\r\n\r\n    account.balance -= amount;\r\n    await account.save();\r\n\r\n    const transaction = await Transaction.create({\r\n      accountId,\r\n      cashierId: req.user.id,\r\n      type: \"debit\",\r\n      amount,\r\n      newBalance: account.balance,\r\n    });\r\n\r\n    res.status(201).json({\r\n      message: \"Account debited successfully\",\r\n      data: transaction,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"❌ Debit Transaction Error:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n\r\n// ✅ Get Transaction History (User only)\r\n// export const getTransactions = async (req, res) => {\r\n//   try {\r\n//     if (!req.user?.id) {\r\n//       console.error(\"❌ Missing User ID in Token:\", req.user);\r\n//       return res.status(403).json({ error: \"Invalid token: User ID missing\" });\r\n//     }\r\n//     console.log(\"🔍 Token Decoded:\", req.user);\r\n\r\n//     const { accountId } = req.params;\r\n\r\n//     const account = await Account.findOne({ _id: accountId, owner: req.user.id });\r\n//     if (!account) return res.status(404).json({ error: \"Account not found or unauthorized\" });\r\n\r\n//     const transactions = await Transaction.find({ accountId }).sort({ createdAt: -1 });\r\n\r\n//     res.status(200).json({ data: transactions });\r\n//   } catch (error) {\r\n//     console.error(\"❌ Get Transactions Error:\", error);\r\n//     res.status(500).json({ error: \"Internal server error\" });\r\n//   }\r\n// };\r\nexport const getTransactions = async (req, res) => {\r\n  try {\r\n    if (!req.user?.id) {\r\n      console.error(\"❌ Missing User ID in Token:\", req.user);\r\n      return res.status(403).json({ error: \"Invalid token: User ID missing\" });\r\n    }\r\n    console.log(\"🔍 Token Decoded:\", req.user);\r\n\r\n    const { accountId } = req.params;\r\n\r\n    const account = await Account.findOne({ _id: accountId, owner: req.user.id });\r\n    if (!account) return res.status(404).json({ error: \"Account not found or unauthorized\" });\r\n\r\n    const transactions = await Transaction.find({ accountId });\r\n    console.log(\"🚀 Retrieved Transactions:\", transactions); // Debug log\r\n\r\n    if (!transactions || !Array.isArray(transactions)) {\r\n      throw new Error(\"Transactions not found or invalid format\");\r\n    }\r\n\r\n    const sortedTransactions = transactions.sort((a, b) => b.createdAt - a.createdAt); // Sorting locally\r\n\r\n    res.status(200).json({ data: sortedTransactions });\r\n  } catch (error) {\r\n    console.error(\"❌ Get Transactions Error:\", error.message);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n\r\n// ✅ Get a Specific Transaction (User only)\r\nexport const getTransactionById = async (req, res) => {\r\n  try {\r\n    if (!req.user?.id) {\r\n      console.error(\"❌ Missing User ID in Token:\", req.user);\r\n      return res.status(403).json({ error: \"Invalid token: User ID missing\" });\r\n    }\r\n    console.log(\"🔍 Token Decoded:\", req.user);\r\n\r\n    const { transactionId } = req.params;\r\n\r\n    const transaction = await Transaction.findById(transactionId);\r\n    if (!transaction) return res.status(404).json({ error: \"Transaction not found\" });\r\n\r\n    const account = await Account.findOne({ _id: transaction.accountId, owner: req.user.id });\r\n    if (!account) return res.status(403).json({ error: \"Unauthorized access to transaction\" });\r\n\r\n    res.status(200).json({ data: transaction });\r\n  } catch (error) {\r\n    console.error(\"❌ Get Transaction Error:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n};\r\n"],"mappings":";;;;;;AAufA,IAAAA,YAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,QAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA2C,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAxf3C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACO,MAAMG,aAAa,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;EAC/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","ignoreList":[]}},"mtime":1742632912709},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\models\\\\Transaction.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst transactionSchema = new _mongoose.default.Schema({\n  accountId: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: \"Account\",\n    required: true\n  },\n  cashierId: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: \"User\",\n    required: true\n  },\n  type: {\n    type: String,\n    enum: [\"debit\", \"credit\"],\n    required: true\n  },\n  amount: {\n    type: Number,\n    required: true,\n    min: 1 // Ensure amount is positive\n  },\n  newBalance: {\n    type: Number,\n    required: true\n  },\n  timestamp: {\n    type: Date,\n    default: Date.now\n  }\n}, {\n  timestamps: true\n});\nconst Transaction = _mongoose.default.model(\"Transaction\", transactionSchema);\nvar _default = exports.default = Transaction;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInRyYW5zYWN0aW9uU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJhY2NvdW50SWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwiY2FzaGllcklkIiwiU3RyaW5nIiwiZW51bSIsImFtb3VudCIsIk51bWJlciIsIm1pbiIsIm5ld0JhbGFuY2UiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwidGltZXN0YW1wcyIsIlRyYW5zYWN0aW9uIiwibW9kZWwiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcc2VyZ2VcXGJhbmthLWFwaVxcc3JjXFxtb2RlbHNcXCIsInNvdXJjZXMiOlsiVHJhbnNhY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuY29uc3QgdHJhbnNhY3Rpb25TY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxyXG4gIHtcclxuICAgIGFjY291bnRJZDoge1xyXG4gICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgIHJlZjogXCJBY2NvdW50XCIsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIGNhc2hpZXJJZDoge1xyXG4gICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgIHJlZjogXCJVc2VyXCIsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIHR5cGU6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICBlbnVtOiBbXCJkZWJpdFwiLCBcImNyZWRpdFwiXSxcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICB9LFxyXG4gICAgYW1vdW50OiB7XHJcbiAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgIG1pbjogMSwgLy8gRW5zdXJlIGFtb3VudCBpcyBwb3NpdGl2ZVxyXG4gICAgfSxcclxuICAgIG5ld0JhbGFuY2U6IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICB0aW1lc3RhbXA6IHtcclxuICAgICAgdHlwZTogRGF0ZSxcclxuICAgICAgZGVmYXVsdDogRGF0ZS5ub3csXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgeyB0aW1lc3RhbXBzOiB0cnVlIH1cclxuKTtcclxuXHJcbmNvbnN0IFRyYW5zYWN0aW9uID0gbW9uZ29vc2UubW9kZWwoXCJUcmFuc2FjdGlvblwiLCB0cmFuc2FjdGlvblNjaGVtYSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBUcmFuc2FjdGlvbjtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxTQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFBZ0MsU0FBQUQsdUJBQUFFLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFFaEMsTUFBTUcsaUJBQWlCLEdBQUcsSUFBSUMsaUJBQVEsQ0FBQ0MsTUFBTSxDQUMzQztFQUNFQyxTQUFTLEVBQUU7SUFDVEMsSUFBSSxFQUFFSCxpQkFBUSxDQUFDQyxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtJQUNwQ0MsR0FBRyxFQUFFLFNBQVM7SUFDZEMsUUFBUSxFQUFFO0VBQ1osQ0FBQztFQUNEQyxTQUFTLEVBQUU7SUFDVEwsSUFBSSxFQUFFSCxpQkFBUSxDQUFDQyxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtJQUNwQ0MsR0FBRyxFQUFFLE1BQU07SUFDWEMsUUFBUSxFQUFFO0VBQ1osQ0FBQztFQUNESixJQUFJLEVBQUU7SUFDSkEsSUFBSSxFQUFFTSxNQUFNO0lBQ1pDLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUM7SUFDekJILFFBQVEsRUFBRTtFQUNaLENBQUM7RUFDREksTUFBTSxFQUFFO0lBQ05SLElBQUksRUFBRVMsTUFBTTtJQUNaTCxRQUFRLEVBQUUsSUFBSTtJQUNkTSxHQUFHLEVBQUUsQ0FBQyxDQUFFO0VBQ1YsQ0FBQztFQUNEQyxVQUFVLEVBQUU7SUFDVlgsSUFBSSxFQUFFUyxNQUFNO0lBQ1pMLFFBQVEsRUFBRTtFQUNaLENBQUM7RUFDRFEsU0FBUyxFQUFFO0lBQ1RaLElBQUksRUFBRWEsSUFBSTtJQUNWbEIsT0FBTyxFQUFFa0IsSUFBSSxDQUFDQztFQUNoQjtBQUNGLENBQUMsRUFDRDtFQUFFQyxVQUFVLEVBQUU7QUFBSyxDQUNyQixDQUFDO0FBRUQsTUFBTUMsV0FBVyxHQUFHbkIsaUJBQVEsQ0FBQ29CLEtBQUssQ0FBQyxhQUFhLEVBQUVyQixpQkFBaUIsQ0FBQztBQUFDLElBQUFzQixRQUFBLEdBQUFDLE9BQUEsQ0FBQXhCLE9BQUEsR0FFdERxQixXQUFXIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_mongoose","_interopRequireDefault","require","e","__esModule","default","transactionSchema","mongoose","Schema","accountId","type","Types","ObjectId","ref","required","cashierId","String","enum","amount","Number","min","newBalance","timestamp","Date","now","timestamps","Transaction","model","_default","exports"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\models\\","sources":["Transaction.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst transactionSchema = new mongoose.Schema(\r\n  {\r\n    accountId: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      ref: \"Account\",\r\n      required: true,\r\n    },\r\n    cashierId: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      ref: \"User\",\r\n      required: true,\r\n    },\r\n    type: {\r\n      type: String,\r\n      enum: [\"debit\", \"credit\"],\r\n      required: true,\r\n    },\r\n    amount: {\r\n      type: Number,\r\n      required: true,\r\n      min: 1, // Ensure amount is positive\r\n    },\r\n    newBalance: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    timestamp: {\r\n      type: Date,\r\n      default: Date.now,\r\n    },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nconst Transaction = mongoose.model(\"Transaction\", transactionSchema);\r\n\r\nexport default Transaction;\r\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAgC,SAAAD,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEhC,MAAMG,iBAAiB,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAC3C;EACEC,SAAS,EAAE;IACTC,IAAI,EAAEH,iBAAQ,CAACC,MAAM,CAACG,KAAK,CAACC,QAAQ;IACpCC,GAAG,EAAE,SAAS;IACdC,QAAQ,EAAE;EACZ,CAAC;EACDC,SAAS,EAAE;IACTL,IAAI,EAAEH,iBAAQ,CAACC,MAAM,CAACG,KAAK,CAACC,QAAQ;IACpCC,GAAG,EAAE,MAAM;IACXC,QAAQ,EAAE;EACZ,CAAC;EACDJ,IAAI,EAAE;IACJA,IAAI,EAAEM,MAAM;IACZC,IAAI,EAAE,CAAC,OAAO,EAAE,QAAQ,CAAC;IACzBH,QAAQ,EAAE;EACZ,CAAC;EACDI,MAAM,EAAE;IACNR,IAAI,EAAES,MAAM;IACZL,QAAQ,EAAE,IAAI;IACdM,GAAG,EAAE,CAAC,CAAE;EACV,CAAC;EACDC,UAAU,EAAE;IACVX,IAAI,EAAES,MAAM;IACZL,QAAQ,EAAE;EACZ,CAAC;EACDQ,SAAS,EAAE;IACTZ,IAAI,EAAEa,IAAI;IACVlB,OAAO,EAAEkB,IAAI,CAACC;EAChB;AACF,CAAC,EACD;EAAEC,UAAU,EAAE;AAAK,CACrB,CAAC;AAED,MAAMC,WAAW,GAAGnB,iBAAQ,CAACoB,KAAK,CAAC,aAAa,EAAErB,iBAAiB,CAAC;AAAC,IAAAsB,QAAA,GAAAC,OAAA,CAAAxB,OAAA,GAEtDqB,WAAW","ignoreList":[]}},"mtime":1742476486321},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\utils\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\utils\\\\jwtHelper.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.verifyToken = exports.generateAuthToken = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n_dotenv.default.config();\n\n// Generate JWT Token\nconst generateAuthToken = user => {\n  return _jsonwebtoken.default.sign({\n    id: user._id,\n    role: user.role\n  },\n  // Ensures `id` and `role` are included\n  process.env.JWT_SECRET, {\n    expiresIn: \"1d\"\n  } // Token valid for 1 day\n  );\n};\n\n// Verify JWT Token Middleware\nexports.generateAuthToken = generateAuthToken;\nconst verifyToken = (req, res, next) => {\n  const token = req.header(\"Authorization\")?.split(\" \")[1]; // Extract token\n\n  if (!token) {\n    return res.status(401).json({\n      error: \"Access denied. No token provided.\"\n    });\n  }\n  try {\n    const decoded = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET);\n    req.user = decoded;\n    next(); // Proceed to the next middleware\n  } catch (err) {\n    res.status(403).json({\n      error: \"Invalid or expired token\"\n    });\n  }\n};\nexports.verifyToken = verifyToken;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZG90ZW52IiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiZG90ZW52IiwiY29uZmlnIiwiZ2VuZXJhdGVBdXRoVG9rZW4iLCJ1c2VyIiwiand0Iiwic2lnbiIsImlkIiwiX2lkIiwicm9sZSIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiZXhwaXJlc0luIiwiZXhwb3J0cyIsInZlcmlmeVRva2VuIiwicmVxIiwicmVzIiwibmV4dCIsInRva2VuIiwiaGVhZGVyIiwic3BsaXQiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJkZWNvZGVkIiwidmVyaWZ5IiwiZXJyIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXHNlcmdlXFxiYW5rYS1hcGlcXHNyY1xcdXRpbHNcXCIsInNvdXJjZXMiOlsiand0SGVscGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xyXG5pbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcclxuXHJcbmRvdGVudi5jb25maWcoKTtcclxuXHJcbi8vIEdlbmVyYXRlIEpXVCBUb2tlblxyXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVBdXRoVG9rZW4gPSAodXNlcikgPT4ge1xyXG4gIHJldHVybiBqd3Quc2lnbihcclxuICAgIHsgaWQ6IHVzZXIuX2lkLCByb2xlOiB1c2VyLnJvbGUgfSwgLy8gRW5zdXJlcyBgaWRgIGFuZCBgcm9sZWAgYXJlIGluY2x1ZGVkXHJcbiAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVULFxyXG4gICAgeyBleHBpcmVzSW46IFwiMWRcIiB9IC8vIFRva2VuIHZhbGlkIGZvciAxIGRheVxyXG4gICk7XHJcbn07XHJcblxyXG4vLyBWZXJpZnkgSldUIFRva2VuIE1pZGRsZXdhcmVcclxuZXhwb3J0IGNvbnN0IHZlcmlmeVRva2VuID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVyKFwiQXV0aG9yaXphdGlvblwiKT8uc3BsaXQoXCIgXCIpWzFdOyAvLyBFeHRyYWN0IHRva2VuXHJcblxyXG4gIGlmICghdG9rZW4pIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIkFjY2VzcyBkZW5pZWQuIE5vIHRva2VuIHByb3ZpZGVkLlwiIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKTtcclxuICAgIHJlcS51c2VyID0gZGVjb2RlZDtcclxuICAgIG5leHQoKTsgLy8gUHJvY2VlZCB0byB0aGUgbmV4dCBtaWRkbGV3YXJlXHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiBcIkludmFsaWQgb3IgZXhwaXJlZCB0b2tlblwiIH0pO1xyXG4gIH1cclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxhQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFBNEIsU0FBQUQsdUJBQUFHLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFFNUJHLGVBQU0sQ0FBQ0MsTUFBTSxDQUFDLENBQUM7O0FBRWY7QUFDTyxNQUFNQyxpQkFBaUIsR0FBSUMsSUFBSSxJQUFLO0VBQ3pDLE9BQU9DLHFCQUFHLENBQUNDLElBQUksQ0FDYjtJQUFFQyxFQUFFLEVBQUVILElBQUksQ0FBQ0ksR0FBRztJQUFFQyxJQUFJLEVBQUVMLElBQUksQ0FBQ0s7RUFBSyxDQUFDO0VBQUU7RUFDbkNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxVQUFVLEVBQ3RCO0lBQUVDLFNBQVMsRUFBRTtFQUFLLENBQUMsQ0FBQztFQUN0QixDQUFDO0FBQ0gsQ0FBQzs7QUFFRDtBQUFBQyxPQUFBLENBQUFYLGlCQUFBLEdBQUFBLGlCQUFBO0FBQ08sTUFBTVksV0FBVyxHQUFHQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQzdDLE1BQU1DLEtBQUssR0FBR0gsR0FBRyxDQUFDSSxNQUFNLENBQUMsZUFBZSxDQUFDLEVBQUVDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztFQUUxRCxJQUFJLENBQUNGLEtBQUssRUFBRTtJQUNWLE9BQU9GLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsS0FBSyxFQUFFO0lBQW9DLENBQUMsQ0FBQztFQUM3RTtFQUVBLElBQUk7SUFDRixNQUFNQyxPQUFPLEdBQUdwQixxQkFBRyxDQUFDcUIsTUFBTSxDQUFDUCxLQUFLLEVBQUVULE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxVQUFVLENBQUM7SUFDekRJLEdBQUcsQ0FBQ1osSUFBSSxHQUFHcUIsT0FBTztJQUNsQlAsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ1YsQ0FBQyxDQUFDLE9BQU9TLEdBQUcsRUFBRTtJQUNaVixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLEtBQUssRUFBRTtJQUEyQixDQUFDLENBQUM7RUFDN0Q7QUFDRixDQUFDO0FBQUNWLE9BQUEsQ0FBQUMsV0FBQSxHQUFBQSxXQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","_dotenv","e","__esModule","default","dotenv","config","generateAuthToken","user","jwt","sign","id","_id","role","process","env","JWT_SECRET","expiresIn","exports","verifyToken","req","res","next","token","header","split","status","json","error","decoded","verify","err"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\utils\\","sources":["jwtHelper.js"],"sourcesContent":["import jwt from \"jsonwebtoken\";\r\nimport dotenv from \"dotenv\";\r\n\r\ndotenv.config();\r\n\r\n// Generate JWT Token\r\nexport const generateAuthToken = (user) => {\r\n  return jwt.sign(\r\n    { id: user._id, role: user.role }, // Ensures `id` and `role` are included\r\n    process.env.JWT_SECRET,\r\n    { expiresIn: \"1d\" } // Token valid for 1 day\r\n  );\r\n};\r\n\r\n// Verify JWT Token Middleware\r\nexport const verifyToken = (req, res, next) => {\r\n  const token = req.header(\"Authorization\")?.split(\" \")[1]; // Extract token\r\n\r\n  if (!token) {\r\n    return res.status(401).json({ error: \"Access denied. No token provided.\" });\r\n  }\r\n\r\n  try {\r\n    const decoded = jwt.verify(token, process.env.JWT_SECRET);\r\n    req.user = decoded;\r\n    next(); // Proceed to the next middleware\r\n  } catch (err) {\r\n    res.status(403).json({ error: \"Invalid or expired token\" });\r\n  }\r\n};\r\n"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA4B,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE5BG,eAAM,CAACC,MAAM,CAAC,CAAC;;AAEf;AACO,MAAMC,iBAAiB,GAAIC,IAAI,IAAK;EACzC,OAAOC,qBAAG,CAACC,IAAI,CACb;IAAEC,EAAE,EAAEH,IAAI,CAACI,GAAG;IAAEC,IAAI,EAAEL,IAAI,CAACK;EAAK,CAAC;EAAE;EACnCC,OAAO,CAACC,GAAG,CAACC,UAAU,EACtB;IAAEC,SAAS,EAAE;EAAK,CAAC,CAAC;EACtB,CAAC;AACH,CAAC;;AAED;AAAAC,OAAA,CAAAX,iBAAA,GAAAA,iBAAA;AACO,MAAMY,WAAW,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC7C,MAAMC,KAAK,GAAGH,GAAG,CAACI,MAAM,CAAC,eAAe,CAAC,EAAEC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;EAE1D,IAAI,CAACF,KAAK,EAAE;IACV,OAAOF,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAE;IAAoC,CAAC,CAAC;EAC7E;EAEA,IAAI;IACF,MAAMC,OAAO,GAAGpB,qBAAG,CAACqB,MAAM,CAACP,KAAK,EAAET,OAAO,CAACC,GAAG,CAACC,UAAU,CAAC;IACzDI,GAAG,CAACZ,IAAI,GAAGqB,OAAO;IAClBP,IAAI,CAAC,CAAC,CAAC,CAAC;EACV,CAAC,CAAC,OAAOS,GAAG,EAAE;IACZV,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAE;IAA2B,CAAC,CAAC;EAC7D;AACF,CAAC;AAACV,OAAA,CAAAC,WAAA,GAAAA,WAAA","ignoreList":[]}},"mtime":1742645157251},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\utils\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"filename\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\src\\\\utils\\\\jwtHelper.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\serge\\\\banka-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\serge\\\\banka-api\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.verifyToken = exports.generateAuthToken = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n_dotenv.default.config();\n\n// ✅ Generate JWT Token\nconst generateAuthToken = user => {\n  return _jsonwebtoken.default.sign({\n    id: user._id,\n    role: user.role\n  },\n  // Ensures `id` and `role` are included\n  process.env.JWT_SECRET, {\n    expiresIn: \"1d\"\n  } // Token valid for 1 day\n  );\n};\n\n// ✅ Verify JWT Token Middleware\nexports.generateAuthToken = generateAuthToken;\nconst verifyToken = (req, res, next) => {\n  const token = req.header(\"Authorization\")?.split(\" \")[1]; // Extract token\n\n  if (!token) {\n    return res.status(401).json({\n      error: \"Access denied. No token provided.\"\n    });\n  }\n  try {\n    const decoded = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET);\n    req.user = decoded;\n    next(); // Proceed to the next middleware\n  } catch (err) {\n    res.status(403).json({\n      error: \"Invalid or expired token\"\n    });\n  }\n};\nexports.verifyToken = verifyToken;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZG90ZW52IiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiZG90ZW52IiwiY29uZmlnIiwiZ2VuZXJhdGVBdXRoVG9rZW4iLCJ1c2VyIiwiand0Iiwic2lnbiIsImlkIiwiX2lkIiwicm9sZSIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiZXhwaXJlc0luIiwiZXhwb3J0cyIsInZlcmlmeVRva2VuIiwicmVxIiwicmVzIiwibmV4dCIsInRva2VuIiwiaGVhZGVyIiwic3BsaXQiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJkZWNvZGVkIiwidmVyaWZ5IiwiZXJyIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXHNlcmdlXFxiYW5rYS1hcGlcXHNyY1xcdXRpbHNcXCIsInNvdXJjZXMiOlsiand0SGVscGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xyXG5pbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcclxuXHJcbmRvdGVudi5jb25maWcoKTtcclxuXHJcbi8vIOKchSBHZW5lcmF0ZSBKV1QgVG9rZW5cclxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlQXV0aFRva2VuID0gKHVzZXIpID0+IHtcclxuICByZXR1cm4gand0LnNpZ24oXHJcbiAgICB7IGlkOiB1c2VyLl9pZCwgcm9sZTogdXNlci5yb2xlIH0sIC8vIEVuc3VyZXMgYGlkYCBhbmQgYHJvbGVgIGFyZSBpbmNsdWRlZFxyXG4gICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCxcclxuICAgIHsgZXhwaXJlc0luOiBcIjFkXCIgfSAvLyBUb2tlbiB2YWxpZCBmb3IgMSBkYXlcclxuICApO1xyXG59O1xyXG5cclxuLy8g4pyFIFZlcmlmeSBKV1QgVG9rZW4gTWlkZGxld2FyZVxyXG5leHBvcnQgY29uc3QgdmVyaWZ5VG9rZW4gPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXIoXCJBdXRob3JpemF0aW9uXCIpPy5zcGxpdChcIiBcIilbMV07IC8vIEV4dHJhY3QgdG9rZW5cclxuXHJcbiAgaWYgKCF0b2tlbikge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IFwiQWNjZXNzIGRlbmllZC4gTm8gdG9rZW4gcHJvdmlkZWQuXCIgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpO1xyXG4gICAgcmVxLnVzZXIgPSBkZWNvZGVkO1xyXG4gICAgbmV4dCgpOyAvLyBQcm9jZWVkIHRvIHRoZSBuZXh0IG1pZGRsZXdhcmVcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCBvciBleHBpcmVkIHRva2VuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLGFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUE0QixTQUFBRCx1QkFBQUcsQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUU1QkcsZUFBTSxDQUFDQyxNQUFNLENBQUMsQ0FBQzs7QUFFZjtBQUNPLE1BQU1DLGlCQUFpQixHQUFJQyxJQUFJLElBQUs7RUFDekMsT0FBT0MscUJBQUcsQ0FBQ0MsSUFBSSxDQUNiO0lBQUVDLEVBQUUsRUFBRUgsSUFBSSxDQUFDSSxHQUFHO0lBQUVDLElBQUksRUFBRUwsSUFBSSxDQUFDSztFQUFLLENBQUM7RUFBRTtFQUNuQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFVBQVUsRUFDdEI7SUFBRUMsU0FBUyxFQUFFO0VBQUssQ0FBQyxDQUFDO0VBQ3RCLENBQUM7QUFDSCxDQUFDOztBQUVEO0FBQUFDLE9BQUEsQ0FBQVgsaUJBQUEsR0FBQUEsaUJBQUE7QUFDTyxNQUFNWSxXQUFXLEdBQUdBLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDN0MsTUFBTUMsS0FBSyxHQUFHSCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxlQUFlLENBQUMsRUFBRUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7O0VBRTFELElBQUksQ0FBQ0YsS0FBSyxFQUFFO0lBQ1YsT0FBT0YsR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxLQUFLLEVBQUU7SUFBb0MsQ0FBQyxDQUFDO0VBQzdFO0VBRUEsSUFBSTtJQUNGLE1BQU1DLE9BQU8sR0FBR3BCLHFCQUFHLENBQUNxQixNQUFNLENBQUNQLEtBQUssRUFBRVQsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFVBQVUsQ0FBQztJQUN6REksR0FBRyxDQUFDWixJQUFJLEdBQUdxQixPQUFPO0lBQ2xCUCxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDVixDQUFDLENBQUMsT0FBT1MsR0FBRyxFQUFFO0lBQ1pWLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsS0FBSyxFQUFFO0lBQTJCLENBQUMsQ0FBQztFQUM3RDtBQUNGLENBQUM7QUFBQ1YsT0FBQSxDQUFBQyxXQUFBLEdBQUFBLFdBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_jsonwebtoken","_interopRequireDefault","require","_dotenv","e","__esModule","default","dotenv","config","generateAuthToken","user","jwt","sign","id","_id","role","process","env","JWT_SECRET","expiresIn","exports","verifyToken","req","res","next","token","header","split","status","json","error","decoded","verify","err"],"sourceRoot":"C:\\Users\\serge\\banka-api\\src\\utils\\","sources":["jwtHelper.js"],"sourcesContent":["import jwt from \"jsonwebtoken\";\r\nimport dotenv from \"dotenv\";\r\n\r\ndotenv.config();\r\n\r\n// ✅ Generate JWT Token\r\nexport const generateAuthToken = (user) => {\r\n  return jwt.sign(\r\n    { id: user._id, role: user.role }, // Ensures `id` and `role` are included\r\n    process.env.JWT_SECRET,\r\n    { expiresIn: \"1d\" } // Token valid for 1 day\r\n  );\r\n};\r\n\r\n// ✅ Verify JWT Token Middleware\r\nexport const verifyToken = (req, res, next) => {\r\n  const token = req.header(\"Authorization\")?.split(\" \")[1]; // Extract token\r\n\r\n  if (!token) {\r\n    return res.status(401).json({ error: \"Access denied. No token provided.\" });\r\n  }\r\n\r\n  try {\r\n    const decoded = jwt.verify(token, process.env.JWT_SECRET);\r\n    req.user = decoded;\r\n    next(); // Proceed to the next middleware\r\n  } catch (err) {\r\n    res.status(403).json({ error: \"Invalid or expired token\" });\r\n  }\r\n};\r\n"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA4B,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE5BG,eAAM,CAACC,MAAM,CAAC,CAAC;;AAEf;AACO,MAAMC,iBAAiB,GAAIC,IAAI,IAAK;EACzC,OAAOC,qBAAG,CAACC,IAAI,CACb;IAAEC,EAAE,EAAEH,IAAI,CAACI,GAAG;IAAEC,IAAI,EAAEL,IAAI,CAACK;EAAK,CAAC;EAAE;EACnCC,OAAO,CAACC,GAAG,CAACC,UAAU,EACtB;IAAEC,SAAS,EAAE;EAAK,CAAC,CAAC;EACtB,CAAC;AACH,CAAC;;AAED;AAAAC,OAAA,CAAAX,iBAAA,GAAAA,iBAAA;AACO,MAAMY,WAAW,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC7C,MAAMC,KAAK,GAAGH,GAAG,CAACI,MAAM,CAAC,eAAe,CAAC,EAAEC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;EAE1D,IAAI,CAACF,KAAK,EAAE;IACV,OAAOF,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAE;IAAoC,CAAC,CAAC;EAC7E;EAEA,IAAI;IACF,MAAMC,OAAO,GAAGpB,qBAAG,CAACqB,MAAM,CAACP,KAAK,EAAET,OAAO,CAACC,GAAG,CAACC,UAAU,CAAC;IACzDI,GAAG,CAACZ,IAAI,GAAGqB,OAAO;IAClBP,IAAI,CAAC,CAAC,CAAC,CAAC;EACV,CAAC,CAAC,OAAOS,GAAG,EAAE;IACZV,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAE;IAA2B,CAAC,CAAC;EAC7D;AACF,CAAC;AAACV,OAAA,CAAAC,WAAA,GAAAA,WAAA","ignoreList":[]}},"mtime":1742462550982}}